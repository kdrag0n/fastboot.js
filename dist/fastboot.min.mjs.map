{"version":3,"file":"fastboot.min.mjs","sources":["../lib/common.js","../lib/sparse.js","../node_modules/@zip.js/zip.js/lib/core/util/mime-type.js","../node_modules/@zip.js/zip.js/lib/core/codecs/crc32.js","../node_modules/@zip.js/zip.js/lib/core/codecs/crypto.js","../node_modules/@zip.js/zip.js/lib/core/codecs/codec.js","../node_modules/@zip.js/zip.js/lib/core/codecs/codec-pool.js","../node_modules/@zip.js/zip.js/lib/core/engine.js","../node_modules/@zip.js/zip.js/lib/core/zip-entry.js","../node_modules/@zip.js/zip.js/lib/core/zip-reader.js","../node_modules/@zip.js/zip.js/lib/core/constants.js","../node_modules/@zip.js/zip.js/lib/core/stream.js","../node_modules/@zip.js/zip.js/lib/core/zip-core.js","../lib/factory.js","../lib/fastboot.js"],"sourcesContent":["let debugLevel = false;\n\nexport function logDebug(...data) {\n    if (debugLevel >= 1) {\n        console.log(...data);\n    }\n}\n\nexport function logVerbose(...data) {\n    if (debugLevel >= 2) {\n        console.log(...data);\n    }\n}\n\n/**\n * Change the debug level for the fastboot client:\n *   - 0 = silent\n *   - 1 = debug, recommended for general use\n *   - 2 = verbose, for debugging only\n *\n * @param {number} level - Debug level to use.\n */\nexport function setDebugLevel(level) {\n    debugLevel = level;\n}\n\n/**\n * Reads all of the data in the given blob and returns it as an ArrayBuffer.\n *\n * @param {Blob} blob - Blob with the data to read.\n * @returns {buffer} ArrayBuffer containing data from the blob.\n * @ignore\n */\nexport function readBlobAsBuffer(blob) {\n    return new Promise((resolve, reject) => {\n        let reader = new FileReader();\n        reader.onload = () => {\n            resolve(reader.result);\n        };\n        reader.onerror = () => {\n            reject(reader.error);\n        };\n\n        reader.readAsArrayBuffer(blob);\n    });\n}\n\nfunction waitForFrame() {\n    return new Promise((resolve, _reject) => {\n        window.requestAnimationFrame(resolve);\n    });\n}\n\nexport async function runWithTimedProgress(\n    onProgress,\n    action,\n    item,\n    duration,\n    workPromise\n) {\n    let startTime = new Date().getTime();\n    let stop = false;\n\n    onProgress(action, item, 0.0);\n    let progressPromise = (async () => {\n        let now;\n        let targetTime = startTime + duration;\n\n        do {\n            now = new Date().getTime();\n            onProgress(action, item, (now - startTime) / duration);\n            await waitForFrame();\n        } while (!stop && now < targetTime);\n    })();\n\n    await Promise.race([progressPromise, workPromise]);\n    stop = true;\n    await progressPromise;\n    await workPromise;\n\n    onProgress(action, item, 1.0);\n}\n\n/** Exception class for operations that exceeded their timeout duration. */\nexport class TimeoutError extends Error {\n    constructor(timeout) {\n        super(`Timeout of ${timeout} ms exceeded`);\n        this.name = \"TimeoutError\";\n        this.timeout = timeout;\n    }\n}\n\nexport function runWithTimeout(promise, timeout) {\n    return new Promise((resolve, reject) => {\n        // Set up timeout\n        let timedOut = false;\n        let tid = setTimeout(() => {\n            // Set sentinel first to prevent race in promise resolving\n            timedOut = true;\n            reject(new TimeoutError(timeout));\n        }, timeout);\n\n        // Passthrough\n        promise\n            .then((val) => {\n                if (!timedOut) {\n                    resolve(val);\n                }\n            })\n            .catch((err) => {\n                if (!timedOut) {\n                    reject(err);\n                }\n            })\n            .finally(() => {\n                if (!timedOut) {\n                    clearTimeout(tid);\n                }\n            });\n    });\n}\n","import * as common from \"./common.js\";\n\nconst FILE_MAGIC = 0xed26ff3a;\n\nconst MAJOR_VERSION = 1;\nconst MINOR_VERSION = 0;\nexport const FILE_HEADER_SIZE = 28;\nconst CHUNK_HEADER_SIZE = 12;\n\n// AOSP libsparse uses 64 MiB chunks\nconst RAW_CHUNK_SIZE = 64 * 1024 * 1024;\n\nconst CHUNK_TYPE_RAW = 0xcac1;\nconst CHUNK_TYPE_FILL = 0xcac2;\nconst CHUNK_TYPE_SKIP = 0xcac3;\n\nconst CHUNK_TYPE_MAP = new Map();\nCHUNK_TYPE_MAP.set(CHUNK_TYPE_RAW, \"raw\");\nCHUNK_TYPE_MAP.set(CHUNK_TYPE_FILL, \"fill\");\nCHUNK_TYPE_MAP.set(CHUNK_TYPE_SKIP, \"skip\");\n\nexport class ImageError extends Error {\n    constructor(message) {\n        super(message);\n        this.name = \"ImageError\";\n    }\n}\n\n/**\n * Returns a parsed version of the sparse image file header from the given buffer.\n *\n * @param {ArrayBuffer} buffer - Raw file header data.\n * @returns {header} Object containing the header information.\n */\nexport function parseFileHeader(buffer) {\n    let view = new DataView(buffer);\n\n    let magic = view.getUint32(0, true);\n    if (magic !== FILE_MAGIC) {\n        return null;\n    }\n\n    // v1.0+\n    let major = view.getUint16(4, true);\n    let minor = view.getUint16(6, true);\n    if (major !== MAJOR_VERSION || minor < MINOR_VERSION) {\n        throw new ImageError(\n            `Unsupported sparse image version ${major}.${minor}`\n        );\n    }\n\n    let fileHdrSize = view.getUint16(8, true);\n    let chunkHdrSize = view.getUint16(10, true);\n    if (\n        fileHdrSize !== FILE_HEADER_SIZE ||\n        chunkHdrSize !== CHUNK_HEADER_SIZE\n    ) {\n        throw new ImageError(\n            `Invalid file header size ${fileHdrSize}, chunk header size ${chunkHdrSize}`\n        );\n    }\n\n    let blockSize = view.getUint32(12, true);\n    if (blockSize % 4 !== 0) {\n        throw new ImageError(`Block size ${blockSize} is not a multiple of 4`);\n    }\n\n    return {\n        blockSize: blockSize,\n        blocks: view.getUint32(16, true),\n        chunks: view.getUint32(20, true),\n        crc32: view.getUint32(24, true),\n    };\n}\n\nfunction parseChunkHeader(buffer) {\n    let view = new DataView(buffer);\n\n    // This isn't the same as what createImage takes.\n    // Further processing needs to be done on the chunks.\n    return {\n        type: CHUNK_TYPE_MAP.get(view.getUint16(0, true)),\n        /* 2: reserved, 16 bits */\n        blocks: view.getUint32(4, true),\n        dataBytes: view.getUint32(8, true) - CHUNK_HEADER_SIZE,\n        data: null, // to be populated by consumer\n    };\n}\n\nfunction calcChunksBlockSize(chunks) {\n    return chunks\n        .map((chunk) => chunk.blocks)\n        .reduce((total, c) => total + c, 0);\n}\n\nfunction calcChunksDataSize(chunks) {\n    return chunks\n        .map((chunk) => chunk.data.byteLength)\n        .reduce((total, c) => total + c, 0);\n}\n\nfunction calcChunksSize(chunks) {\n    // 28-byte file header, 12-byte chunk headers\n    let overhead = FILE_HEADER_SIZE + CHUNK_HEADER_SIZE * chunks.length;\n    return overhead + calcChunksDataSize(chunks);\n}\n\nfunction createImage(header, chunks) {\n    let buffer = new ArrayBuffer(calcChunksSize(chunks));\n    let dataView = new DataView(buffer);\n    let arrayView = new Uint8Array(buffer);\n\n    dataView.setUint32(0, FILE_MAGIC, true);\n    // v1.0\n    dataView.setUint16(4, MAJOR_VERSION, true);\n    dataView.setUint16(6, MINOR_VERSION, true);\n    dataView.setUint16(8, FILE_HEADER_SIZE, true);\n    dataView.setUint16(10, CHUNK_HEADER_SIZE, true);\n\n    // Match input parameters\n    dataView.setUint32(12, header.blockSize, true);\n    dataView.setUint32(16, header.blocks, true);\n    dataView.setUint32(20, chunks.length, true);\n\n    // We don't care about the CRC. AOSP docs specify that this should be a CRC32,\n    // but AOSP libsparse always sets 0 and puts the CRC in a final undocumented\n    // 0xCAC4 chunk instead.\n    dataView.setUint32(24, 0, true);\n\n    let chunkOff = FILE_HEADER_SIZE;\n    for (let chunk of chunks) {\n        let typeMagic;\n        if (chunk.type === \"raw\") {\n            typeMagic = CHUNK_TYPE_RAW;\n        } else if (chunk.type === \"fill\") {\n            typeMagic = CHUNK_TYPE_FILL;\n        } else if (chunk.type === \"skip\") {\n            typeMagic = CHUNK_TYPE_SKIP;\n        } else {\n            // We don't support the undocumented 0xCAC4 CRC32 chunk type because\n            // it's unnecessary and very rarely used in practice.\n            throw new ImageError(`Invalid chunk type \"${chunk.type}\"`);\n        }\n\n        dataView.setUint16(chunkOff, typeMagic, true);\n        dataView.setUint16(chunkOff + 2, 0, true); // reserved\n        dataView.setUint32(chunkOff + 4, chunk.blocks, true);\n        dataView.setUint32(\n            chunkOff + 8,\n            CHUNK_HEADER_SIZE + chunk.data.byteLength,\n            true\n        );\n        chunkOff += CHUNK_HEADER_SIZE;\n\n        let chunkArrayView = new Uint8Array(chunk.data);\n        arrayView.set(chunkArrayView, chunkOff);\n        chunkOff += chunk.data.byteLength;\n    }\n\n    return buffer;\n}\n\n/**\n * Checks whether the given buffer is a valid sparse image.\n *\n * @param {ArrayBuffer} buffer - Buffer containing the data to check.\n * @returns {valid} Whether the buffer is a valid sparse image.\n */\nexport function isSparse(buffer) {\n    try {\n        let header = parseFileHeader(buffer);\n        return header !== null;\n    } catch (error) {\n        // ImageError = invalid\n        return false;\n    }\n}\n\n/**\n * Creates a sparse image from buffer containing raw image data.\n *\n * @param {ArrayBuffer} rawBuffer - Buffer containing the raw image data.\n * @returns {sparseBuffer} Buffer containing the new sparse image.\n */\nexport function fromRaw(rawBuffer) {\n    let header = {\n        blockSize: 4096,\n        blocks: rawBuffer.byteLength / 4096,\n        chunks: 1,\n        crc32: 0,\n    };\n\n    let chunks = [];\n    while (rawBuffer.byteLength > 0) {\n        let chunkSize = Math.min(rawBuffer.byteLength, RAW_CHUNK_SIZE);\n        chunks.push({\n            type: \"raw\",\n            blocks: chunkSize / header.blockSize,\n            data: rawBuffer.slice(0, chunkSize),\n        });\n        rawBuffer = rawBuffer.slice(chunkSize);\n    }\n\n    return createImage(header, chunks);\n}\n\n/**\n * Split a sparse image into smaller sparse images within the given size.\n * This takes a Blob instead of an ArrayBuffer because it may process images\n * larger than RAM.\n *\n * @param {Blob} blob - Blob containing the sparse image to split.\n * @param {number} splitSize - Maximum size per split.\n * @yields {Object} Data of the next split image and its output size in bytes.\n */\nexport async function* splitBlob(blob, splitSize) {\n    common.logDebug(\n        `Splitting ${blob.size}-byte sparse image into ${splitSize}-byte chunks`\n    );\n    // Short-circuit if splitting isn't required\n    if (blob.size <= splitSize) {\n        common.logDebug(\"Blob fits in 1 payload, not splitting\");\n        yield {\n            data: await common.readBlobAsBuffer(blob),\n            bytes: blob.size,\n        };\n        return;\n    }\n\n    let headerData = await common.readBlobAsBuffer(\n        blob.slice(0, FILE_HEADER_SIZE)\n    );\n    let header = parseFileHeader(headerData);\n    // Remove CRC32 (if present), otherwise splitting will invalidate it\n    header.crc32 = 0;\n    blob = blob.slice(FILE_HEADER_SIZE);\n\n    let splitChunks = [];\n    let splitDataBytes = 0;\n    for (let i = 0; i < header.chunks; i++) {\n        let chunkHeaderData = await common.readBlobAsBuffer(\n            blob.slice(0, CHUNK_HEADER_SIZE)\n        );\n        let chunk = parseChunkHeader(chunkHeaderData);\n        chunk.data = await common.readBlobAsBuffer(\n            blob.slice(CHUNK_HEADER_SIZE, CHUNK_HEADER_SIZE + chunk.dataBytes)\n        );\n        blob = blob.slice(CHUNK_HEADER_SIZE + chunk.dataBytes);\n\n        let bytesRemaining = splitSize - calcChunksSize(splitChunks);\n        common.logVerbose(\n            `  Chunk ${i}: type ${chunk.type}, ${chunk.dataBytes} bytes / ${chunk.blocks} blocks, ${bytesRemaining} bytes remaining`\n        );\n        if (bytesRemaining >= chunk.dataBytes) {\n            // Read the chunk and add it\n            common.logVerbose(\"    Space is available, adding chunk\");\n            splitChunks.push(chunk);\n            // Track amount of data written on the output device, in bytes\n            splitDataBytes += chunk.blocks * header.blockSize;\n        } else {\n            // Out of space, finish this split\n            // Blocks need to be calculated from chunk headers instead of going by size\n            // because FILL and SKIP chunks cover more blocks than the data they contain.\n            let splitBlocks = calcChunksBlockSize(splitChunks);\n            splitChunks.push({\n                type: \"skip\",\n                blocks: header.blocks - splitBlocks,\n                data: new ArrayBuffer(),\n            });\n            common.logVerbose(\n                `Partition is ${\n                    header.blocks\n                } blocks, used ${splitBlocks}, padded with ${\n                    header.blocks - splitBlocks\n                }, finishing split with ${calcChunksBlockSize(\n                    splitChunks\n                )} blocks`\n            );\n            let splitImage = createImage(header, splitChunks);\n            common.logDebug(\n                `Finished ${splitImage.byteLength}-byte split with ${splitChunks.length} chunks`\n            );\n            yield {\n                data: splitImage,\n                bytes: splitDataBytes,\n            };\n\n            // Start a new split. Every split is considered a full image by the\n            // bootloader, so we need to skip the *total* written blocks.\n            common.logVerbose(\n                `Starting new split: skipping first ${splitBlocks} blocks and adding chunk`\n            );\n            splitChunks = [\n                {\n                    type: \"skip\",\n                    blocks: splitBlocks,\n                    data: new ArrayBuffer(),\n                },\n                chunk,\n            ];\n            splitDataBytes = 0;\n        }\n    }\n\n    // Finish the final split if necessary\n    if (\n        splitChunks.length > 0 &&\n        (splitChunks.length > 1 || splitChunks[0].type !== \"skip\")\n    ) {\n        let splitImage = createImage(header, splitChunks);\n        common.logDebug(\n            `Finishing final ${splitImage.byteLength}-byte split with ${splitChunks.length} chunks`\n        );\n        yield {\n            data: splitImage,\n            bytes: splitDataBytes,\n        };\n    }\n}\n","/*\n Copyright (c) 2021 Gildas Lormeau. All rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are met:\n\n 1. Redistributions of source code must retain the above copyright notice,\n this list of conditions and the following disclaimer.\n\n 2. Redistributions in binary form must reproduce the above copyright \n notice, this list of conditions and the following disclaimer in \n the documentation and/or other materials provided with the distribution.\n\n 3. The names of the authors may not be used to endorse or promote products\n derived from this software without specific prior written permission.\n\n THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED WARRANTIES,\n INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL JCRAFT,\n INC. OR ANY CONTRIBUTORS TO THIS SOFTWARE BE LIABLE FOR ANY DIRECT, INDIRECT,\n INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA,\n OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,\n EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n\"use strict\";\n\nconst table = {\n\t\"application\": {\n\t\t\"andrew-inset\": \"ez\",\n\t\t\"annodex\": \"anx\",\n\t\t\"atom+xml\": \"atom\",\n\t\t\"atomcat+xml\": \"atomcat\",\n\t\t\"atomserv+xml\": \"atomsrv\",\n\t\t\"bbolin\": \"lin\",\n\t\t\"cap\": [\"cap\", \"pcap\"],\n\t\t\"cu-seeme\": \"cu\",\n\t\t\"davmount+xml\": \"davmount\",\n\t\t\"dsptype\": \"tsp\",\n\t\t\"ecmascript\": [\"es\", \"ecma\"],\n\t\t\"futuresplash\": \"spl\",\n\t\t\"hta\": \"hta\",\n\t\t\"java-archive\": \"jar\",\n\t\t\"java-serialized-object\": \"ser\",\n\t\t\"java-vm\": \"class\",\n\t\t\"javascript\": \"js\",\n\t\t\"m3g\": \"m3g\",\n\t\t\"mac-binhex40\": \"hqx\",\n\t\t\"mathematica\": [\"nb\", \"ma\", \"mb\"],\n\t\t\"msaccess\": \"mdb\",\n\t\t\"msword\": [\"doc\", \"dot\"],\n\t\t\"mxf\": \"mxf\",\n\t\t\"oda\": \"oda\",\n\t\t\"ogg\": \"ogx\",\n\t\t\"pdf\": \"pdf\",\n\t\t\"pgp-keys\": \"key\",\n\t\t\"pgp-signature\": [\"asc\", \"sig\"],\n\t\t\"pics-rules\": \"prf\",\n\t\t\"postscript\": [\"ps\", \"ai\", \"eps\", \"epsi\", \"epsf\", \"eps2\", \"eps3\"],\n\t\t\"rar\": \"rar\",\n\t\t\"rdf+xml\": \"rdf\",\n\t\t\"rss+xml\": \"rss\",\n\t\t\"rtf\": \"rtf\",\n\t\t\"smil\": [\"smi\", \"smil\"],\n\t\t\"xhtml+xml\": [\"xhtml\", \"xht\"],\n\t\t\"xml\": [\"xml\", \"xsl\", \"xsd\"],\n\t\t\"xspf+xml\": \"xspf\",\n\t\t\"zip\": \"zip\",\n\t\t\"vnd.android.package-archive\": \"apk\",\n\t\t\"vnd.cinderella\": \"cdy\",\n\t\t\"vnd.google-earth.kml+xml\": \"kml\",\n\t\t\"vnd.google-earth.kmz\": \"kmz\",\n\t\t\"vnd.mozilla.xul+xml\": \"xul\",\n\t\t\"vnd.ms-excel\": [\"xls\", \"xlb\", \"xlt\", \"xlm\", \"xla\", \"xlc\", \"xlw\"],\n\t\t\"vnd.ms-pki.seccat\": \"cat\",\n\t\t\"vnd.ms-pki.stl\": \"stl\",\n\t\t\"vnd.ms-powerpoint\": [\"ppt\", \"pps\", \"pot\"],\n\t\t\"vnd.oasis.opendocument.chart\": \"odc\",\n\t\t\"vnd.oasis.opendocument.database\": \"odb\",\n\t\t\"vnd.oasis.opendocument.formula\": \"odf\",\n\t\t\"vnd.oasis.opendocument.graphics\": \"odg\",\n\t\t\"vnd.oasis.opendocument.graphics-template\": \"otg\",\n\t\t\"vnd.oasis.opendocument.image\": \"odi\",\n\t\t\"vnd.oasis.opendocument.presentation\": \"odp\",\n\t\t\"vnd.oasis.opendocument.presentation-template\": \"otp\",\n\t\t\"vnd.oasis.opendocument.spreadsheet\": \"ods\",\n\t\t\"vnd.oasis.opendocument.spreadsheet-template\": \"ots\",\n\t\t\"vnd.oasis.opendocument.text\": \"odt\",\n\t\t\"vnd.oasis.opendocument.text-master\": \"odm\",\n\t\t\"vnd.oasis.opendocument.text-template\": \"ott\",\n\t\t\"vnd.oasis.opendocument.text-web\": \"oth\",\n\t\t\"vnd.openxmlformats-officedocument.spreadsheetml.sheet\": \"xlsx\",\n\t\t\"vnd.openxmlformats-officedocument.spreadsheetml.template\": \"xltx\",\n\t\t\"vnd.openxmlformats-officedocument.presentationml.presentation\": \"pptx\",\n\t\t\"vnd.openxmlformats-officedocument.presentationml.slideshow\": \"ppsx\",\n\t\t\"vnd.openxmlformats-officedocument.presentationml.template\": \"potx\",\n\t\t\"vnd.openxmlformats-officedocument.wordprocessingml.document\": \"docx\",\n\t\t\"vnd.openxmlformats-officedocument.wordprocessingml.template\": \"dotx\",\n\t\t\"vnd.smaf\": \"mmf\",\n\t\t\"vnd.stardivision.calc\": \"sdc\",\n\t\t\"vnd.stardivision.chart\": \"sds\",\n\t\t\"vnd.stardivision.draw\": \"sda\",\n\t\t\"vnd.stardivision.impress\": \"sdd\",\n\t\t\"vnd.stardivision.math\": [\"sdf\", \"smf\"],\n\t\t\"vnd.stardivision.writer\": [\"sdw\", \"vor\"],\n\t\t\"vnd.stardivision.writer-global\": \"sgl\",\n\t\t\"vnd.sun.xml.calc\": \"sxc\",\n\t\t\"vnd.sun.xml.calc.template\": \"stc\",\n\t\t\"vnd.sun.xml.draw\": \"sxd\",\n\t\t\"vnd.sun.xml.draw.template\": \"std\",\n\t\t\"vnd.sun.xml.impress\": \"sxi\",\n\t\t\"vnd.sun.xml.impress.template\": \"sti\",\n\t\t\"vnd.sun.xml.math\": \"sxm\",\n\t\t\"vnd.sun.xml.writer\": \"sxw\",\n\t\t\"vnd.sun.xml.writer.global\": \"sxg\",\n\t\t\"vnd.sun.xml.writer.template\": \"stw\",\n\t\t\"vnd.symbian.install\": [\"sis\", \"sisx\"],\n\t\t\"vnd.visio\": [\"vsd\", \"vst\", \"vss\", \"vsw\"],\n\t\t\"vnd.wap.wbxml\": \"wbxml\",\n\t\t\"vnd.wap.wmlc\": \"wmlc\",\n\t\t\"vnd.wap.wmlscriptc\": \"wmlsc\",\n\t\t\"vnd.wordperfect\": \"wpd\",\n\t\t\"vnd.wordperfect5.1\": \"wp5\",\n\t\t\"x-123\": \"wk\",\n\t\t\"x-7z-compressed\": \"7z\",\n\t\t\"x-abiword\": \"abw\",\n\t\t\"x-apple-diskimage\": \"dmg\",\n\t\t\"x-bcpio\": \"bcpio\",\n\t\t\"x-bittorrent\": \"torrent\",\n\t\t\"x-cbr\": [\"cbr\", \"cba\", \"cbt\", \"cb7\"],\n\t\t\"x-cbz\": \"cbz\",\n\t\t\"x-cdf\": [\"cdf\", \"cda\"],\n\t\t\"x-cdlink\": \"vcd\",\n\t\t\"x-chess-pgn\": \"pgn\",\n\t\t\"x-cpio\": \"cpio\",\n\t\t\"x-csh\": \"csh\",\n\t\t\"x-debian-package\": [\"deb\", \"udeb\"],\n\t\t\"x-director\": [\"dcr\", \"dir\", \"dxr\", \"cst\", \"cct\", \"cxt\", \"w3d\", \"fgd\", \"swa\"],\n\t\t\"x-dms\": \"dms\",\n\t\t\"x-doom\": \"wad\",\n\t\t\"x-dvi\": \"dvi\",\n\t\t\"x-httpd-eruby\": \"rhtml\",\n\t\t\"x-font\": \"pcf.Z\",\n\t\t\"x-freemind\": \"mm\",\n\t\t\"x-gnumeric\": \"gnumeric\",\n\t\t\"x-go-sgf\": \"sgf\",\n\t\t\"x-graphing-calculator\": \"gcf\",\n\t\t\"x-gtar\": [\"gtar\", \"taz\"],\n\t\t\"x-hdf\": \"hdf\",\n\t\t\"x-httpd-php\": [\"phtml\", \"pht\", \"php\"],\n\t\t\"x-httpd-php-source\": \"phps\",\n\t\t\"x-httpd-php3\": \"php3\",\n\t\t\"x-httpd-php3-preprocessed\": \"php3p\",\n\t\t\"x-httpd-php4\": \"php4\",\n\t\t\"x-httpd-php5\": \"php5\",\n\t\t\"x-ica\": \"ica\",\n\t\t\"x-info\": \"info\",\n\t\t\"x-internet-signup\": [\"ins\", \"isp\"],\n\t\t\"x-iphone\": \"iii\",\n\t\t\"x-iso9660-image\": \"iso\",\n\t\t\"x-java-jnlp-file\": \"jnlp\",\n\t\t\"x-jmol\": \"jmz\",\n\t\t\"x-killustrator\": \"kil\",\n\t\t\"x-koan\": [\"skp\", \"skd\", \"skt\", \"skm\"],\n\t\t\"x-kpresenter\": [\"kpr\", \"kpt\"],\n\t\t\"x-kword\": [\"kwd\", \"kwt\"],\n\t\t\"x-latex\": \"latex\",\n\t\t\"x-lha\": \"lha\",\n\t\t\"x-lyx\": \"lyx\",\n\t\t\"x-lzh\": \"lzh\",\n\t\t\"x-lzx\": \"lzx\",\n\t\t\"x-maker\": [\"frm\", \"maker\", \"frame\", \"fm\", \"fb\", \"book\", \"fbdoc\"],\n\t\t\"x-ms-wmd\": \"wmd\",\n\t\t\"x-ms-wmz\": \"wmz\",\n\t\t\"x-msdos-program\": [\"com\", \"exe\", \"bat\", \"dll\"],\n\t\t\"x-msi\": \"msi\",\n\t\t\"x-netcdf\": [\"nc\", \"cdf\"],\n\t\t\"x-ns-proxy-autoconfig\": [\"pac\", \"dat\"],\n\t\t\"x-nwc\": \"nwc\",\n\t\t\"x-object\": \"o\",\n\t\t\"x-oz-application\": \"oza\",\n\t\t\"x-pkcs7-certreqresp\": \"p7r\",\n\t\t\"x-python-code\": [\"pyc\", \"pyo\"],\n\t\t\"x-qgis\": [\"qgs\", \"shp\", \"shx\"],\n\t\t\"x-quicktimeplayer\": \"qtl\",\n\t\t\"x-redhat-package-manager\": \"rpm\",\n\t\t\"x-ruby\": \"rb\",\n\t\t\"x-sh\": \"sh\",\n\t\t\"x-shar\": \"shar\",\n\t\t\"x-shockwave-flash\": [\"swf\", \"swfl\"],\n\t\t\"x-silverlight\": \"scr\",\n\t\t\"x-stuffit\": \"sit\",\n\t\t\"x-sv4cpio\": \"sv4cpio\",\n\t\t\"x-sv4crc\": \"sv4crc\",\n\t\t\"x-tar\": \"tar\",\n\t\t\"x-tcl\": \"tcl\",\n\t\t\"x-tex-gf\": \"gf\",\n\t\t\"x-tex-pk\": \"pk\",\n\t\t\"x-texinfo\": [\"texinfo\", \"texi\"],\n\t\t\"x-trash\": [\"~\", \"%\", \"bak\", \"old\", \"sik\"],\n\t\t\"x-troff\": [\"t\", \"tr\", \"roff\"],\n\t\t\"x-troff-man\": \"man\",\n\t\t\"x-troff-me\": \"me\",\n\t\t\"x-troff-ms\": \"ms\",\n\t\t\"x-ustar\": \"ustar\",\n\t\t\"x-wais-source\": \"src\",\n\t\t\"x-wingz\": \"wz\",\n\t\t\"x-x509-ca-cert\": [\"crt\", \"der\", \"cer\"],\n\t\t\"x-xcf\": \"xcf\",\n\t\t\"x-xfig\": \"fig\",\n\t\t\"x-xpinstall\": \"xpi\",\n\t\t\"applixware\": \"aw\",\n\t\t\"atomsvc+xml\": \"atomsvc\",\n\t\t\"ccxml+xml\": \"ccxml\",\n\t\t\"cdmi-capability\": \"cdmia\",\n\t\t\"cdmi-container\": \"cdmic\",\n\t\t\"cdmi-domain\": \"cdmid\",\n\t\t\"cdmi-object\": \"cdmio\",\n\t\t\"cdmi-queue\": \"cdmiq\",\n\t\t\"docbook+xml\": \"dbk\",\n\t\t\"dssc+der\": \"dssc\",\n\t\t\"dssc+xml\": \"xdssc\",\n\t\t\"emma+xml\": \"emma\",\n\t\t\"epub+zip\": \"epub\",\n\t\t\"exi\": \"exi\",\n\t\t\"font-tdpfr\": \"pfr\",\n\t\t\"gml+xml\": \"gml\",\n\t\t\"gpx+xml\": \"gpx\",\n\t\t\"gxf\": \"gxf\",\n\t\t\"hyperstudio\": \"stk\",\n\t\t\"inkml+xml\": [\"ink\", \"inkml\"],\n\t\t\"ipfix\": \"ipfix\",\n\t\t\"json\": \"json\",\n\t\t\"jsonml+json\": \"jsonml\",\n\t\t\"lost+xml\": \"lostxml\",\n\t\t\"mads+xml\": \"mads\",\n\t\t\"marc\": \"mrc\",\n\t\t\"marcxml+xml\": \"mrcx\",\n\t\t\"mathml+xml\": \"mathml\",\n\t\t\"mbox\": \"mbox\",\n\t\t\"mediaservercontrol+xml\": \"mscml\",\n\t\t\"metalink+xml\": \"metalink\",\n\t\t\"metalink4+xml\": \"meta4\",\n\t\t\"mets+xml\": \"mets\",\n\t\t\"mods+xml\": \"mods\",\n\t\t\"mp21\": [\"m21\", \"mp21\"],\n\t\t\"mp4\": \"mp4s\",\n\t\t\"oebps-package+xml\": \"opf\",\n\t\t\"omdoc+xml\": \"omdoc\",\n\t\t\"onenote\": [\"onetoc\", \"onetoc2\", \"onetmp\", \"onepkg\"],\n\t\t\"oxps\": \"oxps\",\n\t\t\"patch-ops-error+xml\": \"xer\",\n\t\t\"pgp-encrypted\": \"pgp\",\n\t\t\"pkcs10\": \"p10\",\n\t\t\"pkcs7-mime\": [\"p7m\", \"p7c\"],\n\t\t\"pkcs7-signature\": \"p7s\",\n\t\t\"pkcs8\": \"p8\",\n\t\t\"pkix-attr-cert\": \"ac\",\n\t\t\"pkix-crl\": \"crl\",\n\t\t\"pkix-pkipath\": \"pkipath\",\n\t\t\"pkixcmp\": \"pki\",\n\t\t\"pls+xml\": \"pls\",\n\t\t\"prs.cww\": \"cww\",\n\t\t\"pskc+xml\": \"pskcxml\",\n\t\t\"reginfo+xml\": \"rif\",\n\t\t\"relax-ng-compact-syntax\": \"rnc\",\n\t\t\"resource-lists+xml\": \"rl\",\n\t\t\"resource-lists-diff+xml\": \"rld\",\n\t\t\"rls-services+xml\": \"rs\",\n\t\t\"rpki-ghostbusters\": \"gbr\",\n\t\t\"rpki-manifest\": \"mft\",\n\t\t\"rpki-roa\": \"roa\",\n\t\t\"rsd+xml\": \"rsd\",\n\t\t\"sbml+xml\": \"sbml\",\n\t\t\"scvp-cv-request\": \"scq\",\n\t\t\"scvp-cv-response\": \"scs\",\n\t\t\"scvp-vp-request\": \"spq\",\n\t\t\"scvp-vp-response\": \"spp\",\n\t\t\"sdp\": \"sdp\",\n\t\t\"set-payment-initiation\": \"setpay\",\n\t\t\"set-registration-initiation\": \"setreg\",\n\t\t\"shf+xml\": \"shf\",\n\t\t\"sparql-query\": \"rq\",\n\t\t\"sparql-results+xml\": \"srx\",\n\t\t\"srgs\": \"gram\",\n\t\t\"srgs+xml\": \"grxml\",\n\t\t\"sru+xml\": \"sru\",\n\t\t\"ssdl+xml\": \"ssdl\",\n\t\t\"ssml+xml\": \"ssml\",\n\t\t\"tei+xml\": [\"tei\", \"teicorpus\"],\n\t\t\"thraud+xml\": \"tfi\",\n\t\t\"timestamped-data\": \"tsd\",\n\t\t\"vnd.3gpp.pic-bw-large\": \"plb\",\n\t\t\"vnd.3gpp.pic-bw-small\": \"psb\",\n\t\t\"vnd.3gpp.pic-bw-var\": \"pvb\",\n\t\t\"vnd.3gpp2.tcap\": \"tcap\",\n\t\t\"vnd.3m.post-it-notes\": \"pwn\",\n\t\t\"vnd.accpac.simply.aso\": \"aso\",\n\t\t\"vnd.accpac.simply.imp\": \"imp\",\n\t\t\"vnd.acucobol\": \"acu\",\n\t\t\"vnd.acucorp\": [\"atc\", \"acutc\"],\n\t\t\"vnd.adobe.air-application-installer-package+zip\": \"air\",\n\t\t\"vnd.adobe.formscentral.fcdt\": \"fcdt\",\n\t\t\"vnd.adobe.fxp\": [\"fxp\", \"fxpl\"],\n\t\t\"vnd.adobe.xdp+xml\": \"xdp\",\n\t\t\"vnd.adobe.xfdf\": \"xfdf\",\n\t\t\"vnd.ahead.space\": \"ahead\",\n\t\t\"vnd.airzip.filesecure.azf\": \"azf\",\n\t\t\"vnd.airzip.filesecure.azs\": \"azs\",\n\t\t\"vnd.amazon.ebook\": \"azw\",\n\t\t\"vnd.americandynamics.acc\": \"acc\",\n\t\t\"vnd.amiga.ami\": \"ami\",\n\t\t\"vnd.anser-web-certificate-issue-initiation\": \"cii\",\n\t\t\"vnd.anser-web-funds-transfer-initiation\": \"fti\",\n\t\t\"vnd.antix.game-component\": \"atx\",\n\t\t\"vnd.apple.installer+xml\": \"mpkg\",\n\t\t\"vnd.apple.mpegurl\": \"m3u8\",\n\t\t\"vnd.aristanetworks.swi\": \"swi\",\n\t\t\"vnd.astraea-software.iota\": \"iota\",\n\t\t\"vnd.audiograph\": \"aep\",\n\t\t\"vnd.blueice.multipass\": \"mpm\",\n\t\t\"vnd.bmi\": \"bmi\",\n\t\t\"vnd.businessobjects\": \"rep\",\n\t\t\"vnd.chemdraw+xml\": \"cdxml\",\n\t\t\"vnd.chipnuts.karaoke-mmd\": \"mmd\",\n\t\t\"vnd.claymore\": \"cla\",\n\t\t\"vnd.cloanto.rp9\": \"rp9\",\n\t\t\"vnd.clonk.c4group\": [\"c4g\", \"c4d\", \"c4f\", \"c4p\", \"c4u\"],\n\t\t\"vnd.cluetrust.cartomobile-config\": \"c11amc\",\n\t\t\"vnd.cluetrust.cartomobile-config-pkg\": \"c11amz\",\n\t\t\"vnd.commonspace\": \"csp\",\n\t\t\"vnd.contact.cmsg\": \"cdbcmsg\",\n\t\t\"vnd.cosmocaller\": \"cmc\",\n\t\t\"vnd.crick.clicker\": \"clkx\",\n\t\t\"vnd.crick.clicker.keyboard\": \"clkk\",\n\t\t\"vnd.crick.clicker.palette\": \"clkp\",\n\t\t\"vnd.crick.clicker.template\": \"clkt\",\n\t\t\"vnd.crick.clicker.wordbank\": \"clkw\",\n\t\t\"vnd.criticaltools.wbs+xml\": \"wbs\",\n\t\t\"vnd.ctc-posml\": \"pml\",\n\t\t\"vnd.cups-ppd\": \"ppd\",\n\t\t\"vnd.curl.car\": \"car\",\n\t\t\"vnd.curl.pcurl\": \"pcurl\",\n\t\t\"vnd.dart\": \"dart\",\n\t\t\"vnd.data-vision.rdz\": \"rdz\",\n\t\t\"vnd.dece.data\": [\"uvf\", \"uvvf\", \"uvd\", \"uvvd\"],\n\t\t\"vnd.dece.ttml+xml\": [\"uvt\", \"uvvt\"],\n\t\t\"vnd.dece.unspecified\": [\"uvx\", \"uvvx\"],\n\t\t\"vnd.dece.zip\": [\"uvz\", \"uvvz\"],\n\t\t\"vnd.denovo.fcselayout-link\": \"fe_launch\",\n\t\t\"vnd.dna\": \"dna\",\n\t\t\"vnd.dolby.mlp\": \"mlp\",\n\t\t\"vnd.dpgraph\": \"dpg\",\n\t\t\"vnd.dreamfactory\": \"dfac\",\n\t\t\"vnd.ds-keypoint\": \"kpxx\",\n\t\t\"vnd.dvb.ait\": \"ait\",\n\t\t\"vnd.dvb.service\": \"svc\",\n\t\t\"vnd.dynageo\": \"geo\",\n\t\t\"vnd.ecowin.chart\": \"mag\",\n\t\t\"vnd.enliven\": \"nml\",\n\t\t\"vnd.epson.esf\": \"esf\",\n\t\t\"vnd.epson.msf\": \"msf\",\n\t\t\"vnd.epson.quickanime\": \"qam\",\n\t\t\"vnd.epson.salt\": \"slt\",\n\t\t\"vnd.epson.ssf\": \"ssf\",\n\t\t\"vnd.eszigno3+xml\": [\"es3\", \"et3\"],\n\t\t\"vnd.ezpix-album\": \"ez2\",\n\t\t\"vnd.ezpix-package\": \"ez3\",\n\t\t\"vnd.fdf\": \"fdf\",\n\t\t\"vnd.fdsn.mseed\": \"mseed\",\n\t\t\"vnd.fdsn.seed\": [\"seed\", \"dataless\"],\n\t\t\"vnd.flographit\": \"gph\",\n\t\t\"vnd.fluxtime.clip\": \"ftc\",\n\t\t\"vnd.framemaker\": [\"fm\", \"frame\", \"maker\", \"book\"],\n\t\t\"vnd.frogans.fnc\": \"fnc\",\n\t\t\"vnd.frogans.ltf\": \"ltf\",\n\t\t\"vnd.fsc.weblaunch\": \"fsc\",\n\t\t\"vnd.fujitsu.oasys\": \"oas\",\n\t\t\"vnd.fujitsu.oasys2\": \"oa2\",\n\t\t\"vnd.fujitsu.oasys3\": \"oa3\",\n\t\t\"vnd.fujitsu.oasysgp\": \"fg5\",\n\t\t\"vnd.fujitsu.oasysprs\": \"bh2\",\n\t\t\"vnd.fujixerox.ddd\": \"ddd\",\n\t\t\"vnd.fujixerox.docuworks\": \"xdw\",\n\t\t\"vnd.fujixerox.docuworks.binder\": \"xbd\",\n\t\t\"vnd.fuzzysheet\": \"fzs\",\n\t\t\"vnd.genomatix.tuxedo\": \"txd\",\n\t\t\"vnd.geogebra.file\": \"ggb\",\n\t\t\"vnd.geogebra.tool\": \"ggt\",\n\t\t\"vnd.geometry-explorer\": [\"gex\", \"gre\"],\n\t\t\"vnd.geonext\": \"gxt\",\n\t\t\"vnd.geoplan\": \"g2w\",\n\t\t\"vnd.geospace\": \"g3w\",\n\t\t\"vnd.gmx\": \"gmx\",\n\t\t\"vnd.grafeq\": [\"gqf\", \"gqs\"],\n\t\t\"vnd.groove-account\": \"gac\",\n\t\t\"vnd.groove-help\": \"ghf\",\n\t\t\"vnd.groove-identity-message\": \"gim\",\n\t\t\"vnd.groove-injector\": \"grv\",\n\t\t\"vnd.groove-tool-message\": \"gtm\",\n\t\t\"vnd.groove-tool-template\": \"tpl\",\n\t\t\"vnd.groove-vcard\": \"vcg\",\n\t\t\"vnd.hal+xml\": \"hal\",\n\t\t\"vnd.handheld-entertainment+xml\": \"zmm\",\n\t\t\"vnd.hbci\": \"hbci\",\n\t\t\"vnd.hhe.lesson-player\": \"les\",\n\t\t\"vnd.hp-hpgl\": \"hpgl\",\n\t\t\"vnd.hp-hpid\": \"hpid\",\n\t\t\"vnd.hp-hps\": \"hps\",\n\t\t\"vnd.hp-jlyt\": \"jlt\",\n\t\t\"vnd.hp-pcl\": \"pcl\",\n\t\t\"vnd.hp-pclxl\": \"pclxl\",\n\t\t\"vnd.hydrostatix.sof-data\": \"sfd-hdstx\",\n\t\t\"vnd.ibm.minipay\": \"mpy\",\n\t\t\"vnd.ibm.modcap\": [\"afp\", \"listafp\", \"list3820\"],\n\t\t\"vnd.ibm.rights-management\": \"irm\",\n\t\t\"vnd.ibm.secure-container\": \"sc\",\n\t\t\"vnd.iccprofile\": [\"icc\", \"icm\"],\n\t\t\"vnd.igloader\": \"igl\",\n\t\t\"vnd.immervision-ivp\": \"ivp\",\n\t\t\"vnd.immervision-ivu\": \"ivu\",\n\t\t\"vnd.insors.igm\": \"igm\",\n\t\t\"vnd.intercon.formnet\": [\"xpw\", \"xpx\"],\n\t\t\"vnd.intergeo\": \"i2g\",\n\t\t\"vnd.intu.qbo\": \"qbo\",\n\t\t\"vnd.intu.qfx\": \"qfx\",\n\t\t\"vnd.ipunplugged.rcprofile\": \"rcprofile\",\n\t\t\"vnd.irepository.package+xml\": \"irp\",\n\t\t\"vnd.is-xpr\": \"xpr\",\n\t\t\"vnd.isac.fcs\": \"fcs\",\n\t\t\"vnd.jam\": \"jam\",\n\t\t\"vnd.jcp.javame.midlet-rms\": \"rms\",\n\t\t\"vnd.jisp\": \"jisp\",\n\t\t\"vnd.joost.joda-archive\": \"joda\",\n\t\t\"vnd.kahootz\": [\"ktz\", \"ktr\"],\n\t\t\"vnd.kde.karbon\": \"karbon\",\n\t\t\"vnd.kde.kchart\": \"chrt\",\n\t\t\"vnd.kde.kformula\": \"kfo\",\n\t\t\"vnd.kde.kivio\": \"flw\",\n\t\t\"vnd.kde.kontour\": \"kon\",\n\t\t\"vnd.kde.kpresenter\": [\"kpr\", \"kpt\"],\n\t\t\"vnd.kde.kspread\": \"ksp\",\n\t\t\"vnd.kde.kword\": [\"kwd\", \"kwt\"],\n\t\t\"vnd.kenameaapp\": \"htke\",\n\t\t\"vnd.kidspiration\": \"kia\",\n\t\t\"vnd.kinar\": [\"kne\", \"knp\"],\n\t\t\"vnd.koan\": [\"skp\", \"skd\", \"skt\", \"skm\"],\n\t\t\"vnd.kodak-descriptor\": \"sse\",\n\t\t\"vnd.las.las+xml\": \"lasxml\",\n\t\t\"vnd.llamagraphics.life-balance.desktop\": \"lbd\",\n\t\t\"vnd.llamagraphics.life-balance.exchange+xml\": \"lbe\",\n\t\t\"vnd.lotus-1-2-3\": \"123\",\n\t\t\"vnd.lotus-approach\": \"apr\",\n\t\t\"vnd.lotus-freelance\": \"pre\",\n\t\t\"vnd.lotus-notes\": \"nsf\",\n\t\t\"vnd.lotus-organizer\": \"org\",\n\t\t\"vnd.lotus-screencam\": \"scm\",\n\t\t\"vnd.lotus-wordpro\": \"lwp\",\n\t\t\"vnd.macports.portpkg\": \"portpkg\",\n\t\t\"vnd.mcd\": \"mcd\",\n\t\t\"vnd.medcalcdata\": \"mc1\",\n\t\t\"vnd.mediastation.cdkey\": \"cdkey\",\n\t\t\"vnd.mfer\": \"mwf\",\n\t\t\"vnd.mfmp\": \"mfm\",\n\t\t\"vnd.micrografx.flo\": \"flo\",\n\t\t\"vnd.micrografx.igx\": \"igx\",\n\t\t\"vnd.mif\": \"mif\",\n\t\t\"vnd.mobius.daf\": \"daf\",\n\t\t\"vnd.mobius.dis\": \"dis\",\n\t\t\"vnd.mobius.mbk\": \"mbk\",\n\t\t\"vnd.mobius.mqy\": \"mqy\",\n\t\t\"vnd.mobius.msl\": \"msl\",\n\t\t\"vnd.mobius.plc\": \"plc\",\n\t\t\"vnd.mobius.txf\": \"txf\",\n\t\t\"vnd.mophun.application\": \"mpn\",\n\t\t\"vnd.mophun.certificate\": \"mpc\",\n\t\t\"vnd.ms-artgalry\": \"cil\",\n\t\t\"vnd.ms-cab-compressed\": \"cab\",\n\t\t\"vnd.ms-excel.addin.macroenabled.12\": \"xlam\",\n\t\t\"vnd.ms-excel.sheet.binary.macroenabled.12\": \"xlsb\",\n\t\t\"vnd.ms-excel.sheet.macroenabled.12\": \"xlsm\",\n\t\t\"vnd.ms-excel.template.macroenabled.12\": \"xltm\",\n\t\t\"vnd.ms-fontobject\": \"eot\",\n\t\t\"vnd.ms-htmlhelp\": \"chm\",\n\t\t\"vnd.ms-ims\": \"ims\",\n\t\t\"vnd.ms-lrm\": \"lrm\",\n\t\t\"vnd.ms-officetheme\": \"thmx\",\n\t\t\"vnd.ms-powerpoint.addin.macroenabled.12\": \"ppam\",\n\t\t\"vnd.ms-powerpoint.presentation.macroenabled.12\": \"pptm\",\n\t\t\"vnd.ms-powerpoint.slide.macroenabled.12\": \"sldm\",\n\t\t\"vnd.ms-powerpoint.slideshow.macroenabled.12\": \"ppsm\",\n\t\t\"vnd.ms-powerpoint.template.macroenabled.12\": \"potm\",\n\t\t\"vnd.ms-project\": [\"mpp\", \"mpt\"],\n\t\t\"vnd.ms-word.document.macroenabled.12\": \"docm\",\n\t\t\"vnd.ms-word.template.macroenabled.12\": \"dotm\",\n\t\t\"vnd.ms-works\": [\"wps\", \"wks\", \"wcm\", \"wdb\"],\n\t\t\"vnd.ms-wpl\": \"wpl\",\n\t\t\"vnd.ms-xpsdocument\": \"xps\",\n\t\t\"vnd.mseq\": \"mseq\",\n\t\t\"vnd.musician\": \"mus\",\n\t\t\"vnd.muvee.style\": \"msty\",\n\t\t\"vnd.mynfc\": \"taglet\",\n\t\t\"vnd.neurolanguage.nlu\": \"nlu\",\n\t\t\"vnd.nitf\": [\"ntf\", \"nitf\"],\n\t\t\"vnd.noblenet-directory\": \"nnd\",\n\t\t\"vnd.noblenet-sealer\": \"nns\",\n\t\t\"vnd.noblenet-web\": \"nnw\",\n\t\t\"vnd.nokia.n-gage.data\": \"ngdat\",\n\t\t\"vnd.nokia.n-gage.symbian.install\": \"n-gage\",\n\t\t\"vnd.nokia.radio-preset\": \"rpst\",\n\t\t\"vnd.nokia.radio-presets\": \"rpss\",\n\t\t\"vnd.novadigm.edm\": \"edm\",\n\t\t\"vnd.novadigm.edx\": \"edx\",\n\t\t\"vnd.novadigm.ext\": \"ext\",\n\t\t\"vnd.oasis.opendocument.chart-template\": \"otc\",\n\t\t\"vnd.oasis.opendocument.formula-template\": \"odft\",\n\t\t\"vnd.oasis.opendocument.image-template\": \"oti\",\n\t\t\"vnd.olpc-sugar\": \"xo\",\n\t\t\"vnd.oma.dd2+xml\": \"dd2\",\n\t\t\"vnd.openofficeorg.extension\": \"oxt\",\n\t\t\"vnd.openxmlformats-officedocument.presentationml.slide\": \"sldx\",\n\t\t\"vnd.osgeo.mapguide.package\": \"mgp\",\n\t\t\"vnd.osgi.dp\": \"dp\",\n\t\t\"vnd.osgi.subsystem\": \"esa\",\n\t\t\"vnd.palm\": [\"pdb\", \"pqa\", \"oprc\"],\n\t\t\"vnd.pawaafile\": \"paw\",\n\t\t\"vnd.pg.format\": \"str\",\n\t\t\"vnd.pg.osasli\": \"ei6\",\n\t\t\"vnd.picsel\": \"efif\",\n\t\t\"vnd.pmi.widget\": \"wg\",\n\t\t\"vnd.pocketlearn\": \"plf\",\n\t\t\"vnd.powerbuilder6\": \"pbd\",\n\t\t\"vnd.previewsystems.box\": \"box\",\n\t\t\"vnd.proteus.magazine\": \"mgz\",\n\t\t\"vnd.publishare-delta-tree\": \"qps\",\n\t\t\"vnd.pvi.ptid1\": \"ptid\",\n\t\t\"vnd.quark.quarkxpress\": [\"qxd\", \"qxt\", \"qwd\", \"qwt\", \"qxl\", \"qxb\"],\n\t\t\"vnd.realvnc.bed\": \"bed\",\n\t\t\"vnd.recordare.musicxml\": \"mxl\",\n\t\t\"vnd.recordare.musicxml+xml\": \"musicxml\",\n\t\t\"vnd.rig.cryptonote\": \"cryptonote\",\n\t\t\"vnd.rn-realmedia\": \"rm\",\n\t\t\"vnd.rn-realmedia-vbr\": \"rmvb\",\n\t\t\"vnd.route66.link66+xml\": \"link66\",\n\t\t\"vnd.sailingtracker.track\": \"st\",\n\t\t\"vnd.seemail\": \"see\",\n\t\t\"vnd.sema\": \"sema\",\n\t\t\"vnd.semd\": \"semd\",\n\t\t\"vnd.semf\": \"semf\",\n\t\t\"vnd.shana.informed.formdata\": \"ifm\",\n\t\t\"vnd.shana.informed.formtemplate\": \"itp\",\n\t\t\"vnd.shana.informed.interchange\": \"iif\",\n\t\t\"vnd.shana.informed.package\": \"ipk\",\n\t\t\"vnd.simtech-mindmapper\": [\"twd\", \"twds\"],\n\t\t\"vnd.smart.teacher\": \"teacher\",\n\t\t\"vnd.solent.sdkm+xml\": [\"sdkm\", \"sdkd\"],\n\t\t\"vnd.spotfire.dxp\": \"dxp\",\n\t\t\"vnd.spotfire.sfs\": \"sfs\",\n\t\t\"vnd.stepmania.package\": \"smzip\",\n\t\t\"vnd.stepmania.stepchart\": \"sm\",\n\t\t\"vnd.sus-calendar\": [\"sus\", \"susp\"],\n\t\t\"vnd.svd\": \"svd\",\n\t\t\"vnd.syncml+xml\": \"xsm\",\n\t\t\"vnd.syncml.dm+wbxml\": \"bdm\",\n\t\t\"vnd.syncml.dm+xml\": \"xdm\",\n\t\t\"vnd.tao.intent-module-archive\": \"tao\",\n\t\t\"vnd.tcpdump.pcap\": [\"pcap\", \"cap\", \"dmp\"],\n\t\t\"vnd.tmobile-livetv\": \"tmo\",\n\t\t\"vnd.trid.tpt\": \"tpt\",\n\t\t\"vnd.triscape.mxs\": \"mxs\",\n\t\t\"vnd.trueapp\": \"tra\",\n\t\t\"vnd.ufdl\": [\"ufd\", \"ufdl\"],\n\t\t\"vnd.uiq.theme\": \"utz\",\n\t\t\"vnd.umajin\": \"umj\",\n\t\t\"vnd.unity\": \"unityweb\",\n\t\t\"vnd.uoml+xml\": \"uoml\",\n\t\t\"vnd.vcx\": \"vcx\",\n\t\t\"vnd.visionary\": \"vis\",\n\t\t\"vnd.vsf\": \"vsf\",\n\t\t\"vnd.webturbo\": \"wtb\",\n\t\t\"vnd.wolfram.player\": \"nbp\",\n\t\t\"vnd.wqd\": \"wqd\",\n\t\t\"vnd.wt.stf\": \"stf\",\n\t\t\"vnd.xara\": \"xar\",\n\t\t\"vnd.xfdl\": \"xfdl\",\n\t\t\"vnd.yamaha.hv-dic\": \"hvd\",\n\t\t\"vnd.yamaha.hv-script\": \"hvs\",\n\t\t\"vnd.yamaha.hv-voice\": \"hvp\",\n\t\t\"vnd.yamaha.openscoreformat\": \"osf\",\n\t\t\"vnd.yamaha.openscoreformat.osfpvg+xml\": \"osfpvg\",\n\t\t\"vnd.yamaha.smaf-audio\": \"saf\",\n\t\t\"vnd.yamaha.smaf-phrase\": \"spf\",\n\t\t\"vnd.yellowriver-custom-menu\": \"cmp\",\n\t\t\"vnd.zul\": [\"zir\", \"zirz\"],\n\t\t\"vnd.zzazz.deck+xml\": \"zaz\",\n\t\t\"voicexml+xml\": \"vxml\",\n\t\t\"widget\": \"wgt\",\n\t\t\"winhlp\": \"hlp\",\n\t\t\"wsdl+xml\": \"wsdl\",\n\t\t\"wspolicy+xml\": \"wspolicy\",\n\t\t\"x-ace-compressed\": \"ace\",\n\t\t\"x-authorware-bin\": [\"aab\", \"x32\", \"u32\", \"vox\"],\n\t\t\"x-authorware-map\": \"aam\",\n\t\t\"x-authorware-seg\": \"aas\",\n\t\t\"x-blorb\": [\"blb\", \"blorb\"],\n\t\t\"x-bzip\": \"bz\",\n\t\t\"x-bzip2\": [\"bz2\", \"boz\"],\n\t\t\"x-cfs-compressed\": \"cfs\",\n\t\t\"x-chat\": \"chat\",\n\t\t\"x-conference\": \"nsc\",\n\t\t\"x-dgc-compressed\": \"dgc\",\n\t\t\"x-dtbncx+xml\": \"ncx\",\n\t\t\"x-dtbook+xml\": \"dtb\",\n\t\t\"x-dtbresource+xml\": \"res\",\n\t\t\"x-eva\": \"eva\",\n\t\t\"x-font-bdf\": \"bdf\",\n\t\t\"x-font-ghostscript\": \"gsf\",\n\t\t\"x-font-linux-psf\": \"psf\",\n\t\t\"x-font-otf\": \"otf\",\n\t\t\"x-font-pcf\": \"pcf\",\n\t\t\"x-font-snf\": \"snf\",\n\t\t\"x-font-ttf\": [\"ttf\", \"ttc\"],\n\t\t\"x-font-type1\": [\"pfa\", \"pfb\", \"pfm\", \"afm\"],\n\t\t\"x-font-woff\": \"woff\",\n\t\t\"x-freearc\": \"arc\",\n\t\t\"x-gca-compressed\": \"gca\",\n\t\t\"x-glulx\": \"ulx\",\n\t\t\"x-gramps-xml\": \"gramps\",\n\t\t\"x-install-instructions\": \"install\",\n\t\t\"x-lzh-compressed\": [\"lzh\", \"lha\"],\n\t\t\"x-mie\": \"mie\",\n\t\t\"x-mobipocket-ebook\": [\"prc\", \"mobi\"],\n\t\t\"x-ms-application\": \"application\",\n\t\t\"x-ms-shortcut\": \"lnk\",\n\t\t\"x-ms-xbap\": \"xbap\",\n\t\t\"x-msbinder\": \"obd\",\n\t\t\"x-mscardfile\": \"crd\",\n\t\t\"x-msclip\": \"clp\",\n\t\t\"x-msdownload\": [\"exe\", \"dll\", \"com\", \"bat\", \"msi\"],\n\t\t\"x-msmediaview\": [\"mvb\", \"m13\", \"m14\"],\n\t\t\"x-msmetafile\": [\"wmf\", \"wmz\", \"emf\", \"emz\"],\n\t\t\"x-msmoney\": \"mny\",\n\t\t\"x-mspublisher\": \"pub\",\n\t\t\"x-msschedule\": \"scd\",\n\t\t\"x-msterminal\": \"trm\",\n\t\t\"x-mswrite\": \"wri\",\n\t\t\"x-nzb\": \"nzb\",\n\t\t\"x-pkcs12\": [\"p12\", \"pfx\"],\n\t\t\"x-pkcs7-certificates\": [\"p7b\", \"spc\"],\n\t\t\"x-research-info-systems\": \"ris\",\n\t\t\"x-silverlight-app\": \"xap\",\n\t\t\"x-sql\": \"sql\",\n\t\t\"x-stuffitx\": \"sitx\",\n\t\t\"x-subrip\": \"srt\",\n\t\t\"x-t3vm-image\": \"t3\",\n\t\t\"x-tads\": \"gam\",\n\t\t\"x-tex\": \"tex\",\n\t\t\"x-tex-tfm\": \"tfm\",\n\t\t\"x-tgif\": \"obj\",\n\t\t\"x-xliff+xml\": \"xlf\",\n\t\t\"x-xz\": \"xz\",\n\t\t\"x-zmachine\": [\"z1\", \"z2\", \"z3\", \"z4\", \"z5\", \"z6\", \"z7\", \"z8\"],\n\t\t\"xaml+xml\": \"xaml\",\n\t\t\"xcap-diff+xml\": \"xdf\",\n\t\t\"xenc+xml\": \"xenc\",\n\t\t\"xml-dtd\": \"dtd\",\n\t\t\"xop+xml\": \"xop\",\n\t\t\"xproc+xml\": \"xpl\",\n\t\t\"xslt+xml\": \"xslt\",\n\t\t\"xv+xml\": [\"mxml\", \"xhvml\", \"xvml\", \"xvm\"],\n\t\t\"yang\": \"yang\",\n\t\t\"yin+xml\": \"yin\",\n\t\t\"envoy\": \"evy\",\n\t\t\"fractals\": \"fif\",\n\t\t\"internet-property-stream\": \"acx\",\n\t\t\"olescript\": \"axs\",\n\t\t\"vnd.ms-outlook\": \"msg\",\n\t\t\"vnd.ms-pkicertstore\": \"sst\",\n\t\t\"x-compress\": \"z\",\n\t\t\"x-compressed\": \"tgz\",\n\t\t\"x-gzip\": \"gz\",\n\t\t\"x-perfmon\": [\"pma\", \"pmc\", \"pml\", \"pmr\", \"pmw\"],\n\t\t\"x-pkcs7-mime\": [\"p7c\", \"p7m\"],\n\t\t\"ynd.ms-pkipko\": \"pko\"\n\t},\n\t\"audio\": {\n\t\t\"amr\": \"amr\",\n\t\t\"amr-wb\": \"awb\",\n\t\t\"annodex\": \"axa\",\n\t\t\"basic\": [\"au\", \"snd\"],\n\t\t\"flac\": \"flac\",\n\t\t\"midi\": [\"mid\", \"midi\", \"kar\", \"rmi\"],\n\t\t\"mpeg\": [\"mpga\", \"mpega\", \"mp2\", \"mp3\", \"m4a\", \"mp2a\", \"m2a\", \"m3a\"],\n\t\t\"mpegurl\": \"m3u\",\n\t\t\"ogg\": [\"oga\", \"ogg\", \"spx\"],\n\t\t\"prs.sid\": \"sid\",\n\t\t\"x-aiff\": [\"aif\", \"aiff\", \"aifc\"],\n\t\t\"x-gsm\": \"gsm\",\n\t\t\"x-ms-wma\": \"wma\",\n\t\t\"x-ms-wax\": \"wax\",\n\t\t\"x-pn-realaudio\": \"ram\",\n\t\t\"x-realaudio\": \"ra\",\n\t\t\"x-sd2\": \"sd2\",\n\t\t\"x-wav\": \"wav\",\n\t\t\"adpcm\": \"adp\",\n\t\t\"mp4\": \"mp4a\",\n\t\t\"s3m\": \"s3m\",\n\t\t\"silk\": \"sil\",\n\t\t\"vnd.dece.audio\": [\"uva\", \"uvva\"],\n\t\t\"vnd.digital-winds\": \"eol\",\n\t\t\"vnd.dra\": \"dra\",\n\t\t\"vnd.dts\": \"dts\",\n\t\t\"vnd.dts.hd\": \"dtshd\",\n\t\t\"vnd.lucent.voice\": \"lvp\",\n\t\t\"vnd.ms-playready.media.pya\": \"pya\",\n\t\t\"vnd.nuera.ecelp4800\": \"ecelp4800\",\n\t\t\"vnd.nuera.ecelp7470\": \"ecelp7470\",\n\t\t\"vnd.nuera.ecelp9600\": \"ecelp9600\",\n\t\t\"vnd.rip\": \"rip\",\n\t\t\"webm\": \"weba\",\n\t\t\"x-aac\": \"aac\",\n\t\t\"x-caf\": \"caf\",\n\t\t\"x-matroska\": \"mka\",\n\t\t\"x-pn-realaudio-plugin\": \"rmp\",\n\t\t\"xm\": \"xm\",\n\t\t\"mid\": [\"mid\", \"rmi\"]\n\t},\n\t\"chemical\": {\n\t\t\"x-alchemy\": \"alc\",\n\t\t\"x-cache\": [\"cac\", \"cache\"],\n\t\t\"x-cache-csf\": \"csf\",\n\t\t\"x-cactvs-binary\": [\"cbin\", \"cascii\", \"ctab\"],\n\t\t\"x-cdx\": \"cdx\",\n\t\t\"x-chem3d\": \"c3d\",\n\t\t\"x-cif\": \"cif\",\n\t\t\"x-cmdf\": \"cmdf\",\n\t\t\"x-cml\": \"cml\",\n\t\t\"x-compass\": \"cpa\",\n\t\t\"x-crossfire\": \"bsd\",\n\t\t\"x-csml\": [\"csml\", \"csm\"],\n\t\t\"x-ctx\": \"ctx\",\n\t\t\"x-cxf\": [\"cxf\", \"cef\"],\n\t\t\"x-embl-dl-nucleotide\": [\"emb\", \"embl\"],\n\t\t\"x-gamess-input\": [\"inp\", \"gam\", \"gamin\"],\n\t\t\"x-gaussian-checkpoint\": [\"fch\", \"fchk\"],\n\t\t\"x-gaussian-cube\": \"cub\",\n\t\t\"x-gaussian-input\": [\"gau\", \"gjc\", \"gjf\"],\n\t\t\"x-gaussian-log\": \"gal\",\n\t\t\"x-gcg8-sequence\": \"gcg\",\n\t\t\"x-genbank\": \"gen\",\n\t\t\"x-hin\": \"hin\",\n\t\t\"x-isostar\": [\"istr\", \"ist\"],\n\t\t\"x-jcamp-dx\": [\"jdx\", \"dx\"],\n\t\t\"x-kinemage\": \"kin\",\n\t\t\"x-macmolecule\": \"mcm\",\n\t\t\"x-macromodel-input\": [\"mmd\", \"mmod\"],\n\t\t\"x-mdl-molfile\": \"mol\",\n\t\t\"x-mdl-rdfile\": \"rd\",\n\t\t\"x-mdl-rxnfile\": \"rxn\",\n\t\t\"x-mdl-sdfile\": [\"sd\", \"sdf\"],\n\t\t\"x-mdl-tgf\": \"tgf\",\n\t\t\"x-mmcif\": \"mcif\",\n\t\t\"x-mol2\": \"mol2\",\n\t\t\"x-molconn-Z\": \"b\",\n\t\t\"x-mopac-graph\": \"gpt\",\n\t\t\"x-mopac-input\": [\"mop\", \"mopcrt\", \"mpc\", \"zmt\"],\n\t\t\"x-mopac-out\": \"moo\",\n\t\t\"x-ncbi-asn1\": \"asn\",\n\t\t\"x-ncbi-asn1-ascii\": [\"prt\", \"ent\"],\n\t\t\"x-ncbi-asn1-binary\": [\"val\", \"aso\"],\n\t\t\"x-pdb\": [\"pdb\", \"ent\"],\n\t\t\"x-rosdal\": \"ros\",\n\t\t\"x-swissprot\": \"sw\",\n\t\t\"x-vamas-iso14976\": \"vms\",\n\t\t\"x-vmd\": \"vmd\",\n\t\t\"x-xtel\": \"xtel\",\n\t\t\"x-xyz\": \"xyz\"\n\t},\n\t\"image\": {\n\t\t\"gif\": \"gif\",\n\t\t\"ief\": \"ief\",\n\t\t\"jpeg\": [\"jpeg\", \"jpg\", \"jpe\"],\n\t\t\"pcx\": \"pcx\",\n\t\t\"png\": \"png\",\n\t\t\"svg+xml\": [\"svg\", \"svgz\"],\n\t\t\"tiff\": [\"tiff\", \"tif\"],\n\t\t\"vnd.djvu\": [\"djvu\", \"djv\"],\n\t\t\"vnd.wap.wbmp\": \"wbmp\",\n\t\t\"x-canon-cr2\": \"cr2\",\n\t\t\"x-canon-crw\": \"crw\",\n\t\t\"x-cmu-raster\": \"ras\",\n\t\t\"x-coreldraw\": \"cdr\",\n\t\t\"x-coreldrawpattern\": \"pat\",\n\t\t\"x-coreldrawtemplate\": \"cdt\",\n\t\t\"x-corelphotopaint\": \"cpt\",\n\t\t\"x-epson-erf\": \"erf\",\n\t\t\"x-icon\": \"ico\",\n\t\t\"x-jg\": \"art\",\n\t\t\"x-jng\": \"jng\",\n\t\t\"x-nikon-nef\": \"nef\",\n\t\t\"x-olympus-orf\": \"orf\",\n\t\t\"x-photoshop\": \"psd\",\n\t\t\"x-portable-anymap\": \"pnm\",\n\t\t\"x-portable-bitmap\": \"pbm\",\n\t\t\"x-portable-graymap\": \"pgm\",\n\t\t\"x-portable-pixmap\": \"ppm\",\n\t\t\"x-rgb\": \"rgb\",\n\t\t\"x-xbitmap\": \"xbm\",\n\t\t\"x-xpixmap\": \"xpm\",\n\t\t\"x-xwindowdump\": \"xwd\",\n\t\t\"bmp\": \"bmp\",\n\t\t\"cgm\": \"cgm\",\n\t\t\"g3fax\": \"g3\",\n\t\t\"ktx\": \"ktx\",\n\t\t\"prs.btif\": \"btif\",\n\t\t\"sgi\": \"sgi\",\n\t\t\"vnd.dece.graphic\": [\"uvi\", \"uvvi\", \"uvg\", \"uvvg\"],\n\t\t\"vnd.dwg\": \"dwg\",\n\t\t\"vnd.dxf\": \"dxf\",\n\t\t\"vnd.fastbidsheet\": \"fbs\",\n\t\t\"vnd.fpx\": \"fpx\",\n\t\t\"vnd.fst\": \"fst\",\n\t\t\"vnd.fujixerox.edmics-mmr\": \"mmr\",\n\t\t\"vnd.fujixerox.edmics-rlc\": \"rlc\",\n\t\t\"vnd.ms-modi\": \"mdi\",\n\t\t\"vnd.ms-photo\": \"wdp\",\n\t\t\"vnd.net-fpx\": \"npx\",\n\t\t\"vnd.xiff\": \"xif\",\n\t\t\"webp\": \"webp\",\n\t\t\"x-3ds\": \"3ds\",\n\t\t\"x-cmx\": \"cmx\",\n\t\t\"x-freehand\": [\"fh\", \"fhc\", \"fh4\", \"fh5\", \"fh7\"],\n\t\t\"x-pict\": [\"pic\", \"pct\"],\n\t\t\"x-tga\": \"tga\",\n\t\t\"cis-cod\": \"cod\",\n\t\t\"pipeg\": \"jfif\"\n\t},\n\t\"message\": {\n\t\t\"rfc822\": [\"eml\", \"mime\", \"mht\", \"mhtml\", \"nws\"]\n\t},\n\t\"model\": {\n\t\t\"iges\": [\"igs\", \"iges\"],\n\t\t\"mesh\": [\"msh\", \"mesh\", \"silo\"],\n\t\t\"vrml\": [\"wrl\", \"vrml\"],\n\t\t\"x3d+vrml\": [\"x3dv\", \"x3dvz\"],\n\t\t\"x3d+xml\": [\"x3d\", \"x3dz\"],\n\t\t\"x3d+binary\": [\"x3db\", \"x3dbz\"],\n\t\t\"vnd.collada+xml\": \"dae\",\n\t\t\"vnd.dwf\": \"dwf\",\n\t\t\"vnd.gdl\": \"gdl\",\n\t\t\"vnd.gtw\": \"gtw\",\n\t\t\"vnd.mts\": \"mts\",\n\t\t\"vnd.vtu\": \"vtu\"\n\t},\n\t\"text\": {\n\t\t\"cache-manifest\": [\"manifest\", \"appcache\"],\n\t\t\"calendar\": [\"ics\", \"icz\", \"ifb\"],\n\t\t\"css\": \"css\",\n\t\t\"csv\": \"csv\",\n\t\t\"h323\": \"323\",\n\t\t\"html\": [\"html\", \"htm\", \"shtml\", \"stm\"],\n\t\t\"iuls\": \"uls\",\n\t\t\"mathml\": \"mml\",\n\t\t\"plain\": [\"txt\", \"text\", \"brf\", \"conf\", \"def\", \"list\", \"log\", \"in\", \"bas\"],\n\t\t\"richtext\": \"rtx\",\n\t\t\"scriptlet\": [\"sct\", \"wsc\"],\n\t\t\"texmacs\": [\"tm\", \"ts\"],\n\t\t\"tab-separated-values\": \"tsv\",\n\t\t\"vnd.sun.j2me.app-descriptor\": \"jad\",\n\t\t\"vnd.wap.wml\": \"wml\",\n\t\t\"vnd.wap.wmlscript\": \"wmls\",\n\t\t\"x-bibtex\": \"bib\",\n\t\t\"x-boo\": \"boo\",\n\t\t\"x-c++hdr\": [\"h++\", \"hpp\", \"hxx\", \"hh\"],\n\t\t\"x-c++src\": [\"c++\", \"cpp\", \"cxx\", \"cc\"],\n\t\t\"x-component\": \"htc\",\n\t\t\"x-dsrc\": \"d\",\n\t\t\"x-diff\": [\"diff\", \"patch\"],\n\t\t\"x-haskell\": \"hs\",\n\t\t\"x-java\": \"java\",\n\t\t\"x-literate-haskell\": \"lhs\",\n\t\t\"x-moc\": \"moc\",\n\t\t\"x-pascal\": [\"p\", \"pas\"],\n\t\t\"x-pcs-gcd\": \"gcd\",\n\t\t\"x-perl\": [\"pl\", \"pm\"],\n\t\t\"x-python\": \"py\",\n\t\t\"x-scala\": \"scala\",\n\t\t\"x-setext\": \"etx\",\n\t\t\"x-tcl\": [\"tcl\", \"tk\"],\n\t\t\"x-tex\": [\"tex\", \"ltx\", \"sty\", \"cls\"],\n\t\t\"x-vcalendar\": \"vcs\",\n\t\t\"x-vcard\": \"vcf\",\n\t\t\"n3\": \"n3\",\n\t\t\"prs.lines.tag\": \"dsc\",\n\t\t\"sgml\": [\"sgml\", \"sgm\"],\n\t\t\"troff\": [\"t\", \"tr\", \"roff\", \"man\", \"me\", \"ms\"],\n\t\t\"turtle\": \"ttl\",\n\t\t\"uri-list\": [\"uri\", \"uris\", \"urls\"],\n\t\t\"vcard\": \"vcard\",\n\t\t\"vnd.curl\": \"curl\",\n\t\t\"vnd.curl.dcurl\": \"dcurl\",\n\t\t\"vnd.curl.scurl\": \"scurl\",\n\t\t\"vnd.curl.mcurl\": \"mcurl\",\n\t\t\"vnd.dvb.subtitle\": \"sub\",\n\t\t\"vnd.fly\": \"fly\",\n\t\t\"vnd.fmi.flexstor\": \"flx\",\n\t\t\"vnd.graphviz\": \"gv\",\n\t\t\"vnd.in3d.3dml\": \"3dml\",\n\t\t\"vnd.in3d.spot\": \"spot\",\n\t\t\"x-asm\": [\"s\", \"asm\"],\n\t\t\"x-c\": [\"c\", \"cc\", \"cxx\", \"cpp\", \"h\", \"hh\", \"dic\"],\n\t\t\"x-fortran\": [\"f\", \"for\", \"f77\", \"f90\"],\n\t\t\"x-opml\": \"opml\",\n\t\t\"x-nfo\": \"nfo\",\n\t\t\"x-sfv\": \"sfv\",\n\t\t\"x-uuencode\": \"uu\",\n\t\t\"webviewhtml\": \"htt\"\n\t},\n\t\"video\": {\n\t\t\"avif\": \".avif\",\n\t\t\"3gpp\": \"3gp\",\n\t\t\"annodex\": \"axv\",\n\t\t\"dl\": \"dl\",\n\t\t\"dv\": [\"dif\", \"dv\"],\n\t\t\"fli\": \"fli\",\n\t\t\"gl\": \"gl\",\n\t\t\"mpeg\": [\"mpeg\", \"mpg\", \"mpe\", \"m1v\", \"m2v\", \"mp2\", \"mpa\", \"mpv2\"],\n\t\t\"mp4\": [\"mp4\", \"mp4v\", \"mpg4\"],\n\t\t\"quicktime\": [\"qt\", \"mov\"],\n\t\t\"ogg\": \"ogv\",\n\t\t\"vnd.mpegurl\": [\"mxu\", \"m4u\"],\n\t\t\"x-flv\": \"flv\",\n\t\t\"x-la-asf\": [\"lsf\", \"lsx\"],\n\t\t\"x-mng\": \"mng\",\n\t\t\"x-ms-asf\": [\"asf\", \"asx\", \"asr\"],\n\t\t\"x-ms-wm\": \"wm\",\n\t\t\"x-ms-wmv\": \"wmv\",\n\t\t\"x-ms-wmx\": \"wmx\",\n\t\t\"x-ms-wvx\": \"wvx\",\n\t\t\"x-msvideo\": \"avi\",\n\t\t\"x-sgi-movie\": \"movie\",\n\t\t\"x-matroska\": [\"mpv\", \"mkv\", \"mk3d\", \"mks\"],\n\t\t\"3gpp2\": \"3g2\",\n\t\t\"h261\": \"h261\",\n\t\t\"h263\": \"h263\",\n\t\t\"h264\": \"h264\",\n\t\t\"jpeg\": \"jpgv\",\n\t\t\"jpm\": [\"jpm\", \"jpgm\"],\n\t\t\"mj2\": [\"mj2\", \"mjp2\"],\n\t\t\"vnd.dece.hd\": [\"uvh\", \"uvvh\"],\n\t\t\"vnd.dece.mobile\": [\"uvm\", \"uvvm\"],\n\t\t\"vnd.dece.pd\": [\"uvp\", \"uvvp\"],\n\t\t\"vnd.dece.sd\": [\"uvs\", \"uvvs\"],\n\t\t\"vnd.dece.video\": [\"uvv\", \"uvvv\"],\n\t\t\"vnd.dvb.file\": \"dvb\",\n\t\t\"vnd.fvt\": \"fvt\",\n\t\t\"vnd.ms-playready.media.pyv\": \"pyv\",\n\t\t\"vnd.uvvu.mp4\": [\"uvu\", \"uvvu\"],\n\t\t\"vnd.vivo\": \"viv\",\n\t\t\"webm\": \"webm\",\n\t\t\"x-f4v\": \"f4v\",\n\t\t\"x-m4v\": \"m4v\",\n\t\t\"x-ms-vob\": \"vob\",\n\t\t\"x-smv\": \"smv\"\t\t\n\t},\n\t\"x-conference\": {\n\t\t\"x-cooltalk\": \"ice\"\n\t},\n\t\"x-world\": {\n\t\t\"x-vrml\": [\"vrm\", \"vrml\", \"wrl\", \"flr\", \"wrz\", \"xaf\", \"xof\"]\n\t}\n};\n\nconst mimeTypes = (() => {\n\tconst mimeTypes = {};\n\tfor (let type in table) {\n\t\t// eslint-disable-next-line no-prototype-builtins\n\t\tif (table.hasOwnProperty(type)) {\n\t\t\tfor (let subtype in table[type]) {\n\t\t\t\t// eslint-disable-next-line no-prototype-builtins\n\t\t\t\tif (table[type].hasOwnProperty(subtype)) {\n\t\t\t\t\tconst value = table[type][subtype];\n\t\t\t\t\tif (typeof value == \"string\") {\n\t\t\t\t\t\tmimeTypes[value] = type + \"/\" + subtype;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfor (let indexMimeType = 0; indexMimeType < value.length; indexMimeType++) {\n\t\t\t\t\t\t\tmimeTypes[value[indexMimeType]] = type + \"/\" + subtype;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn mimeTypes;\n})();\n\nexport default getMimeType;\n\nfunction getMimeType(filename) {\n\tconst defaultValue = \"application/octet-stream\";\n\treturn filename && mimeTypes[filename.split(\".\").pop().toLowerCase()] || defaultValue;\n}","/*\n Copyright (c) 2021 Gildas Lormeau. All rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are met:\n\n 1. Redistributions of source code must retain the above copyright notice,\n this list of conditions and the following disclaimer.\n\n 2. Redistributions in binary form must reproduce the above copyright \n notice, this list of conditions and the following disclaimer in \n the documentation and/or other materials provided with the distribution.\n\n 3. The names of the authors may not be used to endorse or promote products\n derived from this software without specific prior written permission.\n\n THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED WARRANTIES,\n INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL JCRAFT,\n INC. OR ANY CONTRIBUTORS TO THIS SOFTWARE BE LIABLE FOR ANY DIRECT, INDIRECT,\n INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA,\n OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,\n EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n\"use strict\";\n\nclass Crc32 {\n\n\tconstructor() {\n\t\tthis.crc = -1;\n\t\tthis.table = (() => {\n\t\t\tconst table = [];\n\t\t\tfor (let i = 0; i < 256; i++) {\n\t\t\t\tlet t = i;\n\t\t\t\tfor (let j = 0; j < 8; j++) {\n\t\t\t\t\tif (t & 1) {\n\t\t\t\t\t\tt = (t >>> 1) ^ 0xEDB88320;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tt = t >>> 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\ttable[i] = t;\n\t\t\t}\n\t\t\treturn table;\n\t\t})();\n\t}\n\n\tappend(data) {\n\t\tconst table = this.table;\n\t\tlet crc = this.crc | 0;\n\t\tfor (let offset = 0, length = data.length | 0; offset < length; offset++) {\n\t\t\tcrc = (crc >>> 8) ^ table[(crc ^ data[offset]) & 0xFF];\n\t\t}\n\t\tthis.crc = crc;\n\t}\n\n\tget() {\n\t\treturn ~this.crc;\n\t}\n}\n\nexport default Crc32;","/*\n Copyright (c) 2021 Gildas Lormeau. All rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are met:\n\n 1. Redistributions of source code must retain the above copyright notice,\n this list of conditions and the following disclaimer.\n\n 2. Redistributions in binary form must reproduce the above copyright \n notice, this list of conditions and the following disclaimer in \n the documentation and/or other materials provided with the distribution.\n\n 3. The names of the authors may not be used to endorse or promote products\n derived from this software without specific prior written permission.\n\n THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED WARRANTIES,\n INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL JCRAFT,\n INC. OR ANY CONTRIBUTORS TO THIS SOFTWARE BE LIABLE FOR ANY DIRECT, INDIRECT,\n INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA,\n OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,\n EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n/* global crypto, TextEncoder */\n\n\"use strict\";\n\nconst ERR_INVALID_PASSORD = \"Invalid pasword\";\nconst BLOCK_LENGTH = 16;\nconst RAW_FORMAT = \"raw\";\nconst PBKDF2_ALGORITHM = { name: \"PBKDF2\" };\nconst SIGNATURE_ALGORITHM = { name: \"HMAC\" };\nconst HASH_FUNCTION = \"SHA-1\";\nconst CRYPTO_KEY_ALGORITHM = { name: \"AES-CTR\" };\nconst BASE_KEY_ALGORITHM = Object.assign({ hash: SIGNATURE_ALGORITHM }, PBKDF2_ALGORITHM);\nconst DERIVED_BITS_ALGORITHM = Object.assign({ iterations: 1000, hash: { name: HASH_FUNCTION } }, PBKDF2_ALGORITHM);\nconst AUTHENTICATION_ALGORITHM = Object.assign({ hash: HASH_FUNCTION }, SIGNATURE_ALGORITHM);\nconst CRYPTO_ALGORITHM = Object.assign({ length: BLOCK_LENGTH }, CRYPTO_KEY_ALGORITHM);\nconst DERIVED_BITS_USAGE = [\"deriveBits\"];\nconst SIGN_USAGE = [\"sign\"];\nconst DERIVED_BITS_LENGTH = 528;\nconst PREAMBULE_LENGTH = 18;\nconst SIGNATURE_LENGTH = 10;\nconst COUNTER_DEFAULT_VALUE = [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\nconst subtle = crypto.subtle;\n\nclass Decrypt {\n\n\tconstructor(password, signed) {\n\t\tthis.password = password;\n\t\tthis.signed = signed;\n\t\tthis.input = signed && new Uint8Array(0);\n\t\tthis.pendingInput = new Uint8Array(0);\n\t}\n\n\tasync append(input) {\n\t\tconst decrypt = async (offset = 0) => {\n\t\t\tif (offset + BLOCK_LENGTH <= buferredInput.length - SIGNATURE_LENGTH) {\n\t\t\t\tconst chunkToDecrypt = buferredInput.subarray(offset, offset + BLOCK_LENGTH);\n\t\t\t\tconst outputChunk = await subtle.decrypt(Object.assign({ counter: this.counter }, CRYPTO_ALGORITHM), this.keys.decrypt, chunkToDecrypt);\n\t\t\t\tincrementCounter(this.counter);\n\t\t\t\toutput.set(new Uint8Array(outputChunk), offset);\n\t\t\t\treturn decrypt(offset + BLOCK_LENGTH);\n\t\t\t} else {\n\t\t\t\tthis.pendingInput = buferredInput.subarray(offset);\n\t\t\t\tif (this.signed) {\n\t\t\t\t\tthis.input = concat(this.input, input);\n\t\t\t\t}\n\t\t\t\treturn output;\n\t\t\t}\n\t\t};\n\n\t\tif (this.password) {\n\t\t\tconst preambule = input.subarray(0, PREAMBULE_LENGTH);\n\t\t\tawait createDecryptionKeys(this, preambule, this.password);\n\t\t\tthis.password = null;\n\t\t\tinput = input.subarray(PREAMBULE_LENGTH);\n\t\t}\n\t\tlet output = new Uint8Array(input.length - SIGNATURE_LENGTH - ((input.length - SIGNATURE_LENGTH) % BLOCK_LENGTH));\n\t\tlet buferredInput = input;\n\t\tif (this.pendingInput.length) {\n\t\t\tbuferredInput = concat(this.pendingInput, input);\n\t\t\toutput = expand(output, buferredInput.length - SIGNATURE_LENGTH - ((buferredInput.length - SIGNATURE_LENGTH) % BLOCK_LENGTH));\n\t\t}\n\t\treturn decrypt();\n\t}\n\n\tasync flush() {\n\t\tconst pendingInput = this.pendingInput;\n\t\tconst keys = this.keys;\n\t\tconst chunkToDecrypt = pendingInput.subarray(0, pendingInput.length - SIGNATURE_LENGTH);\n\t\tconst originalSignatureArray = pendingInput.subarray(pendingInput.length - SIGNATURE_LENGTH);\n\t\tlet decryptedChunkArray = new Uint8Array(0);\n\t\tif (chunkToDecrypt.length) {\n\t\t\tconst decryptedChunk = await subtle.decrypt(Object.assign({ counter: this.counter }, CRYPTO_ALGORITHM), keys.decrypt, chunkToDecrypt);\n\t\t\tdecryptedChunkArray = new Uint8Array(decryptedChunk);\n\t\t}\n\t\tlet valid = true;\n\t\tif (this.signed) {\n\t\t\tconst signature = await subtle.sign(SIGNATURE_ALGORITHM, keys.authentication, this.input.subarray(0, this.input.length - SIGNATURE_LENGTH));\n\t\t\tconst signatureArray = new Uint8Array(signature);\n\t\t\tthis.input = null;\n\t\t\tfor (let indexSignature = 0; indexSignature < SIGNATURE_LENGTH; indexSignature++) {\n\t\t\t\tif (signatureArray[indexSignature] != originalSignatureArray[indexSignature]) {\n\t\t\t\t\tvalid = false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn {\n\t\t\tvalid,\n\t\t\tdata: decryptedChunkArray\n\t\t};\n\t}\n\n}\n\nclass Encrypt {\n\n\tconstructor(password) {\n\t\tthis.password = password;\n\t\tthis.output = new Uint8Array(0);\n\t\tthis.pendingInput = new Uint8Array(0);\n\t}\n\n\tasync append(input) {\n\t\tconst encrypt = async (offset = 0) => {\n\t\t\tif (offset + BLOCK_LENGTH <= input.length) {\n\t\t\t\tconst chunkToEncrypt = input.subarray(offset, offset + BLOCK_LENGTH);\n\t\t\t\tconst outputChunk = await subtle.encrypt(Object.assign({ counter: this.counter }, CRYPTO_ALGORITHM), this.keys.encrypt, chunkToEncrypt);\n\t\t\t\tincrementCounter(this.counter);\n\t\t\t\toutput.set(new Uint8Array(outputChunk), offset + preambule.length);\n\t\t\t\treturn encrypt(offset + BLOCK_LENGTH);\n\t\t\t} else {\n\t\t\t\tthis.pendingInput = input.subarray(offset);\n\t\t\t\tthis.output = concat(this.output, output);\n\t\t\t\treturn output;\n\t\t\t}\n\t\t};\n\n\t\tlet preambule = new Uint8Array(0);\n\t\tif (this.password) {\n\t\t\tpreambule = await createEncryptionKeys(this, this.password);\n\t\t\tthis.password = null;\n\t\t}\n\t\tlet output = new Uint8Array(preambule.length + input.length - (input.length % BLOCK_LENGTH));\n\t\toutput.set(preambule, 0);\n\t\tif (this.pendingInput.length) {\n\t\t\tinput = concat(this.pendingInput, input);\n\t\t\toutput = expand(output, input.length - (input.length % BLOCK_LENGTH));\n\t\t}\n\t\treturn encrypt();\n\t}\n\n\tasync flush() {\n\t\tlet encryptedChunkArray = new Uint8Array(0);\n\t\tif (this.pendingInput.length) {\n\t\t\tconst encryptedChunk = await subtle.encrypt(Object.assign({ counter: this.counter }, CRYPTO_ALGORITHM), this.keys.encrypt, this.pendingInput);\n\t\t\tencryptedChunkArray = new Uint8Array(encryptedChunk);\n\t\t\tthis.output = concat(this.output, encryptedChunkArray);\n\t\t}\n\t\tconst signature = await subtle.sign(SIGNATURE_ALGORITHM, this.keys.authentication, this.output.subarray(PREAMBULE_LENGTH));\n\t\tthis.output = null;\n\t\tconst signatureArray = new Uint8Array(signature).subarray(0, SIGNATURE_LENGTH);\n\t\treturn {\n\t\t\tdata: concat(encryptedChunkArray, signatureArray),\n\t\t\tsignature: signatureArray\n\t\t};\n\t}\n}\n\nexport {\n\tDecrypt,\n\tEncrypt,\n\tERR_INVALID_PASSORD\n};\n\nasync function createDecryptionKeys(decrypt, preambuleArray, password) {\n\tdecrypt.counter = new Uint8Array(COUNTER_DEFAULT_VALUE);\n\tconst salt = preambuleArray.subarray(0, 16);\n\tconst passwordVerification = preambuleArray.subarray(16);\n\tconst encodedPassword = (new TextEncoder()).encode(password);\n\tconst basekey = await subtle.importKey(RAW_FORMAT, encodedPassword, BASE_KEY_ALGORITHM, false, DERIVED_BITS_USAGE);\n\tconst derivedBits = await subtle.deriveBits(Object.assign({ salt }, DERIVED_BITS_ALGORITHM), basekey, DERIVED_BITS_LENGTH);\n\tconst compositeKey = new Uint8Array(derivedBits);\n\tconst passwordVerificationKey = compositeKey.subarray(64);\n\tdecrypt.keys = {\n\t\tdecrypt: await subtle.importKey(RAW_FORMAT, compositeKey.subarray(0, 32), CRYPTO_KEY_ALGORITHM, true, [\"decrypt\"]),\n\t\tauthentication: await subtle.importKey(RAW_FORMAT, compositeKey.subarray(32, 64), AUTHENTICATION_ALGORITHM, false, SIGN_USAGE),\n\t\tpasswordVerification: passwordVerificationKey\n\t};\n\tif (passwordVerificationKey[0] != passwordVerification[0] || passwordVerificationKey[1] != passwordVerification[1]) {\n\t\tthrow new Error(ERR_INVALID_PASSORD);\n\t}\n}\n\nasync function createEncryptionKeys(encrypt, password) {\n\tencrypt.counter = new Uint8Array(COUNTER_DEFAULT_VALUE);\n\tconst salt = crypto.getRandomValues(new Uint8Array(16));\n\tconst encodedPassword = (new TextEncoder()).encode(password);\n\tconst basekey = await subtle.importKey(RAW_FORMAT, encodedPassword, BASE_KEY_ALGORITHM, false, DERIVED_BITS_USAGE);\n\tconst derivedBits = await subtle.deriveBits(Object.assign({ salt }, DERIVED_BITS_ALGORITHM), basekey, DERIVED_BITS_LENGTH);\n\tconst compositeKey = new Uint8Array(derivedBits);\n\tencrypt.keys = {\n\t\tencrypt: await subtle.importKey(RAW_FORMAT, compositeKey.subarray(0, 32), CRYPTO_KEY_ALGORITHM, true, [\"encrypt\"]),\n\t\tauthentication: await subtle.importKey(RAW_FORMAT, compositeKey.subarray(32, 64), AUTHENTICATION_ALGORITHM, false, SIGN_USAGE),\n\t\tpasswordVerification: compositeKey.subarray(64)\n\t};\n\treturn concat(salt, encrypt.keys.passwordVerification);\n}\n\nfunction incrementCounter(counter) {\n\tfor (let indexCounter = 0; indexCounter < 16; indexCounter++) {\n\t\tif (counter[indexCounter] == 255) {\n\t\t\tcounter[indexCounter] = 0;\n\t\t} else {\n\t\t\tcounter[indexCounter]++;\n\t\t\tbreak;\n\t\t}\n\t}\n}\n\nfunction concat(leftArray, rightArray) {\n\tlet array = leftArray;\n\tif (leftArray.length + rightArray.length) {\n\t\tarray = new Uint8Array(leftArray.length + rightArray.length);\n\t\tarray.set(leftArray, 0);\n\t\tarray.set(rightArray, leftArray.length);\n\t}\n\treturn array;\n}\n\nfunction expand(inputArray, length) {\n\tif (length && length > inputArray.length) {\n\t\tconst array = inputArray;\n\t\tinputArray = new Uint8Array(length);\n\t\tinputArray.set(array, 0);\n\t}\n\treturn inputArray;\n}","/*\n Copyright (c) 2021 Gildas Lormeau. All rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are met:\n\n 1. Redistributions of source code must retain the above copyright notice,\n this list of conditions and the following disclaimer.\n\n 2. Redistributions in binary form must reproduce the above copyright \n notice, this list of conditions and the following disclaimer in \n the documentation and/or other materials provided with the distribution.\n\n 3. The names of the authors may not be used to endorse or promote products\n derived from this software without specific prior written permission.\n\n THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED WARRANTIES,\n INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL JCRAFT,\n INC. OR ANY CONTRIBUTORS TO THIS SOFTWARE BE LIABLE FOR ANY DIRECT, INDIRECT,\n INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA,\n OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,\n EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n\"use strict\";\n\nimport Crc32 from \"./crc32.js\";\nimport { Encrypt, Decrypt, ERR_INVALID_PASSORD } from \"./crypto.js\";\n\nconst CODEC_DEFLATE = \"deflate\";\nconst CODEC_INFLATE = \"inflate\";\nconst ERR_INVALID_SIGNATURE = \"Invalid signature\";\n\nclass Inflate {\n\n\tconstructor(options) {\n\t\tthis.signature = options.inputSignature;\n\t\tthis.encrypted = Boolean(options.inputPassword);\n\t\tthis.signed = options.inputSigned;\n\t\tthis.compressed = options.inputCompressed;\n\t\tthis.inflate = this.compressed && new options.codecConstructor();\n\t\tthis.crc32 = this.signed && this.signed && new Crc32();\n\t\tthis.decrypt = this.encrypted && new Decrypt(options.inputPassword);\n\t}\n\n\tasync append(data) {\n\t\tif (this.encrypted) {\n\t\t\tdata = await this.decrypt.append(data);\n\t\t}\n\t\tif (this.compressed && data.length) {\n\t\t\tdata = await this.inflate.append(data);\n\t\t}\n\t\tif (!this.encrypted && this.signed) {\n\t\t\tthis.crc32.append(data);\n\t\t}\n\t\treturn data;\n\t}\n\n\tasync flush() {\n\t\tlet signature, data = new Uint8Array(0);\n\t\tif (this.encrypted) {\n\t\t\tconst result = await this.decrypt.flush();\n\t\t\tif (!result.valid) {\n\t\t\t\tthrow new Error(ERR_INVALID_SIGNATURE);\n\t\t\t}\n\t\t\tdata = result.data;\n\t\t} else if (this.signed) {\n\t\t\tconst dataViewSignature = new DataView(new Uint8Array(4).buffer);\n\t\t\tsignature = this.crc32.get();\n\t\t\tdataViewSignature.setUint32(0, signature);\n\t\t\tif (this.signature != dataViewSignature.getUint32(0, false)) {\n\t\t\t\tthrow new Error(ERR_INVALID_SIGNATURE);\n\t\t\t}\n\t\t}\n\t\tif (this.compressed) {\n\t\t\tdata = (await this.inflate.append(data)) || new Uint8Array(0);\n\t\t\tawait this.inflate.flush();\n\t\t}\n\t\treturn { data, signature };\n\t}\n}\n\nclass Deflate {\n\n\tconstructor(options) {\n\t\tthis.encrypted = options.outputEncrypted;\n\t\tthis.signed = options.outputSigned;\n\t\tthis.compressed = options.outputCompressed;\n\t\tthis.deflate = this.compressed && new options.codecConstructor({ level: options.level || 5 });\n\t\tthis.crc32 = this.signed && new Crc32();\n\t\tthis.encrypt = this.encrypted && new Encrypt(options.outputPassword);\n\t}\n\n\tasync append(inputData) {\n\t\tlet data = inputData;\n\t\tif (this.compressed && inputData.length) {\n\t\t\tdata = await this.deflate.append(inputData);\n\t\t}\n\t\tif (this.encrypted) {\n\t\t\tdata = await this.encrypt.append(data);\n\t\t} else if (this.signed) {\n\t\t\tthis.crc32.append(inputData);\n\t\t}\n\t\treturn data;\n\t}\n\n\tasync flush() {\n\t\tlet data = new Uint8Array(0), signature;\n\t\tif (this.compressed) {\n\t\t\tdata = (await this.deflate.flush()) || new Uint8Array(0);\n\t\t}\n\t\tif (this.encrypted) {\n\t\t\tdata = await this.encrypt.append(data);\n\t\t\tconst result = await this.encrypt.flush();\n\t\t\tsignature = result.signature;\n\t\t\tconst newData = new Uint8Array(data.length + result.data.length);\n\t\t\tnewData.set(data, 0);\n\t\t\tnewData.set(result.data, data.length);\n\t\t\tdata = newData;\n\t\t} else if (this.signed) {\n\t\t\tsignature = this.crc32.get();\n\t\t}\n\t\treturn { data, signature };\n\t}\n}\n\nexport { Inflate, Deflate, createCodec, CODEC_DEFLATE, CODEC_INFLATE, ERR_INVALID_SIGNATURE, ERR_INVALID_PASSORD };\n\nfunction createCodec(options) {\n\tif (options.codecType.startsWith(CODEC_DEFLATE)) {\n\t\treturn new Deflate(options);\n\t} else if (options.codecType.startsWith(CODEC_INFLATE)) {\n\t\treturn new Inflate(options);\n\t}\n}","/*\n Copyright (c) 2021 Gildas Lormeau. All rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are met:\n\n 1. Redistributions of source code must retain the above copyright notice,\n this list of conditions and the following disclaimer.\n\n 2. Redistributions in binary form must reproduce the above copyright \n notice, this list of conditions and the following disclaimer in \n the documentation and/or other materials provided with the distribution.\n\n 3. The names of the authors may not be used to endorse or promote products\n derived from this software without specific prior written permission.\n\n THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED WARRANTIES,\n INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL JCRAFT,\n INC. OR ANY CONTRIBUTORS TO THIS SOFTWARE BE LIABLE FOR ANY DIRECT, INDIRECT,\n INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA,\n OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,\n EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n/* global Worker, URL */\n\n\"use strict\";\n\nimport { createCodec, CODEC_INFLATE, CODEC_DEFLATE, ERR_INVALID_SIGNATURE, ERR_INVALID_PASSORD } from \"./codec.js\";\n\nconst MESSAGE_INIT = \"init\";\nconst MESSAGE_APPEND = \"append\";\nconst MESSAGE_FLUSH = \"flush\";\nconst MESSAGE_EVENT_TYPE = \"message\";\n\nlet Z_WORKER_SCRIPT_PATH = \"z-worker.js\";\n\nconst workers = {\n\tpool: [],\n\tpendingRequests: []\n};\n\nexport {\n\tcreateWorkerCodec as createCodec,\n\tCODEC_DEFLATE,\n\tCODEC_INFLATE,\n\tERR_INVALID_SIGNATURE,\n\tERR_INVALID_PASSORD\n};\n\nfunction createWorkerCodec(options, config) {\n\tconst pool = workers.pool;\n\tconst streamCopy =\n\t\t!options.inputCompressed && !options.inputSigned && !options.inputEncrypted &&\n\t\t!options.outputCompressed && !options.outputSigned && !options.outputEncrypted;\n\tconst webWorker = options.useWebWorkers || (options.useWebWorkers === undefined && config.useWebWorkers && !streamCopy);\n\tlet scripts;\n\tif (webWorker) {\n\t\tconst codecType = options.codecType;\n\t\tif (config.workerScripts) {\n\t\t\tscripts = config.workerScripts[codecType];\n\t\t} else {\n\t\t\toptions.workerScriptsPath = (config.workerScriptsPath || \"\") + Z_WORKER_SCRIPT_PATH;\n\t\t}\n\t}\n\tif (pool.length < config.maxWorkers) {\n\t\tconst workerData = {};\n\t\tpool.push(workerData);\n\t\treturn getWorkerInterface(workerData, options, webWorker, scripts);\n\t} else {\n\t\tconst workerData = pool.find(workerData => !workerData.busy);\n\t\tif (workerData) {\n\t\t\treturn getWorkerInterface(workerData, options, webWorker, scripts);\n\t\t} else {\n\t\t\treturn new Promise(resolve => workers.pendingRequests.push({ resolve, options, webWorker, scripts }));\n\t\t}\n\t}\n}\n\nfunction getWorkerInterface(workerData, options, webWorker, scripts) {\n\tworkerData.busy = true;\n\tworkerData.options = options;\n\tworkerData.scripts = scripts;\n\tworkerData.webWorker = webWorker;\n\treturn webWorker ? createWebWorkerInterface(workerData, options) : createWorkerInterface(workerData);\n}\n\nfunction createWorkerInterface(workerData) {\n\tconst interfaceCodec = createCodec(workerData.options);\n\treturn {\n\t\tasync append(data) {\n\t\t\ttry {\n\t\t\t\treturn await interfaceCodec.append(data);\n\t\t\t} catch (error) {\n\t\t\t\tonTaskFinished(workerData);\n\t\t\t\tthrow error;\n\t\t\t}\n\t\t},\n\t\tasync flush() {\n\t\t\ttry {\n\t\t\t\treturn await interfaceCodec.flush();\n\t\t\t} finally {\n\t\t\t\tonTaskFinished(workerData);\n\t\t\t}\n\t\t}\n\t};\n}\n\nfunction createWebWorkerInterface(workerData, options) {\n\tlet task;\n\tif (!workerData.interface) {\n\t\tif (workerData.scripts) {\n\t\t\tworkerData.worker = new Worker(new URL(workerData.scripts[0], import.meta.url));\n\t\t} else {\n\t\t\tworkerData.worker = new Worker(new URL(options.workerScriptsPath, import.meta.url));\n\t\t}\n\t\tworkerData.worker.addEventListener(MESSAGE_EVENT_TYPE, onMessage, false);\n\t\tworkerData.interface = {\n\t\t\tappend(data) {\n\t\t\t\treturn initAndSendMessage({ type: MESSAGE_APPEND, data });\n\t\t\t},\n\t\t\tflush() {\n\t\t\t\treturn initAndSendMessage({ type: MESSAGE_FLUSH });\n\t\t\t}\n\t\t};\n\t}\n\treturn workerData.interface;\n\n\tasync function initAndSendMessage(message) {\n\t\tif (!task) {\n\t\t\tconst options = workerData.options;\n\t\t\tconst scripts = workerData.scripts ? workerData.scripts.slice(1) : [];\n\t\t\tawait sendMessage(Object.assign({\n\t\t\t\tscripts,\n\t\t\t\ttype: MESSAGE_INIT, options: {\n\t\t\t\t\tcodecType: options.codecType,\n\t\t\t\t\tinputPassword: options.inputPassword,\n\t\t\t\t\tinputSigned: options.inputSigned,\n\t\t\t\t\tinputSignature: options.signature,\n\t\t\t\t\tinputCompressed: options.inputCompressed,\n\t\t\t\t\tinputEncrypted: options.inputEncrypted,\n\t\t\t\t\tlevel: options.level,\n\t\t\t\t\toutputPassword: options.outputPassword,\n\t\t\t\t\toutputSigned: options.outputSigned,\n\t\t\t\t\toutputCompressed: options.outputCompressed,\n\t\t\t\t\toutputEncrypted: options.outputEncrypted\n\t\t\t\t}\n\t\t\t}));\n\t\t}\n\t\treturn sendMessage(message);\n\t}\n\n\tfunction sendMessage(message) {\n\t\tconst worker = workerData.worker;\n\t\tconst result = new Promise((resolve, reject) => task = { resolve, reject });\n\t\ttry {\n\t\t\tif (message.data) {\n\t\t\t\ttry {\n\t\t\t\t\tworker.postMessage(message, [message.data.buffer]);\n\t\t\t\t} catch (error) {\n\t\t\t\t\tworker.postMessage(message);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tworker.postMessage(message);\n\t\t\t}\n\t\t} catch (error) {\n\t\t\ttask.reject(error);\n\t\t\ttask = null;\n\t\t\tonTaskFinished(workerData);\n\t\t}\n\t\treturn result;\n\t}\n\n\tfunction onMessage(event) {\n\t\tconst message = event.data;\n\t\tif (task) {\n\t\t\tconst reponseError = message.error;\n\t\t\tif (reponseError) {\n\t\t\t\tconst error = new Error(reponseError.message);\n\t\t\t\terror.stack = reponseError.stack;\n\t\t\t\ttask.reject(error);\n\t\t\t\ttask = null;\n\t\t\t\tonTaskFinished(workerData);\n\t\t\t} else if (message.type == MESSAGE_INIT || message.type == MESSAGE_FLUSH || message.type == MESSAGE_APPEND) {\n\t\t\t\tif (message.type == MESSAGE_FLUSH) {\n\t\t\t\t\ttask.resolve({ data: new Uint8Array(message.data), signature: message.signature });\n\t\t\t\t\ttask = null;\n\t\t\t\t\tonTaskFinished(workerData);\n\t\t\t\t} else {\n\t\t\t\t\ttask.resolve(message.data && new Uint8Array(message.data));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction onTaskFinished(workerData) {\n\tworkerData.busy = false;\n\tif (workers.pendingRequests.length) {\n\t\tconst [{ resolve, options, webWorker, scripts }] = workers.pendingRequests.splice(0, 1);\n\t\tresolve(getWorkerInterface(workerData, options, webWorker, scripts));\n\t} else {\n\t\tif (workerData.worker) {\n\t\t\tworkerData.worker.terminate();\n\t\t}\n\t\tworkers.pool = workers.pool.filter(data => data != workerData);\n\t}\n}","/*\n Copyright (c) 2021 Gildas Lormeau. All rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are met:\n\n 1. Redistributions of source code must retain the above copyright notice,\n this list of conditions and the following disclaimer.\n\n 2. Redistributions in binary form must reproduce the above copyright \n notice, this list of conditions and the following disclaimer in \n the documentation and/or other materials provided with the distribution.\n\n 3. The names of the authors may not be used to endorse or promote products\n derived from this software without specific prior written permission.\n\n THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED WARRANTIES,\n INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL JCRAFT,\n INC. OR ANY CONTRIBUTORS TO THIS SOFTWARE BE LIABLE FOR ANY DIRECT, INDIRECT,\n INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA,\n OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,\n EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n\"use strict\";\n\nconst MINIMUM_CHUNK_SIZE = 64;\n\nexport default processData;\n\nasync function processData(codec, reader, writer, offset, inputLength, config, options) {\n\tconst chunkSize = Math.max(config.chunkSize, MINIMUM_CHUNK_SIZE);\n\treturn processChunk();\n\n\tasync function processChunk(chunkIndex = 0, length = 0) {\n\t\tconst chunkOffset = chunkIndex * chunkSize;\n\t\tif (chunkOffset < inputLength) {\n\t\t\tconst inputData = await reader.readUint8Array(chunkOffset + offset, Math.min(chunkSize, inputLength - chunkOffset));\n\t\t\tconst data = await codec.append(inputData);\n\t\t\tlength += await writeData(writer, data);\n\t\t\tif (options.onprogress) {\n\t\t\t\toptions.onprogress(chunkOffset + inputData.length, inputLength);\n\t\t\t}\n\t\t\treturn processChunk(chunkIndex + 1, length);\n\t\t} else {\n\t\t\tconst result = await codec.flush();\n\t\t\tlength += await writeData(writer, result.data);\n\t\t\treturn { signature: result.signature, length };\n\t\t}\n\t}\n}\n\nasync function writeData(writer, data) {\n\tif (data.length) {\n\t\tawait writer.writeUint8Array(data);\n\t}\n\treturn data.length;\n}","/*\n Copyright (c) 2021 Gildas Lormeau. All rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are met:\n\n 1. Redistributions of source code must retain the above copyright notice,\n this list of conditions and the following disclaimer.\n\n 2. Redistributions in binary form must reproduce the above copyright \n notice, this list of conditions and the following disclaimer in \n the documentation and/or other materials provided with the distribution.\n\n 3. The names of the authors may not be used to endorse or promote products\n derived from this software without specific prior written permission.\n\n THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED WARRANTIES,\n INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL JCRAFT,\n INC. OR ANY CONTRIBUTORS TO THIS SOFTWARE BE LIABLE FOR ANY DIRECT, INDIRECT,\n INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA,\n OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,\n EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nconst PROPERTY_NAMES = [\n\t\"filename\", \"rawFilename\", \"directory\", \"encrypted\", \"compressedSize\", \"uncompressedSize\",\n\t\"lastModDate\", \"rawLastModDate\", \"comment\", \"rawComment\", \"signature\", \"extraField\",\n\t\"rawExtraField\", \"bitFlag\", \"extraFieldZip64\", \"extraFieldUnicodePath\", \"extraFieldUnicodeComment\",\n\t\"extraFieldAES\"];\n\nexport default class Entry {\n\n\tconstructor(data) {\n\t\tPROPERTY_NAMES.forEach(name => this[name] = data[name]);\n\t}\n\n}","/*\n Copyright (c) 2021 Gildas Lormeau. All rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are met:\n\n 1. Redistributions of source code must retain the above copyright notice,\n this list of conditions and the following disclaimer.\n\n 2. Redistributions in binary form must reproduce the above copyright \n notice, this list of conditions and the following disclaimer in \n the documentation and/or other materials provided with the distribution.\n\n 3. The names of the authors may not be used to endorse or promote products\n derived from this software without specific prior written permission.\n\n THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED WARRANTIES,\n INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL JCRAFT,\n INC. OR ANY CONTRIBUTORS TO THIS SOFTWARE BE LIABLE FOR ANY DIRECT, INDIRECT,\n INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA,\n OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,\n EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n/* global TextDecoder */\n\n\"use strict\";\n\nimport {\n\tMAX_32_BITS,\n\tMAX_16_BITS,\n\tCOMPRESSION_METHOD_DEFLATE,\n\tCOMPRESSION_METHOD_STORE,\n\tCOMPRESSION_METHOD_AES,\n\tLOCAL_FILE_HEADER_SIGNATURE,\n\tCENTRAL_FILE_HEADER_SIGNATURE,\n\tEND_OF_CENTRAL_DIR_SIGNATURE,\n\tZIP64_END_OF_CENTRAL_DIR_LOCATOR_SIGNATURE,\n\tZIP64_END_OF_CENTRAL_DIR_SIGNATURE,\n\tEXTRAFIELD_TYPE_ZIP64,\n\tEXTRAFIELD_TYPE_UNICODE_PATH,\n\tEXTRAFIELD_TYPE_UNICODE_COMMENT,\n\tEXTRAFIELD_TYPE_AES,\n\tEND_OF_CENTRAL_DIR_LENGTH,\n\tZIP64_END_OF_CENTRAL_DIR_LOCATOR_LENGTH,\n\tZIP64_END_OF_CENTRAL_DIR_LENGTH,\n\tBITFLAG_ENCRYPTED,\n\tBITFLAG_LEVEL,\n\tBITFLAG_DATA_DESCRIPTOR,\n\tBITFLAG_ENHANCED_DEFLATING,\n\tBITFLAG_LANG_ENCODING_FLAG,\n\tFILE_ATTR_MSDOS_DIR_MASK,\n\tDIRECTORY_SIGNATURE\n} from \"./constants.js\";\nimport { createCodec, CODEC_INFLATE, ERR_INVALID_SIGNATURE, ERR_INVALID_PASSORD } from \"./codecs/codec-pool.js\";\nimport Crc32 from \"./codecs/crc32.js\";\nimport processData from \"./engine.js\";\nimport Entry from \"./zip-entry.js\";\n\nconst ERR_BAD_FORMAT = \"File format is not recognized\";\nconst ERR_EOCDR_NOT_FOUND = \"End of central directory not found\";\nconst ERR_EOCDR_ZIP64_NOT_FOUND = \"End of Zip64 central directory not found\";\nconst ERR_EOCDR_LOCATOR_ZIP64_NOT_FOUND = \"End of Zip64 central directory locator not found\";\nconst ERR_CENTRAL_DIRECTORY_NOT_FOUND = \"Central directory header not found\";\nconst ERR_LOCAL_FILE_HEADER_NOT_FOUND = \"Local file header not found\";\nconst ERR_EXTRAFIELD_ZIP64_NOT_FOUND = \"Zip64 extra field not found\";\nconst ERR_ENCRYPTED = \"File contains encrypted entry\";\nconst ERR_UNSUPPORTED_ENCRYPTION = \"Encryption not supported\";\nconst ERR_UNSUPPORTED_COMPRESSION = \"Compression method not supported\";\nconst CHARSET_UTF8 = \"utf-8\";\nconst ZIP64_PROPERTIES = [\"uncompressedSize\", \"compressedSize\", \"offset\"];\nconst CP437 = [\n\t\"\\u0000\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \" \", \"!\", \"\\\"\", \"#\", \"$\", \"%\", \"&\", \"'\", \"(\", \")\", \"*\", \"+\", \",\", \"-\", \".\", \"/\", \"0\", \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \":\", \";\", \"<\", \"=\", \">\", \"?\",\n\t\"@\", \"A\", \"B\", \"C\", \"D\", \"E\", \"F\", \"G\", \"H\", \"I\", \"J\", \"K\", \"L\", \"M\", \"N\", \"O\", \"P\", \"Q\", \"R\", \"S\", \"T\", \"U\", \"V\", \"W\", \"X\", \"Y\", \"Z\", \"[\", \"\\\\\", \"]\", \"^\", \"_\", \"`\", \"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\", \"h\", \"i\", \"j\", \"k\", \"l\", \"m\", \"n\", \"o\", \"p\", \"q\", \"r\", \"s\", \"t\", \"u\", \"v\", \"w\", \"x\", \"y\", \"z\", \"{\", \"|\", \"}\", \"~\", \"\",\n\t\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\",\n\t\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \" \"];\n\nclass ZipReader {\n\n\tconstructor(reader, options = {}, config = {}) {\n\t\tthis.reader = reader;\n\t\tthis.options = options;\n\t\tthis.config = config;\n\t}\n\n\tasync getEntries(options = {}) {\n\t\tconst reader = this.reader;\n\t\tif (!reader.initialized) {\n\t\t\tawait reader.init();\n\t\t}\n\t\tconst endOfDirectoryInfo = await seekSignature(reader, END_OF_CENTRAL_DIR_SIGNATURE, END_OF_CENTRAL_DIR_LENGTH, MAX_16_BITS);\n\t\tif (!endOfDirectoryInfo) {\n\t\t\tthrow new Error(ERR_EOCDR_NOT_FOUND);\n\t\t}\n\t\tconst endOfDirectoryView = new DataView(endOfDirectoryInfo.buffer);\n\t\tlet zip64;\n\t\tlet directoryDataOffset = getUint32(endOfDirectoryView, 16);\n\t\tlet filesLength = getUint16(endOfDirectoryView, 8);\n\t\tif (directoryDataOffset == MAX_32_BITS || filesLength == MAX_16_BITS) {\n\t\t\tzip64 = true;\n\t\t\tconst endOfDirectoryLocatorArray = await reader.readUint8Array(endOfDirectoryInfo.offset - ZIP64_END_OF_CENTRAL_DIR_LOCATOR_LENGTH, ZIP64_END_OF_CENTRAL_DIR_LOCATOR_LENGTH);\n\t\t\tconst endOfDirectoryLocatorView = new DataView(endOfDirectoryLocatorArray.buffer);\n\t\t\tif (Number(getUint32(endOfDirectoryLocatorView, 0)) != ZIP64_END_OF_CENTRAL_DIR_LOCATOR_SIGNATURE) {\n\t\t\t\tthrow new Error(ERR_EOCDR_ZIP64_NOT_FOUND);\n\t\t\t}\n\t\t\tdirectoryDataOffset = Number(getBigUint64(endOfDirectoryLocatorView, 8));\n\t\t\tconst endOfDirectoryArray = await reader.readUint8Array(directoryDataOffset, ZIP64_END_OF_CENTRAL_DIR_LENGTH);\n\t\t\tconst endOfDirectoryView = new DataView(endOfDirectoryArray.buffer);\n\t\t\tif (Number(getUint32(endOfDirectoryView, 0)) != ZIP64_END_OF_CENTRAL_DIR_SIGNATURE) {\n\t\t\t\tthrow new Error(ERR_EOCDR_LOCATOR_ZIP64_NOT_FOUND);\n\t\t\t}\n\t\t\tfilesLength = Number(getBigUint64(endOfDirectoryView, 24));\n\t\t\tdirectoryDataOffset -= Number(getBigUint64(endOfDirectoryView, 40));\n\t\t}\n\t\tif (directoryDataOffset < 0 || (!zip64 && (directoryDataOffset >= reader.size || filesLength >= MAX_16_BITS))) {\n\t\t\tthrow new Error(ERR_BAD_FORMAT);\n\t\t}\n\t\tconst directoryArray = await reader.readUint8Array(directoryDataOffset, reader.size - directoryDataOffset);\n\t\tconst directoryView = new DataView(directoryArray.buffer);\n\t\tconst entries = [];\n\t\tlet offset = 0;\n\t\tfor (let indexFile = 0; indexFile < filesLength; indexFile++) {\n\t\t\tconst fileEntry = new ZipEntry(this.reader, this.config, this.options);\n\t\t\tif (getUint32(directoryView, offset) != CENTRAL_FILE_HEADER_SIGNATURE) {\n\t\t\t\tthrow new Error(ERR_CENTRAL_DIRECTORY_NOT_FOUND);\n\t\t\t}\n\t\t\tfileEntry.compressedSize = 0;\n\t\t\tfileEntry.uncompressedSize = 0;\n\t\t\treadCommonHeader(fileEntry, directoryView, offset + 6);\n\t\t\tfileEntry.commentLength = getUint16(directoryView, offset + 32);\n\t\t\tfileEntry.directory = (getUint8(directoryView, offset + 38) & FILE_ATTR_MSDOS_DIR_MASK) == FILE_ATTR_MSDOS_DIR_MASK;\n\t\t\tfileEntry.offset = getUint32(directoryView, offset + 42);\n\t\t\tfileEntry.rawFilename = directoryArray.subarray(offset + 46, offset + 46 + fileEntry.filenameLength);\n\t\t\tconst filenameEncoding = options.filenameEncoding === undefined ? this.options.filenameEncoding : options.filenameEncoding;\n\t\t\tfileEntry.filename = decodeString(fileEntry.rawFilename, fileEntry.bitFlag.languageEncodingFlag ? CHARSET_UTF8 : filenameEncoding);\n\t\t\tif (!fileEntry.directory && fileEntry.filename && fileEntry.filename.charAt(fileEntry.filename.length - 1) == DIRECTORY_SIGNATURE) {\n\t\t\t\tfileEntry.directory = true;\n\t\t\t}\n\t\t\tfileEntry.rawExtraField = directoryArray.subarray(offset + 46 + fileEntry.filenameLength, offset + 46 + fileEntry.filenameLength + fileEntry.extraFieldLength);\n\t\t\treadCommonFooter(fileEntry, fileEntry, directoryView, offset + 6);\n\t\t\tfileEntry.rawComment = directoryArray.subarray(offset + 46 + fileEntry.filenameLength + fileEntry.extraFieldLength, offset + 46\n\t\t\t\t+ fileEntry.filenameLength + fileEntry.extraFieldLength + fileEntry.commentLength);\n\t\t\tconst commentEncoding = options.commentEncoding === undefined ? this.options.commentEncoding : options.commentEncoding;\n\t\t\tfileEntry.comment = decodeString(fileEntry.rawComment, fileEntry.bitFlag.languageEncodingFlag ? CHARSET_UTF8 : commentEncoding);\n\t\t\tconst entry = new Entry(fileEntry);\n\t\t\tentry.getData = (writer, options) => fileEntry.getData(writer, options);\n\t\t\tentries.push(entry);\n\t\t\toffset += 46 + fileEntry.filenameLength + fileEntry.extraFieldLength + fileEntry.commentLength;\n\t\t}\n\t\treturn entries;\n\t}\n\n\tasync close() {\n\t}\n}\n\nexport {\n\tZipReader,\n\tERR_BAD_FORMAT,\n\tERR_EOCDR_NOT_FOUND,\n\tERR_EOCDR_ZIP64_NOT_FOUND,\n\tERR_EOCDR_LOCATOR_ZIP64_NOT_FOUND,\n\tERR_CENTRAL_DIRECTORY_NOT_FOUND,\n\tERR_LOCAL_FILE_HEADER_NOT_FOUND,\n\tERR_EXTRAFIELD_ZIP64_NOT_FOUND,\n\tERR_ENCRYPTED,\n\tERR_UNSUPPORTED_ENCRYPTION,\n\tERR_UNSUPPORTED_COMPRESSION,\n\tERR_INVALID_SIGNATURE,\n\tERR_INVALID_PASSORD\n};\n\nclass ZipEntry {\n\n\tconstructor(reader, config, options) {\n\t\tthis.reader = reader;\n\t\tthis.config = config;\n\t\tthis.options = options;\n\t}\n\n\tasync getData(writer, options = {}) {\n\t\tconst reader = this.reader;\n\t\tif (!reader.initialized) {\n\t\t\tawait reader.init();\n\t\t}\n\t\tconst dataArray = await reader.readUint8Array(this.offset, 30);\n\t\tconst dataView = new DataView(dataArray.buffer);\n\t\tconst password = options.password === undefined ? this.options.password : options.password;\n\t\tlet inputPassword = password && password.length && password;\n\t\tif (this.extraFieldAES) {\n\t\t\tif (this.extraFieldAES.originalCompressionMethod != COMPRESSION_METHOD_AES) {\n\t\t\t\tthrow new Error(ERR_UNSUPPORTED_COMPRESSION);\n\t\t\t}\n\t\t\tif (this.extraFieldAES.strength != 3) {\n\t\t\t\tthrow new Error(ERR_UNSUPPORTED_ENCRYPTION);\n\t\t\t}\n\t\t}\n\t\tif (this.compressionMethod != COMPRESSION_METHOD_STORE && this.compressionMethod != COMPRESSION_METHOD_DEFLATE) {\n\t\t\tthrow new Error(ERR_UNSUPPORTED_COMPRESSION);\n\t\t}\n\t\tif (getUint32(dataView, 0) != LOCAL_FILE_HEADER_SIGNATURE) {\n\t\t\tthrow new Error(ERR_LOCAL_FILE_HEADER_NOT_FOUND);\n\t\t}\n\t\tconst localDirectory = this.localDirectory = {};\n\t\treadCommonHeader(localDirectory, dataView, 4);\n\t\tlocalDirectory.rawExtraField = dataArray.subarray(this.offset + 30 + localDirectory.filenameLength, this.offset + 30 + localDirectory.filenameLength + localDirectory.extraFieldLength);\n\t\treadCommonFooter(this, localDirectory, dataView, 4);\n\t\tlet dataOffset = this.offset + 30 + localDirectory.filenameLength + localDirectory.extraFieldLength;\n\t\tconst inputEncrypted = this.bitFlag.encrypted && localDirectory.bitFlag.encrypted;\n\t\tif (inputEncrypted && !inputPassword) {\n\t\t\tthrow new Error(ERR_ENCRYPTED);\n\t\t}\n\t\tconst codec = await createCodec({\n\t\t\tcodecType: CODEC_INFLATE,\n\t\t\tcodecConstructor: this.config.Inflate,\n\t\t\tinputPassword,\n\t\t\tinputSigned: options.checkSignature === undefined ? this.options.checkSignature : options.checkSignature,\n\t\t\tinputSignature: this.signature,\n\t\t\tinputCompressed: this.compressionMethod != 0,\n\t\t\tinputEncrypted,\n\t\t\tuseWebWorkers: options.useWebWorkers === undefined ? this.options.useWebWorkers : options.useWebWorkers\n\t\t}, this.config);\n\t\tif (!writer.initialized) {\n\t\t\tawait writer.init();\n\t\t}\n\t\tawait processData(codec, reader, writer, dataOffset, this.compressedSize, this.config, { onprogress: options.onprogress });\n\t\treturn writer.getData();\n\t}\n}\n\nfunction readCommonHeader(directory, dataView, offset) {\n\tdirectory.version = getUint16(dataView, offset);\n\tconst rawBitFlag = directory.rawBitFlag = getUint16(dataView, offset + 2);\n\tdirectory.bitFlag = {\n\t\tencrypted: (rawBitFlag & BITFLAG_ENCRYPTED) == BITFLAG_ENCRYPTED,\n\t\tlevel: (rawBitFlag & BITFLAG_LEVEL) >> 1,\n\t\tdataDescriptor: (rawBitFlag & BITFLAG_DATA_DESCRIPTOR) == BITFLAG_DATA_DESCRIPTOR,\n\t\tlanguageEncodingFlag: (rawBitFlag & BITFLAG_LANG_ENCODING_FLAG) == BITFLAG_LANG_ENCODING_FLAG\n\t};\n\tdirectory.encrypted = directory.bitFlag.encrypted;\n\tdirectory.rawLastModDate = getUint32(dataView, offset + 6);\n\tdirectory.lastModDate = getDate(directory.rawLastModDate);\n\tdirectory.filenameLength = getUint16(dataView, offset + 22);\n\tdirectory.extraFieldLength = getUint16(dataView, offset + 24);\n}\n\nfunction readCommonFooter(fileEntry, directory, dataView, offset) {\n\tconst rawExtraField = directory.rawExtraField;\n\tconst extraField = directory.extraField = new Map();\n\tconst rawExtraFieldView = new DataView(new Uint8Array(rawExtraField).buffer);\n\tlet offsetExtraField = 0;\n\ttry {\n\t\twhile (offsetExtraField < rawExtraField.length) {\n\t\t\tconst type = getUint16(rawExtraFieldView, offsetExtraField);\n\t\t\tconst size = getUint16(rawExtraFieldView, offsetExtraField + 2);\n\t\t\textraField.set(type, {\n\t\t\t\ttype,\n\t\t\t\tdata: rawExtraField.slice(offsetExtraField + 4, offsetExtraField + 4 + size)\n\t\t\t});\n\t\t\toffsetExtraField += 4 + size;\n\t\t}\n\t} catch (error) {\n\t\t// ignored\n\t}\n\tconst compressionMethod = getUint16(dataView, offset + 4);\n\tdirectory.signature = getUint32(dataView, offset + 10);\n\tdirectory.uncompressedSize = getUint32(dataView, offset + 18);\n\tdirectory.compressedSize = getUint32(dataView, offset + 14);\n\tconst extraFieldZip64 = directory.extraFieldZip64 = extraField.get(EXTRAFIELD_TYPE_ZIP64);\n\tif (extraFieldZip64) {\n\t\treadExtraFieldZip64(extraFieldZip64, directory);\n\t}\n\tconst extraFieldUnicodePath = directory.extraFieldUnicodePath = extraField.get(EXTRAFIELD_TYPE_UNICODE_PATH);\n\tif (extraFieldUnicodePath) {\n\t\treadExtraFieldUnicode(extraFieldUnicodePath, \"filename\", \"rawFilename\", directory, fileEntry);\n\t}\n\tlet extraFieldUnicodeComment = directory.extraFieldUnicodeComment = extraField.get(EXTRAFIELD_TYPE_UNICODE_COMMENT);\n\tif (extraFieldUnicodeComment) {\n\t\treadExtraFieldUnicode(extraFieldUnicodeComment, \"comment\", \"rawComment\", directory, fileEntry);\n\t}\n\tconst extraFieldAES = directory.extraFieldAES = extraField.get(EXTRAFIELD_TYPE_AES);\n\tif (extraFieldAES) {\n\t\treadExtraFieldAES(extraFieldAES, directory, compressionMethod);\n\t} else {\n\t\tdirectory.compressionMethod = compressionMethod;\n\t}\n\tif (directory.compressionMethod == COMPRESSION_METHOD_DEFLATE) {\n\t\tdirectory.bitFlag.enhancedDeflating = (directory.rawBitFlag & BITFLAG_ENHANCED_DEFLATING) != BITFLAG_ENHANCED_DEFLATING;\n\t}\n}\n\nfunction readExtraFieldZip64(extraFieldZip64, directory) {\n\tdirectory.zip64 = true;\n\tconst extraFieldView = new DataView(extraFieldZip64.data.buffer);\n\textraFieldZip64.values = [];\n\tfor (let indexValue = 0; indexValue < Math.floor(extraFieldZip64.data.length / 8); indexValue++) {\n\t\textraFieldZip64.values.push(Number(getBigUint64(extraFieldView, 0 + indexValue * 8)));\n\t}\n\tconst missingProperties = ZIP64_PROPERTIES.filter(propertyName => directory[propertyName] == MAX_32_BITS);\n\tfor (let indexMissingProperty = 0; indexMissingProperty < missingProperties.length; indexMissingProperty++) {\n\t\textraFieldZip64[missingProperties[indexMissingProperty]] = extraFieldZip64.values[indexMissingProperty];\n\t}\n\tZIP64_PROPERTIES.forEach(propertyName => {\n\t\tif (directory[propertyName] == MAX_32_BITS) {\n\t\t\tif (extraFieldZip64 && extraFieldZip64[propertyName] !== undefined) {\n\t\t\t\tdirectory[propertyName] = extraFieldZip64[propertyName];\n\t\t\t} else {\n\t\t\t\tthrow new Error(ERR_EXTRAFIELD_ZIP64_NOT_FOUND);\n\t\t\t}\n\t\t}\n\t});\n}\n\nfunction readExtraFieldUnicode(extraFieldUnicode, propertyName, rawPropertyName, directory, fileEntry) {\n\tconst extraFieldView = new DataView(extraFieldUnicode.data.buffer);\n\textraFieldUnicode.version = getUint8(extraFieldView, 0);\n\textraFieldUnicode.signature = getUint32(extraFieldView, 1);\n\tconst crc32 = new Crc32();\n\tcrc32.append(fileEntry[rawPropertyName]);\n\tconst dataViewSignature = new DataView(new Uint8Array(4).buffer);\n\tdataViewSignature.setUint32(0, crc32.get(), true);\n\textraFieldUnicode[propertyName] = (new TextDecoder()).decode(extraFieldUnicode.data.subarray(5));\n\textraFieldUnicode.valid = !fileEntry.bitFlag.languageEncodingFlag && extraFieldUnicode.signature == getUint32(dataViewSignature, 0);\n\tif (extraFieldUnicode.valid) {\n\t\tdirectory[propertyName] = extraFieldUnicode[propertyName];\n\t}\n}\n\nfunction readExtraFieldAES(extraFieldAES, directory, compressionMethod) {\n\tif (extraFieldAES) {\n\t\tconst extraFieldView = new DataView(extraFieldAES.data.buffer);\n\t\textraFieldAES.vendorVersion = getUint8(extraFieldView, 0);\n\t\textraFieldAES.vendorId = getUint8(extraFieldView, 2);\n\t\tconst strength = getUint8(extraFieldView, 4);\n\t\textraFieldAES.strength = strength;\n\t\textraFieldAES.originalCompressionMethod = compressionMethod;\n\t\tdirectory.compressionMethod = extraFieldAES.compressionMethod = getUint16(extraFieldView, 5);\n\t} else {\n\t\tdirectory.compressionMethod = compressionMethod;\n\t}\n}\n\nasync function seekSignature(reader, signature, minimumBytes, maximumLength) {\n\tconst signatureArray = new Uint8Array(4);\n\tconst signatureView = new DataView(signatureArray.buffer);\n\tsetUint32(signatureView, 0, signature);\n\tif (reader.size < minimumBytes) {\n\t\tthrow new Error(ERR_BAD_FORMAT);\n\t}\n\tconst maximumBytes = minimumBytes + maximumLength;\n\tlet offset = minimumBytes;\n\tlet dataInfo = await seek(offset);\n\tif (!dataInfo) {\n\t\tdataInfo = await seek(Math.min(maximumBytes, reader.size));\n\t}\n\treturn dataInfo;\n\n\tasync function seek(length) {\n\t\tconst offset = reader.size - length;\n\t\tconst bytes = await reader.readUint8Array(offset, length);\n\t\tfor (let indexByte = bytes.length - minimumBytes; indexByte >= 0; indexByte--) {\n\t\t\tif (bytes[indexByte] == signatureArray[0] && bytes[indexByte + 1] == signatureArray[1] &&\n\t\t\t\tbytes[indexByte + 2] == signatureArray[2] && bytes[indexByte + 3] == signatureArray[3]) {\n\t\t\t\treturn {\n\t\t\t\t\toffset,\n\t\t\t\t\tbuffer: bytes.slice(indexByte, indexByte + minimumBytes).buffer\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction decodeString(value, encoding) {\n\tif (!encoding || encoding.trim().toLowerCase() == \"cp437\") {\n\t\tlet result = \"\";\n\t\tfor (let indexCharacter = 0; indexCharacter < value.length; indexCharacter++) {\n\t\t\tresult += CP437[value[indexCharacter]];\n\t\t}\n\t\treturn result;\n\t} else {\n\t\treturn (new TextDecoder(encoding)).decode(value);\n\t}\n}\n\nfunction getDate(timeRaw) {\n\tconst date = (timeRaw & 0xffff0000) >> 16, time = timeRaw & 0x0000ffff;\n\ttry {\n\t\treturn new Date(1980 + ((date & 0xFE00) >> 9), ((date & 0x01E0) >> 5) - 1, date & 0x001F, (time & 0xF800) >> 11, (time & 0x07E0) >> 5, (time & 0x001F) * 2, 0);\n\t} catch (error) {\n\t\t// ignored\n\t}\n}\n\nfunction getUint8(view, offset) {\n\treturn view.getUint8(offset);\n}\n\nfunction getUint16(view, offset) {\n\treturn view.getUint16(offset, true);\n}\n\nfunction getUint32(view, offset) {\n\treturn view.getUint32(offset, true);\n}\n\nfunction getBigUint64(view, offset) {\n\treturn view.getBigUint64(offset, true);\n}\n\nfunction setUint32(view, offset, value) {\n\tview.setUint32(offset, value, true);\n}","/*\n Copyright (c) 2021 Gildas Lormeau. All rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are met:\n\n 1. Redistributions of source code must retain the above copyright notice,\n this list of conditions and the following disclaimer.\n\n 2. Redistributions in binary form must reproduce the above copyright \n notice, this list of conditions and the following disclaimer in \n the documentation and/or other materials provided with the distribution.\n\n 3. The names of the authors may not be used to endorse or promote products\n derived from this software without specific prior written permission.\n\n THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED WARRANTIES,\n INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL JCRAFT,\n INC. OR ANY CONTRIBUTORS TO THIS SOFTWARE BE LIABLE FOR ANY DIRECT, INDIRECT,\n INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA,\n OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,\n EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n\"use strict\";\n\nconst MAX_32_BITS = 0xffffffff;\nconst MAX_16_BITS = 0xffff;\nconst COMPRESSION_METHOD_DEFLATE = 0x08;\nconst COMPRESSION_METHOD_STORE = 0x00;\nconst COMPRESSION_METHOD_AES = 0x63;\n\nconst LOCAL_FILE_HEADER_SIGNATURE = 0x04034b50;\nconst DATA_DESCRIPTOR_RECORD_SIGNATURE = 0x08074b50;\nconst CENTRAL_FILE_HEADER_SIGNATURE = 0x02014b50;\nconst END_OF_CENTRAL_DIR_SIGNATURE = 0x06054b50;\nconst ZIP64_END_OF_CENTRAL_DIR_SIGNATURE = 0x06064b50;\nconst ZIP64_END_OF_CENTRAL_DIR_LOCATOR_SIGNATURE = 0x07064b50;\nconst END_OF_CENTRAL_DIR_LENGTH = 22;\nconst ZIP64_END_OF_CENTRAL_DIR_LOCATOR_LENGTH = 20;\nconst ZIP64_END_OF_CENTRAL_DIR_LENGTH = 56;\nconst ZIP64_END_OF_CENTRAL_DIR_TOTAL_LENGTH = END_OF_CENTRAL_DIR_LENGTH + ZIP64_END_OF_CENTRAL_DIR_LOCATOR_LENGTH + ZIP64_END_OF_CENTRAL_DIR_LENGTH;\n\nconst ZIP64_TOTAL_NUMBER_OF_DISKS = 1;\n\nconst EXTRAFIELD_TYPE_ZIP64 = 0x0001;\nconst EXTRAFIELD_TYPE_AES = 0x9901;\nconst EXTRAFIELD_TYPE_UNICODE_PATH = 0x7075;\nconst EXTRAFIELD_TYPE_UNICODE_COMMENT = 0x6375;\n\nconst BITFLAG_ENCRYPTED = 0x01;\nconst BITFLAG_LEVEL = 0x06;\nconst BITFLAG_DATA_DESCRIPTOR = 0x0008;\nconst BITFLAG_ENHANCED_DEFLATING = 0x0010;\nconst BITFLAG_LANG_ENCODING_FLAG = 0x0800;\nconst FILE_ATTR_MSDOS_DIR_MASK = 0x10;\n\nconst VERSION_DEFLATE = 0x14;\nconst VERSION_ZIP64 = 0x2D;\nconst VERSION_AES = 0x33;\n\nconst DIRECTORY_SIGNATURE = \"/\";\n\nexport {\n\tMAX_32_BITS,\n\tMAX_16_BITS,\n\tCOMPRESSION_METHOD_DEFLATE,\n\tCOMPRESSION_METHOD_STORE,\n\tCOMPRESSION_METHOD_AES,\n\tLOCAL_FILE_HEADER_SIGNATURE,\n\tDATA_DESCRIPTOR_RECORD_SIGNATURE,\n\tCENTRAL_FILE_HEADER_SIGNATURE,\n\tEND_OF_CENTRAL_DIR_SIGNATURE,\n\tZIP64_END_OF_CENTRAL_DIR_LOCATOR_SIGNATURE,\n\tZIP64_END_OF_CENTRAL_DIR_SIGNATURE,\n\tEXTRAFIELD_TYPE_ZIP64,\n\tEXTRAFIELD_TYPE_AES,\n\tEXTRAFIELD_TYPE_UNICODE_PATH,\n\tEXTRAFIELD_TYPE_UNICODE_COMMENT,\n\tEND_OF_CENTRAL_DIR_LENGTH,\n\tZIP64_END_OF_CENTRAL_DIR_LOCATOR_LENGTH,\n\tZIP64_END_OF_CENTRAL_DIR_LENGTH,\n\tZIP64_END_OF_CENTRAL_DIR_TOTAL_LENGTH,\n\tZIP64_TOTAL_NUMBER_OF_DISKS,\n\tBITFLAG_ENCRYPTED,\n\tBITFLAG_LEVEL,\n\tBITFLAG_DATA_DESCRIPTOR,\n\tBITFLAG_ENHANCED_DEFLATING,\n\tBITFLAG_LANG_ENCODING_FLAG,\n\tFILE_ATTR_MSDOS_DIR_MASK,\n\tVERSION_DEFLATE,\n\tVERSION_ZIP64,\n\tVERSION_AES,\n\tDIRECTORY_SIGNATURE\n};","/*\n Copyright (c) 2021 Gildas Lormeau. All rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are met:\n\n 1. Redistributions of source code must retain the above copyright notice,\n this list of conditions and the following disclaimer.\n\n 2. Redistributions in binary form must reproduce the above copyright \n notice, this list of conditions and the following disclaimer in \n the documentation and/or other materials provided with the distribution.\n\n 3. The names of the authors may not be used to endorse or promote products\n derived from this software without specific prior written permission.\n\n THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED WARRANTIES,\n INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL JCRAFT,\n INC. OR ANY CONTRIBUTORS TO THIS SOFTWARE BE LIABLE FOR ANY DIRECT, INDIRECT,\n INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA,\n OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,\n EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n/* global Blob, FileReader, atob, btoa, XMLHttpRequest, document */\n\n\"use strict\";\n\nconst ERR_HTTP_STATUS = \"HTTP error \";\nconst ERR_HTTP_RANGE = \"HTTP Range not supported\";\nconst TEXT_PLAIN = \"text/plain\";\n\nclass Stream {\n\n\tconstructor() {\n\t\tthis.size = 0;\n\t}\n\n\tinit() {\n\t\tthis.initialized = true;\n\t}\n}\nclass Reader extends Stream {\n}\n\nclass Writer extends Stream {\n\n\twriteUint8Array(array) {\n\t\tthis.size += array.length;\n\t}\n}\n\nclass TextReader extends Reader {\n\n\tconstructor(text) {\n\t\tsuper();\n\t\tthis.blobReader = new BlobReader(new Blob([text], { type: TEXT_PLAIN }));\n\t}\n\n\tinit() {\n\t\tsuper.init();\n\t\tthis.blobReader.init();\n\t\tthis.size = this.blobReader.size;\n\t}\n\n\treadUint8Array(offset, length) {\n\t\treturn this.blobReader.readUint8Array(offset, length);\n\t}\n}\n\nclass TextWriter extends Writer {\n\n\tconstructor(encoding) {\n\t\tsuper();\n\t\tthis.encoding = encoding;\n\t\tthis.blob = new Blob([], { type: TEXT_PLAIN });\n\t}\n\n\twriteUint8Array(array) {\n\t\tsuper.writeUint8Array(array);\n\t\tthis.blob = new Blob([this.blob, array.buffer], { type: TEXT_PLAIN });\n\t}\n\n\tgetData() {\n\t\tconst reader = new FileReader();\n\t\treturn new Promise((resolve, reject) => {\n\t\t\treader.onload = event => resolve(event.target.result);\n\t\t\treader.onerror = reject;\n\t\t\treader.readAsText(this.blob, this.encoding);\n\t\t});\n\t}\n}\n\nclass Data64URIReader extends Reader {\n\n\tconstructor(dataURI) {\n\t\tsuper();\n\t\tthis.dataURI = dataURI;\n\t\tlet dataEnd = dataURI.length;\n\t\twhile (dataURI.charAt(dataEnd - 1) == \"=\") {\n\t\t\tdataEnd--;\n\t\t}\n\t\tthis.dataStart = dataURI.indexOf(\",\") + 1;\n\t\tthis.size = Math.floor((dataEnd - this.dataStart) * 0.75);\n\t}\n\n\treadUint8Array(offset, length) {\n\t\tconst dataArray = new Uint8Array(length);\n\t\tconst start = Math.floor(offset / 3) * 4;\n\t\tconst bytes = atob(this.dataURI.substring(start + this.dataStart, Math.ceil((offset + length) / 3) * 4 + this.dataStart));\n\t\tconst delta = offset - Math.floor(start / 4) * 3;\n\t\tfor (let indexByte = delta; indexByte < delta + length; indexByte++) {\n\t\t\tdataArray[indexByte - delta] = bytes.charCodeAt(indexByte);\n\t\t}\n\t\treturn dataArray;\n\t}\n}\n\nclass Data64URIWriter extends Writer {\n\n\tconstructor(contentType) {\n\t\tsuper();\n\t\tthis.data = \"data:\" + (contentType || \"\") + \";base64,\";\n\t\tthis.pending = [];\n\t}\n\n\twriteUint8Array(array) {\n\t\tsuper.writeUint8Array(array);\n\t\tlet indexArray = 0, dataString = this.pending;\n\t\tconst delta = this.pending.length;\n\t\tthis.pending = \"\";\n\t\tfor (indexArray = 0; indexArray < (Math.floor((delta + array.length) / 3) * 3) - delta; indexArray++) {\n\t\t\tdataString += String.fromCharCode(array[indexArray]);\n\t\t}\n\t\tfor (; indexArray < array.length; indexArray++) {\n\t\t\tthis.pending += String.fromCharCode(array[indexArray]);\n\t\t}\n\t\tif (dataString.length > 2) {\n\t\t\tthis.data += btoa(dataString);\n\t\t} else {\n\t\t\tthis.pending = dataString;\n\t\t}\n\t}\n\n\tgetData() {\n\t\treturn this.data + btoa(this.pending);\n\t}\n}\n\nclass BlobReader extends Reader {\n\n\tconstructor(blob) {\n\t\tsuper();\n\t\tthis.blob = blob;\n\t\tthis.size = blob.size;\n\t}\n\n\treadUint8Array(offset, length) {\n\t\tconst reader = new FileReader();\n\t\treturn new Promise((resolve, reject) => {\n\t\t\treader.onload = event => resolve(new Uint8Array(event.target.result));\n\t\t\treader.onerror = reject;\n\t\t\treader.readAsArrayBuffer(this.blob.slice(offset, offset + length));\n\t\t});\n\t}\n}\n\nclass BlobWriter extends Writer {\n\n\tconstructor(contentType) {\n\t\tsuper();\n\t\tthis.offset = 0;\n\t\tthis.contentType = contentType;\n\t\tthis.blob = new Blob([], { type: contentType });\n\t}\n\n\twriteUint8Array(array) {\n\t\tsuper.writeUint8Array(array);\n\t\tthis.blob = new Blob([this.blob, array.buffer], { type: this.contentType });\n\t\tthis.offset = this.blob.size;\n\t}\n\n\tgetData() {\n\t\treturn this.blob;\n\t}\n}\n\nclass HttpReader extends Reader {\n\n\tconstructor(url) {\n\t\tsuper();\n\t\tthis.url = url;\n\t}\n\n\tasync init() {\n\t\tsuper.init();\n\t\tif (isHttpFamily(this.url)) {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tconst request = new XMLHttpRequest();\n\t\t\t\trequest.addEventListener(\"load\", () => {\n\t\t\t\t\tif (request.status < 400) {\n\t\t\t\t\t\tthis.size = Number(request.getResponseHeader(\"Content-Length\"));\n\t\t\t\t\t\tif (!this.size) {\n\t\t\t\t\t\t\tgetData().then(() => resolve()).catch(reject);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\treject(ERR_HTTP_STATUS + (request.statusText || request.status) + \".\");\n\t\t\t\t\t}\n\t\t\t\t}, false);\n\t\t\t\trequest.addEventListener(\"error\", reject, false);\n\t\t\t\trequest.open(\"HEAD\", this.url);\n\t\t\t\trequest.send();\n\t\t\t});\n\t\t} else {\n\t\t\tawait getData();\n\t\t}\n\t}\n\n\tasync readUint8Array(index, length) {\n\t\tif (!this.data) {\n\t\t\tawait getData(this, this.url);\n\t\t}\n\t\treturn new Uint8Array(this.data.subarray(index, index + length));\n\t}\n}\n\nclass HttpRangeReader extends Reader {\n\n\tconstructor(url) {\n\t\tsuper();\n\t\tthis.url = url;\n\t}\n\n\tinit() {\n\t\tsuper.init();\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst request = new XMLHttpRequest();\n\t\t\trequest.addEventListener(\"load\", () => {\n\t\t\t\tif (request.status < 400) {\n\t\t\t\t\tthis.size = Number(request.getResponseHeader(\"Content-Length\"));\n\t\t\t\t\tif (request.getResponseHeader(\"Accept-Ranges\") == \"bytes\") {\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t} else {\n\t\t\t\t\t\treject(new Error(ERR_HTTP_RANGE));\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\treject(ERR_HTTP_STATUS + (request.statusText || request.status) + \".\");\n\t\t\t\t}\n\t\t\t}, false);\n\t\t\trequest.addEventListener(\"error\", reject, false);\n\t\t\trequest.open(\"HEAD\", this.url);\n\t\t\trequest.send();\n\t\t});\n\t}\n\n\treadUint8Array(index, length) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst request = new XMLHttpRequest();\n\t\t\trequest.open(\"GET\", this.url);\n\t\t\trequest.responseType = \"arraybuffer\";\n\t\t\trequest.setRequestHeader(\"Range\", \"bytes=\" + index + \"-\" + (index + length - 1));\n\t\t\trequest.addEventListener(\"load\", () => {\n\t\t\t\tif (request.status < 400) {\n\t\t\t\t\tresolve(new Uint8Array(request.response));\n\t\t\t\t} else {\n\t\t\t\t\treject(ERR_HTTP_STATUS + (request.statusText || request.status) + \".\");\n\t\t\t\t}\n\t\t\t}, false);\n\t\t\trequest.addEventListener(\"error\", reject, false);\n\t\t\trequest.send();\n\t\t});\n\t}\n}\n\nclass Uint8ArrayReader extends Reader {\n\n\tconstructor(array) {\n\t\tsuper();\n\t\tthis.array = array;\n\t\tthis.size = array.length;\n\t}\n\n\treadUint8Array(index, length) {\n\t\treturn this.array.slice(index, index + length);\n\t}\n}\n\nclass Uint8ArrayWriter extends Writer {\n\n\tconstructor() {\n\t\tsuper();\n\t\tthis.array = new Uint8Array(0);\n\t}\n\n\twriteUint8Array(array) {\n\t\tsuper.writeUint8Array(array);\n\t\tconst previousArray = this.array;\n\t\tthis.array = new Uint8Array(previousArray.length + array.length);\n\t\tthis.array.set(previousArray);\n\t\tthis.array.set(array, previousArray.length);\n\t}\n\n\tgetData() {\n\t\treturn this.array;\n\t}\n}\n\nfunction isHttpFamily(url) {\n\tif (typeof document != \"undefined\") {\n\t\tconst anchor = document.createElement(\"a\");\n\t\tanchor.href = url;\n\t\treturn anchor.protocol == \"http:\" || anchor.protocol == \"https:\";\n\t} else {\n\t\treturn /^https?:\\/\\//i.test(url);\n\t}\n}\n\nfunction getData(httpReader, url) {\n\treturn new Promise((resolve, reject) => {\n\t\tconst request = new XMLHttpRequest();\n\t\trequest.addEventListener(\"load\", () => {\n\t\t\tif (request.status < 400) {\n\t\t\t\tif (!httpReader.size) {\n\t\t\t\t\thttpReader.size = Number(request.getResponseHeader(\"Content-Length\")) || Number(request.response.byteLength);\n\t\t\t\t}\n\t\t\t\thttpReader.data = new Uint8Array(request.response);\n\t\t\t\tresolve();\n\t\t\t} else {\n\t\t\t\treject(ERR_HTTP_STATUS + (request.statusText || request.status) + \".\");\n\t\t\t}\n\t\t}, false);\n\t\trequest.addEventListener(\"error\", reject, false);\n\t\trequest.open(\"GET\", url);\n\t\trequest.responseType = \"arraybuffer\";\n\t\trequest.send();\n\t});\n}\n\nexport {\n\tReader,\n\tWriter,\n\tTextReader,\n\tTextWriter,\n\tData64URIReader,\n\tData64URIWriter,\n\tBlobReader,\n\tBlobWriter,\n\tHttpReader,\n\tHttpRangeReader,\n\tUint8ArrayWriter,\n\tUint8ArrayReader,\n\tERR_HTTP_RANGE\n};","/*\n Copyright (c) 2021 Gildas Lormeau. All rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are met:\n\n 1. Redistributions of source code must retain the above copyright notice,\n this list of conditions and the following disclaimer.\n\n 2. Redistributions in binary form must reproduce the above copyright \n notice, this list of conditions and the following disclaimer in \n the documentation and/or other materials provided with the distribution.\n\n 3. The names of the authors may not be used to endorse or promote products\n derived from this software without specific prior written permission.\n\n THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED WARRANTIES,\n INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL JCRAFT,\n INC. OR ANY CONTRIBUTORS TO THIS SOFTWARE BE LIABLE FOR ANY DIRECT, INDIRECT,\n INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA,\n OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,\n EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n/* global navigator */\n\n\"use strict\";\n\nimport { default as initShimAsyncCodec } from \"./util/stream-codec-shim.js\";\nimport { ZipReader as BaseZipReader } from \"./zip-reader.js\";\nimport { ZipWriter as BaseZipWriter } from \"./zip-writer.js\";\n\nconst DEFAULT_CONFIGURATION = {\n\tchunkSize: 512 * 1024,\n\tmaxWorkers: (typeof navigator != \"undefined\" && navigator.hardwareConcurrency) || 2,\n\tworkerScriptsPath: undefined,\n\tuseWebWorkers: true\n};\n\nlet config = Object.assign({}, DEFAULT_CONFIGURATION);\n\nclass ZipReader extends BaseZipReader {\n\n\tconstructor(reader, options) {\n\t\tsuper(reader, options, config);\n\t}\n}\n\nclass ZipWriter extends BaseZipWriter {\n\n\tconstructor(writer, options) {\n\t\tsuper(writer, options, config);\n\t}\n}\n\nexport * from \"./stream.js\";\nexport {\n\tERR_BAD_FORMAT,\n\tERR_EOCDR_NOT_FOUND,\n\tERR_EOCDR_ZIP64_NOT_FOUND,\n\tERR_EOCDR_LOCATOR_ZIP64_NOT_FOUND,\n\tERR_CENTRAL_DIRECTORY_NOT_FOUND,\n\tERR_LOCAL_FILE_HEADER_NOT_FOUND,\n\tERR_EXTRAFIELD_ZIP64_NOT_FOUND,\n\tERR_ENCRYPTED,\n\tERR_UNSUPPORTED_ENCRYPTION,\n\tERR_UNSUPPORTED_COMPRESSION,\n\tERR_INVALID_SIGNATURE,\n\tERR_INVALID_PASSORD\n} from \"./zip-reader.js\";\nexport {\n\tERR_DUPLICATED_NAME,\n\tERR_INVALID_COMMENT,\n\tERR_INVALID_ENTRY_NAME,\n\tERR_INVALID_ENTRY_COMMENT,\n\tERR_INVALID_VERSION,\n\tERR_INVALID_DATE,\n\tERR_INVALID_EXTRAFIELD_TYPE,\n\tERR_INVALID_EXTRAFIELD_DATA\n} from \"./zip-writer.js\";\nexport {\n\tconfigure,\n\tinitShimAsyncCodec,\n\tgetMimeType,\n\tZipReader,\n\tZipWriter\n};\n\nfunction configure(configuration) {\n\tconfig = Object.assign({}, config, configuration);\n\tif (config.workerScripts != null && config.workerScriptsPath != null) {\n\t\tthrow new Error(\"Either workerScripts or workerScriptsPath may be set, not both\");\n\t}\n\tif (config.workerScripts) {\n\t\tif (config.workerScripts.deflate && !Array.isArray(config.workerScripts.deflate)) {\n\t\t\tthrow new Error(\"workerScripts.deflate must be an array\");\n\t\t}\n\t\tif (config.workerScripts.inflate && !Array.isArray(config.workerScripts.inflate)) {\n\t\t\tthrow new Error(\"workerScripts.inflate must be an array\");\n\t\t}\n\t}\n}\n\nfunction getMimeType() {\n\treturn \"application/octet-stream\";\n}","import * as common from \"./common.js\";\nimport { ZipReader, BlobReader, BlobWriter, TextWriter } from \"@zip.js/zip.js\";\nimport { FastbootError } from \"./fastboot.js\";\n\n// Images needed for fastbootd\nconst BOOT_CRITICAL_IMAGES = [\n    \"boot\",\n    \"vendor_boot\",\n    \"dtbo\",\n    \"dt\",\n    \"vbmeta\",\n    \"vbmeta_system\",\n];\n\n// Less critical images to flash after boot-critical ones\nconst SYSTEM_IMAGES = [\"odm\", \"product\", \"system\", \"system_ext\", \"vendor\"];\n\n/**\n * User-friendly action strings for factory image flashing progress.\n * This can be indexed by the action argument in FactoryFlashCallback.\n */\nexport const USER_ACTION_MAP = {\n    load: \"Loading\",\n    unpack: \"Unpacking\",\n    flash: \"Writing\",\n    wipe: \"Wiping\",\n    reboot: \"Restarting\",\n};\n\nconst BOOTLOADER_REBOOT_TIME = 4000; // ms\nconst FASTBOOTD_REBOOT_TIME = 16000; // ms\nconst USERDATA_ERASE_TIME = 1000; // ms\n\n// Wrapper for Entry#getData() to unwrap ProgressEvent errors\nasync function zipGetData(entry, writer, options = undefined) {\n    try {\n        return await entry.getData(writer, options);\n    } catch (e) {\n        if (e instanceof ProgressEvent && e.type === \"error\") {\n            throw e.target.error;\n        } else {\n            throw e;\n        }\n    }\n}\n\nasync function flashEntryBlob(device, entry, onProgress, partition) {\n    common.logDebug(`Unpacking ${partition}`);\n    onProgress(\"unpack\", partition, 0.0);\n    let blob = await zipGetData(\n        entry,\n        new BlobWriter(\"application/octet-stream\"),\n        {\n            onprogress: (bytes, len) => {\n                onProgress(\"unpack\", partition, bytes / len);\n            },\n        }\n    );\n\n    common.logDebug(`Flashing ${partition}`);\n    onProgress(\"flash\", partition, 0.0);\n    await device.flashBlob(partition, blob, (progress) => {\n        onProgress(\"flash\", partition, progress);\n    });\n}\n\nasync function tryFlashImages(device, entries, onProgress, imageNames) {\n    for (let imageName of imageNames) {\n        let pattern = new RegExp(`${imageName}(?:-.+)?\\\\.img$`);\n        let entry = entries.find((entry) => entry.filename.match(pattern));\n        if (entry !== undefined) {\n            await flashEntryBlob(device, entry, onProgress, imageName);\n        }\n    }\n}\n\nasync function checkRequirements(device, androidInfo) {\n    // Deal with CRLF just in case\n    for (let line of androidInfo.replace(\"\\r\", \"\").split(\"\\n\")) {\n        let match = line.match(/^require\\s+(.+?)=(.+)$/);\n        if (!match) {\n            continue;\n        }\n\n        let variable = match[1];\n        // Historical mismatch that we still need to deal with\n        if (variable === \"board\") {\n            variable = \"product\";\n        }\n\n        let expectValue = match[2];\n        let expectValues = expectValue.split(\"|\");\n\n        // Special case: not a real variable at all\n        if (variable === \"partition-exists\") {\n            // Check whether the partition exists on the device:\n            // has-slot = undefined || FAIL => doesn't exist\n            // has-slot = yes || no         => exists\n            let hasSlot = await device.getVariable(`has-slot:${expectValue}`);\n            if (hasSlot !== \"yes\" && hasSlot !== \"no\") {\n                throw new FastbootError(\n                    \"FAIL\",\n                    `Requirement ${variable}=${expectValue} failed, device lacks partition`\n                );\n            }\n\n            // Check whether we recognize the partition\n            if (\n                !BOOT_CRITICAL_IMAGES.includes(expectValue) &&\n                !SYSTEM_IMAGES.includes(expectValue)\n            ) {\n                throw new FastbootError(\n                    \"FAIL\",\n                    `Requirement ${variable}=${expectValue} failed, unrecognized partition`\n                );\n            }\n        } else {\n            let realValue = await device.getVariable(variable);\n\n            if (expectValues.includes(realValue)) {\n                common.logDebug(\n                    `Requirement ${variable}=${expectValue} passed`\n                );\n            } else {\n                let msg = `Requirement ${variable}=${expectValue} failed, value = ${realValue}`;\n                common.logDebug(msg);\n                throw new FastbootError(\"FAIL\", msg);\n            }\n        }\n    }\n}\n\nasync function tryReboot(device, target, onReconnect) {\n    try {\n        await device.reboot(target, false);\n    } catch (e) {\n        /* Failed = device rebooted by itself */\n    }\n\n    await device.waitForConnect(onReconnect);\n}\n\nexport async function flashZip(\n    device,\n    blob,\n    wipe,\n    onReconnect,\n    onProgress = () => {}\n) {\n    onProgress(\"load\", \"package\", 0.0);\n    let reader = new ZipReader(new BlobReader(blob));\n    let entries = await reader.getEntries();\n\n    // Bootloader and radio packs can only be flashed in the bare-metal bootloader\n    if ((await device.getVariable(\"is-userspace\")) === \"yes\") {\n        await device.reboot(\"bootloader\", true, onReconnect);\n    }\n\n    // 1. Bootloader pack\n    await tryFlashImages(device, entries, onProgress, [\"bootloader\"]);\n    await common.runWithTimedProgress(\n        onProgress,\n        \"reboot\",\n        \"device\",\n        BOOTLOADER_REBOOT_TIME,\n        tryReboot(device, \"bootloader\", onReconnect)\n    );\n\n    // 2. Radio pack\n    await tryFlashImages(device, entries, onProgress, [\"radio\"]);\n    await common.runWithTimedProgress(\n        onProgress,\n        \"reboot\",\n        \"device\",\n        BOOTLOADER_REBOOT_TIME,\n        tryReboot(device, \"bootloader\", onReconnect)\n    );\n\n    // Cancel snapshot update if in progress\n    let snapshotStatus = await device.getVariable(\"snapshot-update-status\");\n    if (snapshotStatus !== undefined && snapshotStatus !== \"none\") {\n        await device.runCommand(\"snapshot-update:cancel\");\n    }\n\n    // Load nested images for the following steps\n    common.logDebug(\"Loading nested images from zip\");\n    onProgress(\"unpack\", \"images\", 0.0);\n    let entry = entries.find((e) => e.filename.match(/image-.+\\.zip$/));\n    let imagesBlob = await zipGetData(\n        entry,\n        new BlobWriter(\"application/zip\"),\n        {\n            onprogress: (bytes, len) => {\n                onProgress(\"unpack\", \"images\", bytes / len);\n            },\n        }\n    );\n    let imageReader = new ZipReader(new BlobReader(imagesBlob));\n    let imageEntries = await imageReader.getEntries();\n\n    // 3. Check requirements\n    entry = imageEntries.find((e) => e.filename === \"android-info.txt\");\n    if (entry !== undefined) {\n        let reqText = await zipGetData(entry, new TextWriter());\n        await checkRequirements(device, reqText);\n    }\n\n    // 4. Boot-critical images\n    await tryFlashImages(\n        device,\n        imageEntries,\n        onProgress,\n        BOOT_CRITICAL_IMAGES\n    );\n\n    // 5. Super partition template\n    // This is also where we reboot to fastbootd.\n    entry = imageEntries.find((e) => e.filename === \"super_empty.img\");\n    if (entry !== undefined) {\n        await common.runWithTimedProgress(\n            onProgress,\n            \"reboot\",\n            \"device\",\n            FASTBOOTD_REBOOT_TIME,\n            device.reboot(\"fastboot\", true, onReconnect)\n        );\n\n        let superName = await device.getVariable(\"super-partition-name\");\n        if (!superName) {\n            superName = \"super\";\n        }\n\n        let superAction = wipe ? \"wipe\" : \"flash\";\n        onProgress(superAction, \"super\", 0.0);\n        let superBlob = await zipGetData(\n            entry,\n            new BlobWriter(\"application/octet-stream\")\n        );\n        await device.upload(\n            superName,\n            await common.readBlobAsBuffer(superBlob),\n            (progress) => {\n                onProgress(superAction, \"super\", progress);\n            }\n        );\n        await device.runCommand(\n            `update-super:${superName}${wipe ? \":wipe\" : \"\"}`\n        );\n    }\n\n    // 6. Remaining system images\n    await tryFlashImages(device, imageEntries, onProgress, SYSTEM_IMAGES);\n\n    // We unconditionally reboot back to the bootloader here if we're in fastbootd,\n    // even when there's no custom AVB key, because common follow-up actions like\n    // locking the bootloader and wiping data need to be done in the bootloader.\n    if ((await device.getVariable(\"is-userspace\")) === \"yes\") {\n        await common.runWithTimedProgress(\n            onProgress,\n            \"reboot\",\n            \"device\",\n            BOOTLOADER_REBOOT_TIME,\n            device.reboot(\"bootloader\", true, onReconnect)\n        );\n    }\n\n    // 7. Custom AVB key\n    entry = entries.find((e) => e.filename.endsWith(\"avb_pkmd.bin\"));\n    if (entry !== undefined) {\n        await device.runCommand(\"erase:avb_custom_key\");\n        await flashEntryBlob(device, entry, onProgress, \"avb_custom_key\");\n    }\n\n    // 8. Wipe userdata\n    if (wipe) {\n        await common.runWithTimedProgress(\n            onProgress,\n            \"wipe\",\n            \"data\",\n            USERDATA_ERASE_TIME,\n            device.runCommand(\"erase:userdata\")\n        );\n    }\n}\n","import * as Sparse from \"./sparse.js\";\nimport * as common from \"./common.js\";\nimport { flashZip as flashFactoryZip } from \"./factory.js\";\n\nconst FASTBOOT_USB_CLASS = 0xff;\nconst FASTBOOT_USB_SUBCLASS = 0x42;\nconst FASTBOOT_USB_PROTOCOL = 0x03;\n\nconst BULK_TRANSFER_SIZE = 16384;\n\nconst DEFAULT_DOWNLOAD_SIZE = 512 * 1024 * 1024; // 512 MiB\n// To conserve RAM and work around Chromium's ~2 GiB size limit, we limit the\n// max download size even if the bootloader can accept more data.\nconst MAX_DOWNLOAD_SIZE = 1024 * 1024 * 1024; // 1 GiB\n\nconst GETVAR_TIMEOUT = 2500; // ms\n\n/**\n * Exception class for USB errors not directly thrown by WebUSB.\n */\nexport class UsbError extends Error {\n    constructor(message) {\n        super(message);\n        this.name = \"UsbError\";\n    }\n}\n\n/**\n * Exception class for errors returned by the bootloader, as well as high-level\n * fastboot errors resulting from bootloader responses.\n */\nexport class FastbootError extends Error {\n    constructor(status, message) {\n        super(`Bootloader replied with ${status}: ${message}`);\n        this.status = status;\n        this.bootloaderMessage = message;\n        this.name = \"FastbootError\";\n    }\n}\n\n/**\n * This class is a client for executing fastboot commands and operations on a\n * device connected over USB.\n */\nexport class FastbootDevice {\n    /**\n     * Create a new fastboot device instance. This doesn't actually connect to\n     * any USB devices; call {@link connect} to do so.\n     */\n    constructor() {\n        this.device = null;\n        this._registeredUsbListeners = false;\n        this._connectResolve = null;\n        this._connectReject = null;\n        this._disconnectResolve = null;\n    }\n\n    /**\n     * Returns whether a USB device is connected and ready for use.\n     */\n    get isConnected() {\n        return (\n            this.device !== null &&\n            this.device.opened &&\n            this.device.configurations[0].interfaces[0].claimed\n        );\n    }\n\n    /**\n     * Validate the current USB device's details and connect to it.\n     *\n     * @private\n     */\n    async _validateAndConnectDevice(rethrowErrors) {\n        // Validate device\n        let ife = this.device.configurations[0].interfaces[0].alternates[0];\n        if (ife.endpoints.length !== 2) {\n            throw new UsbError(\"Interface has wrong number of endpoints\");\n        }\n\n        let epIn = null;\n        let epOut = null;\n        for (let endpoint of ife.endpoints) {\n            common.logVerbose(\"Checking endpoint:\", endpoint);\n            if (endpoint.type !== \"bulk\") {\n                throw new UsbError(\"Interface endpoint is not bulk\");\n            }\n\n            if (endpoint.direction === \"in\") {\n                if (epIn === null) {\n                    epIn = endpoint.endpointNumber;\n                } else {\n                    throw new UsbError(\"Interface has multiple IN endpoints\");\n                }\n            } else if (endpoint.direction === \"out\") {\n                if (epOut === null) {\n                    epOut = endpoint.endpointNumber;\n                } else {\n                    throw new UsbError(\"Interface has multiple OUT endpoints\");\n                }\n            }\n        }\n        common.logVerbose(\"Endpoints: in =\", epIn, \", out =\", epOut);\n\n        try {\n            await this.device.open();\n            // Opportunistically reset to fix issues on some platforms\n            try {\n                await this.device.reset();\n            } catch (error) {\n                /* Failed = doesn't support reset */\n            }\n\n            await this.device.selectConfiguration(1);\n            await this.device.claimInterface(0); // fastboot\n        } catch (error) {\n            // Propagate exception from waitForConnect()\n            if (this._connectReject !== null) {\n                this._connectReject(error);\n                this._connectResolve = null;\n                this._connectReject = null;\n            }\n\n            if (rethrowErrors) {\n                throw error;\n            }\n        }\n\n        // Return from waitForConnect()\n        if (this._connectResolve !== null) {\n            this._connectResolve();\n            this._connectResolve = null;\n            this._connectReject = null;\n        }\n    }\n\n    /**\n     * Wait for the current USB device to disconnect, if it's still connected.\n     * Returns immediately if no device is connected.\n     */\n    async waitForDisconnect() {\n        if (this.device === null) {\n            return;\n        }\n\n        return await new Promise((resolve, _reject) => {\n            this._disconnectResolve = resolve;\n        });\n    }\n\n    /**\n     * Callback for reconnecting to the USB device.\n     * This is necessary because some platforms do not support automatic reconnection,\n     * and USB connection requests can only be triggered as the result of explicit\n     * user action.\n     *\n     * @callback ReconnectCallback\n     */\n\n    /**\n     * Wait for the USB device to connect. Returns at the next connection,\n     * regardless of whether the connected USB device matches the previous one.\n     *\n     * @param {ReconnectCallback} onReconnect - Callback to request device reconnection on Android.\n     */\n    async waitForConnect(onReconnect = () => {}) {\n        // On Android, we need to request the user to reconnect the device manually\n        // because there is no support for automatic reconnection.\n        if (navigator.userAgent.includes(\"Android\")) {\n            await this.waitForDisconnect();\n            onReconnect();\n        }\n\n        return await new Promise((resolve, reject) => {\n            this._connectResolve = resolve;\n            this._connectReject = reject;\n        });\n    }\n\n    /**\n     * Request the user to select a USB device and connect to it using the\n     * fastboot protocol.\n     *\n     * @throws {UsbError}\n     */\n    async connect() {\n        let devices = await navigator.usb.getDevices();\n        common.logDebug(\"Found paired USB devices:\", devices);\n        if (devices.length === 1) {\n            this.device = devices[0];\n        } else {\n            // If multiple paired devices are connected, request the user to\n            // select a specific one to reduce ambiguity. This is also necessary\n            // if no devices are already paired, i.e. first use.\n            common.logDebug(\n                \"No or multiple paired devices are connected, requesting one\"\n            );\n            this.device = await navigator.usb.requestDevice({\n                filters: [\n                    {\n                        classCode: FASTBOOT_USB_CLASS,\n                        subclassCode: FASTBOOT_USB_SUBCLASS,\n                        protocolCode: FASTBOOT_USB_PROTOCOL,\n                    },\n                ],\n            });\n        }\n        common.logDebug(\"Using USB device:\", this.device);\n\n        if (!this._registeredUsbListeners) {\n            navigator.usb.addEventListener(\"disconnect\", (event) => {\n                if (event.device === this.device) {\n                    common.logDebug(\"USB device disconnected\");\n                    if (this._disconnectResolve !== null) {\n                        this._disconnectResolve();\n                        this._disconnectResolve = null;\n                    }\n                }\n            });\n\n            navigator.usb.addEventListener(\"connect\", async (event) => {\n                common.logDebug(\"USB device connected\");\n                this.device = event.device;\n\n                // Check whether waitForConnect() is pending and save it for later\n                let hasPromiseReject = this._connectReject !== null;\n                try {\n                    await this._validateAndConnectDevice(false);\n                } catch (error) {\n                    // Only rethrow errors from the event handler if waitForConnect()\n                    // didn't already handle them\n                    if (!hasPromiseReject) {\n                        throw error;\n                    }\n                }\n            });\n\n            this._registeredUsbListeners = true;\n        }\n\n        await this._validateAndConnectDevice(true);\n    }\n\n    /**\n     * Read a raw command response from the bootloader.\n     *\n     * @private\n     * @returns {response} Object containing response text and data size, if any.\n     * @throws {FastbootError}\n     */\n    async _readResponse() {\n        let returnData = {\n            text: \"\",\n            dataSize: null,\n        };\n        let respStatus;\n        do {\n            let respPacket = await this.device.transferIn(0x01, 64);\n            let response = new TextDecoder().decode(respPacket.data);\n\n            respStatus = response.substring(0, 4);\n            let respMessage = response.substring(4);\n            common.logDebug(`Response: ${respStatus} ${respMessage}`);\n\n            if (respStatus === \"OKAY\") {\n                // OKAY = end of response for this command\n                returnData.text += respMessage;\n            } else if (respStatus === \"INFO\") {\n                // INFO = additional info line\n                returnData.text += respMessage + \"\\n\";\n            } else if (respStatus === \"DATA\") {\n                // DATA = hex string, but it's returned separately for safety\n                returnData.dataSize = respMessage;\n            } else {\n                // Assume FAIL or garbage data\n                throw new FastbootError(respStatus, respMessage);\n            }\n            // INFO means that more packets are coming\n        } while (respStatus === \"INFO\");\n\n        return returnData;\n    }\n\n    /**\n     * Send a textual command to the bootloader.\n     * This is in raw fastboot format, not AOSP fastboot syntax.\n     *\n     * @param {string} command - The command to send.\n     * @returns {response} Object containing response text and data size, if any.\n     * @throws {FastbootError}\n     */\n    async runCommand(command) {\n        // Command and response length is always 64 bytes regardless of protocol\n        if (command.length > 64) {\n            throw new RangeError();\n        }\n\n        // Send raw UTF-8 command\n        let cmdPacket = new TextEncoder(\"utf-8\").encode(command);\n        await this.device.transferOut(0x01, cmdPacket);\n        common.logDebug(\"Command:\", command);\n\n        return this._readResponse();\n    }\n\n    /**\n     * Read the value of a bootloader variable. Returns undefined if the variable\n     * does not exist.\n     *\n     * @param {string} varName - The name of the variable to get.\n     * @returns {value} Textual content of the variable.\n     * @throws {FastbootError}\n     */\n    async getVariable(varName) {\n        let resp;\n        try {\n            resp = (\n                await common.runWithTimeout(\n                    this.runCommand(`getvar:${varName}`),\n                    GETVAR_TIMEOUT\n                )\n            ).text;\n        } catch (error) {\n            // Some bootloaders return FAIL instead of empty responses, despite\n            // what the spec says. Normalize it here.\n            if (error instanceof FastbootError && error.status == \"FAIL\") {\n                resp = undefined;\n            } else {\n                throw error;\n            }\n        }\n\n        // Some bootloaders send whitespace around some variables.\n        // According to the spec, non-existent variables should return empty\n        // responses\n        return resp ? resp.trim() : undefined;\n    }\n\n    /**\n     * Get the maximum download size for a single payload, in bytes.\n     *\n     * @private\n     * @returns {downloadSize}\n     * @throws {FastbootError}\n     */\n    async _getDownloadSize() {\n        try {\n            let resp = (\n                await this.getVariable(\"max-download-size\")\n            ).toLowerCase();\n            if (resp) {\n                // AOSP fastboot requires hex\n                return Math.min(parseInt(resp, 16), MAX_DOWNLOAD_SIZE);\n            }\n        } catch (error) {\n            /* Failed = no value, fallthrough */\n        }\n\n        // FAIL or empty variable means no max, set a reasonable limit to conserve memory\n        return DEFAULT_DOWNLOAD_SIZE;\n    }\n\n    /**\n     * Callback for progress updates while flashing or uploading an image.\n     *\n     * @callback ProgressCallback\n     * @param {number} progress - Progress for the current action, between 0 and 1.\n     */\n\n    /**\n     * Send a raw data payload to the bootloader.\n     *\n     * @private\n     */\n    async _sendRawPayload(buffer, onProgress) {\n        let i = 0;\n        let remainingBytes = buffer.byteLength;\n        while (remainingBytes > 0) {\n            let chunk = buffer.slice(\n                i * BULK_TRANSFER_SIZE,\n                (i + 1) * BULK_TRANSFER_SIZE\n            );\n            if (i % 1000 === 0) {\n                common.logVerbose(\n                    `  Sending ${chunk.byteLength} bytes to endpoint, ${remainingBytes} remaining, i=${i}`\n                );\n            }\n            if (i % 10 === 0) {\n                onProgress(\n                    (buffer.byteLength - remainingBytes) / buffer.byteLength\n                );\n            }\n\n            await this.device.transferOut(0x01, chunk);\n\n            remainingBytes -= chunk.byteLength;\n            i += 1;\n        }\n\n        onProgress(1.0);\n    }\n\n    /**\n     * Upload a payload to the bootloader for further use, e.g. for flashing.\n     * Does not handle raw images, flashing, or splitting.\n     *\n     * @param {string} partition - Name of the partition the payload is intended for.\n     * @param {ArrayBuffer} buffer - Buffer containing the data to upload.\n     * @param {ProgressCallback} onProgress - Callback for upload progress updates.\n     * @throws {FastbootError}\n     */\n    async upload(partition, buffer, onProgress = () => {}) {\n        common.logDebug(\n            `Uploading single sparse to ${partition}: ${buffer.byteLength} bytes`\n        );\n\n        // Bootloader requires an 8-digit hex number\n        let xferHex = buffer.byteLength.toString(16).padStart(8, \"0\");\n        if (xferHex.length !== 8) {\n            throw new FastbootError(\n                \"FAIL\",\n                `Transfer size overflow: ${xferHex} is more than 8 digits`\n            );\n        }\n\n        // Check with the device and make sure size matches\n        let downloadResp = await this.runCommand(`download:${xferHex}`);\n        if (downloadResp.dataSize === null) {\n            throw new FastbootError(\n                \"FAIL\",\n                `Unexpected response to download command: ${downloadResp.text}`\n            );\n        }\n        let downloadSize = parseInt(downloadResp.dataSize, 16);\n        if (downloadSize !== buffer.byteLength) {\n            throw new FastbootError(\n                \"FAIL\",\n                `Bootloader wants ${buffer.byteLength} bytes, requested to send ${buffer.bytelength} bytes`\n            );\n        }\n\n        common.logDebug(`Sending payload: ${buffer.byteLength} bytes`);\n        await this._sendRawPayload(buffer, onProgress);\n\n        common.logDebug(\"Payload sent, waiting for response...\");\n        await this._readResponse();\n    }\n\n    /**\n     * Reboot to the given target, and optionally wait for the device to\n     * reconnect.\n     *\n     * @param {string} target - Where to reboot to, i.e. fastboot or bootloader.\n     * @param {boolean} wait - Whether to wait for the device to reconnect.\n     * @param {ReconnectCallback} onReconnect - Callback to request device reconnection, if wait is enabled.\n     */\n    async reboot(target = \"\", wait = false, onReconnect = () => {}) {\n        if (target.length > 0) {\n            await this.runCommand(`reboot-${target}`);\n        } else {\n            await this.runCommand(\"reboot\");\n        }\n\n        if (wait) {\n            await this.waitForConnect(onReconnect);\n        }\n    }\n\n    /**\n     * Flash the given Blob to the given partition on the device. Any image\n     * format supported by the bootloader is allowed, e.g. sparse or raw images.\n     * Large raw images will be converted to sparse images automatically, and\n     * large sparse images will be split and flashed in multiple passes\n     * depending on the bootloader's payload size limit.\n     *\n     * @param {string} partition - The name of the partition to flash.\n     * @param {Blob} blob - The Blob to retrieve data from.\n     * @param {ProgressCallback} onProgress - Callback for flashing progress updates.\n     * @throws {FastbootError}\n     */\n    async flashBlob(partition, blob, onProgress = () => {}) {\n        // Use current slot if partition is A/B\n        if ((await this.getVariable(`has-slot:${partition}`)) === \"yes\") {\n            partition += \"_\" + (await this.getVariable(\"current-slot\"));\n        }\n\n        let maxDlSize = await this._getDownloadSize();\n        let fileHeader = await common.readBlobAsBuffer(\n            blob.slice(0, Sparse.FILE_HEADER_SIZE)\n        );\n        let totalBytes = 0;\n        if (Sparse.isSparse(fileHeader)) {\n            let sparseHeader = Sparse.parseFileHeader(fileHeader);\n            totalBytes = sparseHeader.blocks * sparseHeader.blockSize;\n        } else {\n            totalBytes = blob.size;\n        }\n\n        // Logical partitions need to be resized before flashing because they're\n        // sized perfectly to the payload.\n        if ((await this.getVariable(`is-logical:${partition}`)) === \"yes\") {\n            // As per AOSP fastboot, we reset the partition to 0 bytes first\n            // to optimize extent allocation.\n            await this.runCommand(`resize-logical-partition:${partition}:0`);\n            // Set the actual size\n            await this.runCommand(\n                `resize-logical-partition:${partition}:${totalBytes}`\n            );\n        }\n\n        // Convert image to sparse (for splitting) if it exceeds the size limit\n        if (blob.size > maxDlSize && !Sparse.isSparse(fileHeader)) {\n            common.logDebug(`${partition} image is raw, converting to sparse`);\n\n            // Assume that non-sparse images will always be small enough to convert in RAM.\n            // The buffer is converted to a Blob for compatibility with the existing flashing code.\n            let rawData = await common.readBlobAsBuffer(blob);\n            let sparse = Sparse.fromRaw(rawData);\n            blob = new Blob([sparse]);\n        }\n\n        common.logDebug(\n            `Flashing ${blob.size} bytes to ${partition}, ${maxDlSize} bytes per split`\n        );\n        let splits = 0;\n        let sentBytes = 0;\n        for await (let split of Sparse.splitBlob(blob, maxDlSize)) {\n            await this.upload(partition, split.data, (progress) => {\n                onProgress((sentBytes + progress * split.bytes) / totalBytes);\n            });\n\n            common.logDebug(\"Flashing payload...\");\n            await this.runCommand(`flash:${partition}`);\n\n            splits += 1;\n            sentBytes += split.bytes;\n        }\n\n        common.logDebug(`Flashed ${partition} with ${splits} split(s)`);\n    }\n\n    /**\n     * Callback for reconnecting the USB device.\n     * This is necessary because some platforms do not support automatic reconnection,\n     * and USB connection requests can only be triggered as the result of explicit\n     * user action.\n     *\n     * @callback ReconnectCallback\n     */\n\n    /**\n     * Callback for factory image flashing progress.\n     *\n     * @callback FactoryFlashCallback\n     * @param {string} action - Action in the flashing process, e.g. unpack/flash.\n     * @param {string} item - Item processed by the action, e.g. partition being flashed.\n     * @param {number} progress - Progress within the current action between 0 and 1.\n     */\n\n    /**\n     * Flash the given factory images zip onto the device, with automatic handling\n     * of firmware, system, and logical partitions as AOSP fastboot and\n     * flash-all.sh would do.\n     * Equivalent to `fastboot update name.zip`.\n     *\n     * @param {FastbootDevice} device - Fastboot device to flash.\n     * @param {Blob} blob - Blob containing the zip file to flash.\n     * @param {boolean} wipe - Whether to wipe super and userdata. Equivalent to `fastboot -w`.\n     * @param {ReconnectCallback} onReconnect - Callback to request device reconnection.\n     * @param {FactoryFlashCallback} onProgress - Progress callback for image flashing.\n     */\n    async flashFactoryZip(blob, wipe, onReconnect, onProgress = () => {}) {\n        return await flashFactoryZip(this, blob, wipe, onReconnect, onProgress);\n    }\n}\n"],"names":["debugLevel","logDebug","data","console","log","logVerbose","setDebugLevel","level","readBlobAsBuffer","blob","Promise","resolve","reject","reader","FileReader","onload","result","onerror","error","readAsArrayBuffer","async","runWithTimedProgress","onProgress","action","item","duration","workPromise","startTime","Date","getTime","stop","progressPromise","now","targetTime","_reject","window","requestAnimationFrame","race","TimeoutError","Error","[object Object]","timeout","super","this","name","CHUNK_TYPE_MAP","Map","set","ImageError","message","parseFileHeader","buffer","view","DataView","getUint32","major","getUint16","minor","fileHdrSize","chunkHdrSize","blockSize","blocks","chunks","crc32","parseChunkHeader","type","get","dataBytes","calcChunksBlockSize","map","chunk","reduce","total","c","calcChunksSize","length","byteLength","calcChunksDataSize","createImage","header","ArrayBuffer","dataView","arrayView","Uint8Array","setUint32","setUint16","chunkOff","typeMagic","chunkArrayView","isSparse","table","application","andrew-inset","annodex","atom+xml","atomcat+xml","atomserv+xml","bbolin","cap","cu-seeme","davmount+xml","dsptype","ecmascript","futuresplash","hta","java-archive","java-serialized-object","java-vm","javascript","m3g","mac-binhex40","mathematica","msaccess","msword","mxf","oda","ogg","pdf","pgp-keys","pgp-signature","pics-rules","postscript","rar","rdf+xml","rss+xml","rtf","smil","xhtml+xml","xml","xspf+xml","zip","vnd.android.package-archive","vnd.cinderella","vnd.google-earth.kml+xml","vnd.google-earth.kmz","vnd.mozilla.xul+xml","vnd.ms-excel","vnd.ms-pki.seccat","vnd.ms-pki.stl","vnd.ms-powerpoint","vnd.oasis.opendocument.chart","vnd.oasis.opendocument.database","vnd.oasis.opendocument.formula","vnd.oasis.opendocument.graphics","vnd.oasis.opendocument.graphics-template","vnd.oasis.opendocument.image","vnd.oasis.opendocument.presentation","vnd.oasis.opendocument.presentation-template","vnd.oasis.opendocument.spreadsheet","vnd.oasis.opendocument.spreadsheet-template","vnd.oasis.opendocument.text","vnd.oasis.opendocument.text-master","vnd.oasis.opendocument.text-template","vnd.oasis.opendocument.text-web","vnd.openxmlformats-officedocument.spreadsheetml.sheet","vnd.openxmlformats-officedocument.spreadsheetml.template","vnd.openxmlformats-officedocument.presentationml.presentation","vnd.openxmlformats-officedocument.presentationml.slideshow","vnd.openxmlformats-officedocument.presentationml.template","vnd.openxmlformats-officedocument.wordprocessingml.document","vnd.openxmlformats-officedocument.wordprocessingml.template","vnd.smaf","vnd.stardivision.calc","vnd.stardivision.chart","vnd.stardivision.draw","vnd.stardivision.impress","vnd.stardivision.math","vnd.stardivision.writer","vnd.stardivision.writer-global","vnd.sun.xml.calc","vnd.sun.xml.calc.template","vnd.sun.xml.draw","vnd.sun.xml.draw.template","vnd.sun.xml.impress","vnd.sun.xml.impress.template","vnd.sun.xml.math","vnd.sun.xml.writer","vnd.sun.xml.writer.global","vnd.sun.xml.writer.template","vnd.symbian.install","vnd.visio","vnd.wap.wbxml","vnd.wap.wmlc","vnd.wap.wmlscriptc","vnd.wordperfect","vnd.wordperfect5.1","x-123","x-7z-compressed","x-abiword","x-apple-diskimage","x-bcpio","x-bittorrent","x-cbr","x-cbz","x-cdf","x-cdlink","x-chess-pgn","x-cpio","x-csh","x-debian-package","x-director","x-dms","x-doom","x-dvi","x-httpd-eruby","x-font","x-freemind","x-gnumeric","x-go-sgf","x-graphing-calculator","x-gtar","x-hdf","x-httpd-php","x-httpd-php-source","x-httpd-php3","x-httpd-php3-preprocessed","x-httpd-php4","x-httpd-php5","x-ica","x-info","x-internet-signup","x-iphone","x-iso9660-image","x-java-jnlp-file","x-jmol","x-killustrator","x-koan","x-kpresenter","x-kword","x-latex","x-lha","x-lyx","x-lzh","x-lzx","x-maker","x-ms-wmd","x-ms-wmz","x-msdos-program","x-msi","x-netcdf","x-ns-proxy-autoconfig","x-nwc","x-object","x-oz-application","x-pkcs7-certreqresp","x-python-code","x-qgis","x-quicktimeplayer","x-redhat-package-manager","x-ruby","x-sh","x-shar","x-shockwave-flash","x-silverlight","x-stuffit","x-sv4cpio","x-sv4crc","x-tar","x-tcl","x-tex-gf","x-tex-pk","x-texinfo","x-trash","x-troff","x-troff-man","x-troff-me","x-troff-ms","x-ustar","x-wais-source","x-wingz","x-x509-ca-cert","x-xcf","x-xfig","x-xpinstall","applixware","atomsvc+xml","ccxml+xml","cdmi-capability","cdmi-container","cdmi-domain","cdmi-object","cdmi-queue","docbook+xml","dssc+der","dssc+xml","emma+xml","epub+zip","exi","font-tdpfr","gml+xml","gpx+xml","gxf","hyperstudio","inkml+xml","ipfix","json","jsonml+json","lost+xml","mads+xml","marc","marcxml+xml","mathml+xml","mbox","mediaservercontrol+xml","metalink+xml","metalink4+xml","mets+xml","mods+xml","mp21","mp4","oebps-package+xml","omdoc+xml","onenote","oxps","patch-ops-error+xml","pgp-encrypted","pkcs10","pkcs7-mime","pkcs7-signature","pkcs8","pkix-attr-cert","pkix-crl","pkix-pkipath","pkixcmp","pls+xml","prs.cww","pskc+xml","reginfo+xml","relax-ng-compact-syntax","resource-lists+xml","resource-lists-diff+xml","rls-services+xml","rpki-ghostbusters","rpki-manifest","rpki-roa","rsd+xml","sbml+xml","scvp-cv-request","scvp-cv-response","scvp-vp-request","scvp-vp-response","sdp","set-payment-initiation","set-registration-initiation","shf+xml","sparql-query","sparql-results+xml","srgs","srgs+xml","sru+xml","ssdl+xml","ssml+xml","tei+xml","thraud+xml","timestamped-data","vnd.3gpp.pic-bw-large","vnd.3gpp.pic-bw-small","vnd.3gpp.pic-bw-var","vnd.3gpp2.tcap","vnd.3m.post-it-notes","vnd.accpac.simply.aso","vnd.accpac.simply.imp","vnd.acucobol","vnd.acucorp","vnd.adobe.air-application-installer-package+zip","vnd.adobe.formscentral.fcdt","vnd.adobe.fxp","vnd.adobe.xdp+xml","vnd.adobe.xfdf","vnd.ahead.space","vnd.airzip.filesecure.azf","vnd.airzip.filesecure.azs","vnd.amazon.ebook","vnd.americandynamics.acc","vnd.amiga.ami","vnd.anser-web-certificate-issue-initiation","vnd.anser-web-funds-transfer-initiation","vnd.antix.game-component","vnd.apple.installer+xml","vnd.apple.mpegurl","vnd.aristanetworks.swi","vnd.astraea-software.iota","vnd.audiograph","vnd.blueice.multipass","vnd.bmi","vnd.businessobjects","vnd.chemdraw+xml","vnd.chipnuts.karaoke-mmd","vnd.claymore","vnd.cloanto.rp9","vnd.clonk.c4group","vnd.cluetrust.cartomobile-config","vnd.cluetrust.cartomobile-config-pkg","vnd.commonspace","vnd.contact.cmsg","vnd.cosmocaller","vnd.crick.clicker","vnd.crick.clicker.keyboard","vnd.crick.clicker.palette","vnd.crick.clicker.template","vnd.crick.clicker.wordbank","vnd.criticaltools.wbs+xml","vnd.ctc-posml","vnd.cups-ppd","vnd.curl.car","vnd.curl.pcurl","vnd.dart","vnd.data-vision.rdz","vnd.dece.data","vnd.dece.ttml+xml","vnd.dece.unspecified","vnd.dece.zip","vnd.denovo.fcselayout-link","vnd.dna","vnd.dolby.mlp","vnd.dpgraph","vnd.dreamfactory","vnd.ds-keypoint","vnd.dvb.ait","vnd.dvb.service","vnd.dynageo","vnd.ecowin.chart","vnd.enliven","vnd.epson.esf","vnd.epson.msf","vnd.epson.quickanime","vnd.epson.salt","vnd.epson.ssf","vnd.eszigno3+xml","vnd.ezpix-album","vnd.ezpix-package","vnd.fdf","vnd.fdsn.mseed","vnd.fdsn.seed","vnd.flographit","vnd.fluxtime.clip","vnd.framemaker","vnd.frogans.fnc","vnd.frogans.ltf","vnd.fsc.weblaunch","vnd.fujitsu.oasys","vnd.fujitsu.oasys2","vnd.fujitsu.oasys3","vnd.fujitsu.oasysgp","vnd.fujitsu.oasysprs","vnd.fujixerox.ddd","vnd.fujixerox.docuworks","vnd.fujixerox.docuworks.binder","vnd.fuzzysheet","vnd.genomatix.tuxedo","vnd.geogebra.file","vnd.geogebra.tool","vnd.geometry-explorer","vnd.geonext","vnd.geoplan","vnd.geospace","vnd.gmx","vnd.grafeq","vnd.groove-account","vnd.groove-help","vnd.groove-identity-message","vnd.groove-injector","vnd.groove-tool-message","vnd.groove-tool-template","vnd.groove-vcard","vnd.hal+xml","vnd.handheld-entertainment+xml","vnd.hbci","vnd.hhe.lesson-player","vnd.hp-hpgl","vnd.hp-hpid","vnd.hp-hps","vnd.hp-jlyt","vnd.hp-pcl","vnd.hp-pclxl","vnd.hydrostatix.sof-data","vnd.ibm.minipay","vnd.ibm.modcap","vnd.ibm.rights-management","vnd.ibm.secure-container","vnd.iccprofile","vnd.igloader","vnd.immervision-ivp","vnd.immervision-ivu","vnd.insors.igm","vnd.intercon.formnet","vnd.intergeo","vnd.intu.qbo","vnd.intu.qfx","vnd.ipunplugged.rcprofile","vnd.irepository.package+xml","vnd.is-xpr","vnd.isac.fcs","vnd.jam","vnd.jcp.javame.midlet-rms","vnd.jisp","vnd.joost.joda-archive","vnd.kahootz","vnd.kde.karbon","vnd.kde.kchart","vnd.kde.kformula","vnd.kde.kivio","vnd.kde.kontour","vnd.kde.kpresenter","vnd.kde.kspread","vnd.kde.kword","vnd.kenameaapp","vnd.kidspiration","vnd.kinar","vnd.koan","vnd.kodak-descriptor","vnd.las.las+xml","vnd.llamagraphics.life-balance.desktop","vnd.llamagraphics.life-balance.exchange+xml","vnd.lotus-1-2-3","vnd.lotus-approach","vnd.lotus-freelance","vnd.lotus-notes","vnd.lotus-organizer","vnd.lotus-screencam","vnd.lotus-wordpro","vnd.macports.portpkg","vnd.mcd","vnd.medcalcdata","vnd.mediastation.cdkey","vnd.mfer","vnd.mfmp","vnd.micrografx.flo","vnd.micrografx.igx","vnd.mif","vnd.mobius.daf","vnd.mobius.dis","vnd.mobius.mbk","vnd.mobius.mqy","vnd.mobius.msl","vnd.mobius.plc","vnd.mobius.txf","vnd.mophun.application","vnd.mophun.certificate","vnd.ms-artgalry","vnd.ms-cab-compressed","vnd.ms-excel.addin.macroenabled.12","vnd.ms-excel.sheet.binary.macroenabled.12","vnd.ms-excel.sheet.macroenabled.12","vnd.ms-excel.template.macroenabled.12","vnd.ms-fontobject","vnd.ms-htmlhelp","vnd.ms-ims","vnd.ms-lrm","vnd.ms-officetheme","vnd.ms-powerpoint.addin.macroenabled.12","vnd.ms-powerpoint.presentation.macroenabled.12","vnd.ms-powerpoint.slide.macroenabled.12","vnd.ms-powerpoint.slideshow.macroenabled.12","vnd.ms-powerpoint.template.macroenabled.12","vnd.ms-project","vnd.ms-word.document.macroenabled.12","vnd.ms-word.template.macroenabled.12","vnd.ms-works","vnd.ms-wpl","vnd.ms-xpsdocument","vnd.mseq","vnd.musician","vnd.muvee.style","vnd.mynfc","vnd.neurolanguage.nlu","vnd.nitf","vnd.noblenet-directory","vnd.noblenet-sealer","vnd.noblenet-web","vnd.nokia.n-gage.data","vnd.nokia.n-gage.symbian.install","vnd.nokia.radio-preset","vnd.nokia.radio-presets","vnd.novadigm.edm","vnd.novadigm.edx","vnd.novadigm.ext","vnd.oasis.opendocument.chart-template","vnd.oasis.opendocument.formula-template","vnd.oasis.opendocument.image-template","vnd.olpc-sugar","vnd.oma.dd2+xml","vnd.openofficeorg.extension","vnd.openxmlformats-officedocument.presentationml.slide","vnd.osgeo.mapguide.package","vnd.osgi.dp","vnd.osgi.subsystem","vnd.palm","vnd.pawaafile","vnd.pg.format","vnd.pg.osasli","vnd.picsel","vnd.pmi.widget","vnd.pocketlearn","vnd.powerbuilder6","vnd.previewsystems.box","vnd.proteus.magazine","vnd.publishare-delta-tree","vnd.pvi.ptid1","vnd.quark.quarkxpress","vnd.realvnc.bed","vnd.recordare.musicxml","vnd.recordare.musicxml+xml","vnd.rig.cryptonote","vnd.rn-realmedia","vnd.rn-realmedia-vbr","vnd.route66.link66+xml","vnd.sailingtracker.track","vnd.seemail","vnd.sema","vnd.semd","vnd.semf","vnd.shana.informed.formdata","vnd.shana.informed.formtemplate","vnd.shana.informed.interchange","vnd.shana.informed.package","vnd.simtech-mindmapper","vnd.smart.teacher","vnd.solent.sdkm+xml","vnd.spotfire.dxp","vnd.spotfire.sfs","vnd.stepmania.package","vnd.stepmania.stepchart","vnd.sus-calendar","vnd.svd","vnd.syncml+xml","vnd.syncml.dm+wbxml","vnd.syncml.dm+xml","vnd.tao.intent-module-archive","vnd.tcpdump.pcap","vnd.tmobile-livetv","vnd.trid.tpt","vnd.triscape.mxs","vnd.trueapp","vnd.ufdl","vnd.uiq.theme","vnd.umajin","vnd.unity","vnd.uoml+xml","vnd.vcx","vnd.visionary","vnd.vsf","vnd.webturbo","vnd.wolfram.player","vnd.wqd","vnd.wt.stf","vnd.xara","vnd.xfdl","vnd.yamaha.hv-dic","vnd.yamaha.hv-script","vnd.yamaha.hv-voice","vnd.yamaha.openscoreformat","vnd.yamaha.openscoreformat.osfpvg+xml","vnd.yamaha.smaf-audio","vnd.yamaha.smaf-phrase","vnd.yellowriver-custom-menu","vnd.zul","vnd.zzazz.deck+xml","voicexml+xml","widget","winhlp","wsdl+xml","wspolicy+xml","x-ace-compressed","x-authorware-bin","x-authorware-map","x-authorware-seg","x-blorb","x-bzip","x-bzip2","x-cfs-compressed","x-chat","x-conference","x-dgc-compressed","x-dtbncx+xml","x-dtbook+xml","x-dtbresource+xml","x-eva","x-font-bdf","x-font-ghostscript","x-font-linux-psf","x-font-otf","x-font-pcf","x-font-snf","x-font-ttf","x-font-type1","x-font-woff","x-freearc","x-gca-compressed","x-glulx","x-gramps-xml","x-install-instructions","x-lzh-compressed","x-mie","x-mobipocket-ebook","x-ms-application","x-ms-shortcut","x-ms-xbap","x-msbinder","x-mscardfile","x-msclip","x-msdownload","x-msmediaview","x-msmetafile","x-msmoney","x-mspublisher","x-msschedule","x-msterminal","x-mswrite","x-nzb","x-pkcs12","x-pkcs7-certificates","x-research-info-systems","x-silverlight-app","x-sql","x-stuffitx","x-subrip","x-t3vm-image","x-tads","x-tex","x-tex-tfm","x-tgif","x-xliff+xml","x-xz","x-zmachine","xaml+xml","xcap-diff+xml","xenc+xml","xml-dtd","xop+xml","xproc+xml","xslt+xml","xv+xml","yang","yin+xml","envoy","fractals","internet-property-stream","olescript","vnd.ms-outlook","vnd.ms-pkicertstore","x-compress","x-compressed","x-gzip","x-perfmon","x-pkcs7-mime","ynd.ms-pkipko","audio","amr","amr-wb","basic","flac","midi","mpeg","mpegurl","prs.sid","x-aiff","x-gsm","x-ms-wma","x-ms-wax","x-pn-realaudio","x-realaudio","x-sd2","x-wav","adpcm","s3m","silk","vnd.dece.audio","vnd.digital-winds","vnd.dra","vnd.dts","vnd.dts.hd","vnd.lucent.voice","vnd.ms-playready.media.pya","vnd.nuera.ecelp4800","vnd.nuera.ecelp7470","vnd.nuera.ecelp9600","vnd.rip","webm","x-aac","x-caf","x-matroska","x-pn-realaudio-plugin","xm","mid","chemical","x-alchemy","x-cache","x-cache-csf","x-cactvs-binary","x-cdx","x-chem3d","x-cif","x-cmdf","x-cml","x-compass","x-crossfire","x-csml","x-ctx","x-cxf","x-embl-dl-nucleotide","x-gamess-input","x-gaussian-checkpoint","x-gaussian-cube","x-gaussian-input","x-gaussian-log","x-gcg8-sequence","x-genbank","x-hin","x-isostar","x-jcamp-dx","x-kinemage","x-macmolecule","x-macromodel-input","x-mdl-molfile","x-mdl-rdfile","x-mdl-rxnfile","x-mdl-sdfile","x-mdl-tgf","x-mmcif","x-mol2","x-molconn-Z","x-mopac-graph","x-mopac-input","x-mopac-out","x-ncbi-asn1","x-ncbi-asn1-ascii","x-ncbi-asn1-binary","x-pdb","x-rosdal","x-swissprot","x-vamas-iso14976","x-vmd","x-xtel","x-xyz","image","gif","ief","jpeg","pcx","png","svg+xml","tiff","vnd.djvu","vnd.wap.wbmp","x-canon-cr2","x-canon-crw","x-cmu-raster","x-coreldraw","x-coreldrawpattern","x-coreldrawtemplate","x-corelphotopaint","x-epson-erf","x-icon","x-jg","x-jng","x-nikon-nef","x-olympus-orf","x-photoshop","x-portable-anymap","x-portable-bitmap","x-portable-graymap","x-portable-pixmap","x-rgb","x-xbitmap","x-xpixmap","x-xwindowdump","bmp","cgm","g3fax","ktx","prs.btif","sgi","vnd.dece.graphic","vnd.dwg","vnd.dxf","vnd.fastbidsheet","vnd.fpx","vnd.fst","vnd.fujixerox.edmics-mmr","vnd.fujixerox.edmics-rlc","vnd.ms-modi","vnd.ms-photo","vnd.net-fpx","vnd.xiff","webp","x-3ds","x-cmx","x-freehand","x-pict","x-tga","cis-cod","pipeg","rfc822","model","iges","mesh","vrml","x3d+vrml","x3d+xml","x3d+binary","vnd.collada+xml","vnd.dwf","vnd.gdl","vnd.gtw","vnd.mts","vnd.vtu","text","cache-manifest","calendar","css","csv","h323","html","iuls","mathml","plain","richtext","scriptlet","texmacs","tab-separated-values","vnd.sun.j2me.app-descriptor","vnd.wap.wml","vnd.wap.wmlscript","x-bibtex","x-boo","x-c++hdr","x-c++src","x-component","x-dsrc","x-diff","x-haskell","x-java","x-literate-haskell","x-moc","x-pascal","x-pcs-gcd","x-perl","x-python","x-scala","x-setext","x-vcalendar","x-vcard","n3","prs.lines.tag","sgml","troff","turtle","uri-list","vcard","vnd.curl","vnd.curl.dcurl","vnd.curl.scurl","vnd.curl.mcurl","vnd.dvb.subtitle","vnd.fly","vnd.fmi.flexstor","vnd.graphviz","vnd.in3d.3dml","vnd.in3d.spot","x-asm","x-c","x-fortran","x-opml","x-nfo","x-sfv","x-uuencode","webviewhtml","video","avif","3gpp","dl","dv","fli","gl","quicktime","vnd.mpegurl","x-flv","x-la-asf","x-mng","x-ms-asf","x-ms-wm","x-ms-wmv","x-ms-wmx","x-ms-wvx","x-msvideo","x-sgi-movie","3gpp2","h261","h263","h264","jpm","mj2","vnd.dece.hd","vnd.dece.mobile","vnd.dece.pd","vnd.dece.sd","vnd.dece.video","vnd.dvb.file","vnd.fvt","vnd.ms-playready.media.pyv","vnd.uvvu.mp4","vnd.vivo","x-f4v","x-m4v","x-ms-vob","x-smv","x-cooltalk","x-world","x-vrml","mimeTypes","hasOwnProperty","subtype","value","indexMimeType","Crc32","crc","i","t","j","offset","PBKDF2_ALGORITHM","SIGNATURE_ALGORITHM","CRYPTO_KEY_ALGORITHM","BASE_KEY_ALGORITHM","Object","assign","hash","DERIVED_BITS_ALGORITHM","iterations","AUTHENTICATION_ALGORITHM","CRYPTO_ALGORITHM","DERIVED_BITS_USAGE","SIGN_USAGE","COUNTER_DEFAULT_VALUE","subtle","crypto","Decrypt","password","signed","input","pendingInput","decrypt","buferredInput","chunkToDecrypt","subarray","outputChunk","counter","keys","incrementCounter","output","concat","preambule","preambuleArray","salt","passwordVerification","encodedPassword","TextEncoder","encode","basekey","importKey","derivedBits","deriveBits","compositeKey","passwordVerificationKey","authentication","createDecryptionKeys","expand","originalSignatureArray","decryptedChunkArray","decryptedChunk","valid","signature","sign","signatureArray","indexSignature","Encrypt","encrypt","chunkToEncrypt","getRandomValues","createEncryptionKeys","encryptedChunkArray","encryptedChunk","indexCounter","leftArray","rightArray","array","inputArray","Inflate","options","inputSignature","encrypted","Boolean","inputPassword","inputSigned","compressed","inputCompressed","inflate","codecConstructor","append","flush","dataViewSignature","Deflate","outputEncrypted","outputSigned","outputCompressed","deflate","outputPassword","inputData","newData","workers","pool","pendingRequests","getWorkerInterface","workerData","webWorker","scripts","busy","task","interface","worker","Worker","URL","import","meta","url","workerScriptsPath","addEventListener","onMessage","initAndSendMessage","slice","sendMessage","codecType","inputEncrypted","postMessage","onTaskFinished","event","reponseError","stack","createWebWorkerInterface","interfaceCodec","startsWith","createCodec","createWorkerInterface","splice","terminate","filter","writeData","writer","writeUint8Array","PROPERTY_NAMES","Entry","forEach","ERR_BAD_FORMAT","ZIP64_PROPERTIES","CP437","ZipEntry","config","initialized","init","dataArray","readUint8Array","undefined","extraFieldAES","originalCompressionMethod","strength","compressionMethod","localDirectory","readCommonHeader","rawExtraField","filenameLength","extraFieldLength","readCommonFooter","dataOffset","bitFlag","codec","streamCopy","useWebWorkers","workerScripts","maxWorkers","push","find","checkSignature","inputLength","chunkSize","Math","max","processChunk","chunkIndex","chunkOffset","min","onprogress","processData","compressedSize","getData","directory","version","rawBitFlag","dataDescriptor","languageEncodingFlag","rawLastModDate","lastModDate","timeRaw","date","time","getDate","fileEntry","extraField","rawExtraFieldView","offsetExtraField","size","uncompressedSize","extraFieldZip64","zip64","extraFieldView","values","indexValue","floor","Number","getBigUint64","missingProperties","propertyName","indexMissingProperty","readExtraFieldZip64","extraFieldUnicodePath","readExtraFieldUnicode","extraFieldUnicodeComment","vendorVersion","getUint8","vendorId","readExtraFieldAES","enhancedDeflating","extraFieldUnicode","rawPropertyName","TextDecoder","decode","decodeString","encoding","trim","toLowerCase","indexCharacter","Stream","Reader","Writer","TextWriter","Blob","target","readAsText","BlobReader","BlobWriter","contentType","DEFAULT_CONFIGURATION","navigator","hardwareConcurrency","ZipReader","endOfDirectoryInfo","minimumBytes","maximumLength","maximumBytes","dataInfo","seek","bytes","indexByte","seekSignature","endOfDirectoryView","directoryDataOffset","filesLength","endOfDirectoryLocatorArray","endOfDirectoryLocatorView","endOfDirectoryArray","directoryArray","directoryView","entries","indexFile","commentLength","rawFilename","filenameEncoding","filename","charAt","rawComment","commentEncoding","comment","entry","configure","configuration","Array","isArray","BOOT_CRITICAL_IMAGES","SYSTEM_IMAGES","USER_ACTION_MAP","load","unpack","flash","wipe","reboot","zipGetData","e","ProgressEvent","flashEntryBlob","device","partition","common.logDebug","len","flashBlob","progress","tryFlashImages","imageNames","imageName","pattern","RegExp","match","tryReboot","onReconnect","waitForConnect","flashZip","getEntries","getVariable","common.runWithTimedProgress","snapshotStatus","runCommand","imagesBlob","imageReader","imageEntries","reqText","androidInfo","line","replace","split","variable","expectValue","expectValues","hasSlot","FastbootError","includes","realValue","msg","checkRequirements","superName","superAction","superBlob","upload","common.readBlobAsBuffer","endsWith","UsbError","status","bootloaderMessage","FastbootDevice","_registeredUsbListeners","_connectResolve","_connectReject","_disconnectResolve","isConnected","opened","configurations","interfaces","claimed","rethrowErrors","ife","alternates","endpoints","epIn","epOut","endpoint","common.logVerbose","direction","endpointNumber","open","reset","selectConfiguration","claimInterface","userAgent","waitForDisconnect","devices","usb","getDevices","requestDevice","filters","classCode","subclassCode","protocolCode","hasPromiseReject","_validateAndConnectDevice","respStatus","returnData","dataSize","respPacket","transferIn","response","substring","respMessage","command","RangeError","cmdPacket","transferOut","_readResponse","varName","resp","promise","timedOut","tid","setTimeout","then","val","catch","err","finally","clearTimeout","parseInt","remainingBytes","xferHex","toString","padStart","downloadResp","bytelength","_sendRawPayload","wait","maxDlSize","_getDownloadSize","fileHeader","totalBytes","Sparse.isSparse","sparseHeader","Sparse.parseFileHeader","sparse","rawBuffer","Sparse.fromRaw","splits","sentBytes","splitSize","splitChunks","splitDataBytes","bytesRemaining","splitBlocks","splitImage","Sparse.splitBlob","flashFactoryZip"],"mappings":"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"}